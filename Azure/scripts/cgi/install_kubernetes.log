Script started on Fri 03 Jul 2015 02:07:20 PM UTC
]0;root@dlscusvmtest1: /optroot@dlscusvmtest1:/opt# git clone https://github.com/GoogleCloudPlatform/kubernetes
Cloning into 'kubernetes'...
remote: Counting objects: 108499, done.[K
Receiving objects:   0% (1/108499)   Receiving objects:   1% (1085/108499)   Receiving objects:   2% (2170/108499)   Receiving objects:   3% (3255/108499)   Receiving objects:   4% (4340/108499)   Receiving objects:   5% (5425/108499)   Receiving objects:   6% (6510/108499)   Receiving objects:   7% (7595/108499), 1.55 MiB | 3.08 MiB/s   Receiving objects:   8% (8680/108499), 1.55 MiB | 3.08 MiB/s   Receiving objects:   9% (9765/108499), 1.55 MiB | 3.08 MiB/s   Receiving objects:  10% (10850/108499), 1.55 MiB | 3.08 MiB/s   Receiving objects:  11% (11935/108499), 1.55 MiB | 3.08 MiB/s   Receiving objects:  12% (13020/108499), 1.55 MiB | 3.08 MiB/s   Receiving objects:  13% (14105/108499), 1.55 MiB | 3.08 MiB/s   Receiving objects:  14% (15190/108499), 1.55 MiB | 3.08 MiB/s   Receiving objects:  14% (15753/108499), 4.38 MiB | 4.37 MiB/s   Receiving objects:  15% (16275/108499), 4.38 MiB | 4.37 MiB/s   Receiving objects:  16% (17360/108499), 4.38 MiB | 4.37 MiB/s   Receiving objects:  17% (18445/108499), 4.38 MiB | 4.37 MiB/s   Receiving objects:  18% (19530/108499), 4.38 MiB | 4.37 MiB/s   Receiving objects:  18% (20567/108499), 13.35 MiB | 6.65 MiB/s   Receiving objects:  19% (20615/108499), 13.35 MiB | 6.65 MiB/s   Receiving objects:  20% (21700/108499), 20.58 MiB | 8.20 MiB/s   Receiving objects:  21% (22785/108499), 20.58 MiB | 8.20 MiB/s   Receiving objects:  22% (23870/108499), 20.58 MiB | 8.20 MiB/s   Receiving objects:  22% (24888/108499), 25.59 MiB | 8.50 MiB/s   Receiving objects:  23% (24955/108499), 25.59 MiB | 8.50 MiB/s   Receiving objects:  24% (26040/108499), 25.59 MiB | 8.50 MiB/s   Receiving objects:  25% (27125/108499), 31.37 MiB | 8.93 MiB/s   Receiving objects:  26% (28210/108499), 31.37 MiB | 8.93 MiB/s   Receiving objects:  27% (29295/108499), 31.37 MiB | 8.93 MiB/s   Receiving objects:  27% (30014/108499), 31.37 MiB | 8.93 MiB/s   Receiving objects:  28% (30380/108499), 36.91 MiB | 9.19 MiB/s   Receiving objects:  29% (31465/108499), 36.91 MiB | 9.19 MiB/s   Receiving objects:  30% (32550/108499), 36.91 MiB | 9.19 MiB/s   Receiving objects:  31% (33635/108499), 36.91 MiB | 9.19 MiB/s   Receiving objects:  32% (34720/108499), 36.91 MiB | 9.19 MiB/s   Receiving objects:  33% (35805/108499), 36.91 MiB | 9.19 MiB/s   Receiving objects:  34% (36890/108499), 36.91 MiB | 9.19 MiB/s   Receiving objects:  35% (37975/108499), 42.88 MiB | 9.49 MiB/s   Receiving objects:  36% (39060/108499), 42.88 MiB | 9.49 MiB/s   Receiving objects:  37% (40145/108499), 42.88 MiB | 9.49 MiB/s   Receiving objects:  38% (41230/108499), 42.88 MiB | 9.49 MiB/s   Receiving objects:  39% (42315/108499), 42.88 MiB | 9.49 MiB/s   Receiving objects:  40% (43400/108499), 42.88 MiB | 9.49 MiB/s   Receiving objects:  40% (43804/108499), 42.88 MiB | 9.49 MiB/s   Receiving objects:  41% (44485/108499), 52.37 MiB | 10.62 MiB/s   Receiving objects:  42% (45570/108499), 52.37 MiB | 10.62 MiB/s   Receiving objects:  42% (45678/108499), 52.37 MiB | 10.62 MiB/s   Receiving objects:  43% (46655/108499), 55.19 MiB | 10.41 MiB/s   Receiving objects:  44% (47740/108499), 55.19 MiB | 10.41 MiB/s   Receiving objects:  45% (48825/108499), 55.19 MiB | 10.41 MiB/s   Receiving objects:  46% (49910/108499), 55.19 MiB | 10.41 MiB/s   Receiving objects:  47% (50995/108499), 55.19 MiB | 10.41 MiB/s   Receiving objects:  48% (52080/108499), 55.19 MiB | 10.41 MiB/s   Receiving objects:  49% (53165/108499), 55.19 MiB | 10.41 MiB/s   Receiving objects:  50% (54250/108499), 55.19 MiB | 10.41 MiB/s   Receiving objects:  51% (55335/108499), 55.19 MiB | 10.41 MiB/s   Receiving objects:  52% (56420/108499), 55.19 MiB | 10.41 MiB/s   Receiving objects:  53% (57505/108499), 55.19 MiB | 10.41 MiB/s   Receiving objects:  54% (58590/108499), 55.19 MiB | 10.41 MiB/s   Receiving objects:  55% (59675/108499), 55.19 MiB | 10.41 MiB/s   Receiving objects:  56% (60760/108499), 55.19 MiB | 10.41 MiB/s   Receiving objects:  57% (61845/108499), 62.63 MiB | 10.91 MiB/s   Receiving objects:  58% (62930/108499), 62.63 MiB | 10.91 MiB/s   Receiving objects:  59% (64015/108499), 62.63 MiB | 10.91 MiB/s   Receiving objects:  60% (65100/108499), 62.63 MiB | 10.91 MiB/s   Receiving objects:  61% (66185/108499), 62.63 MiB | 10.91 MiB/s   Receiving objects:  62% (67270/108499), 62.63 MiB | 10.91 MiB/s   Receiving objects:  63% (68355/108499), 62.63 MiB | 10.91 MiB/s   Receiving objects:  64% (69440/108499), 62.63 MiB | 10.91 MiB/s   Receiving objects:  65% (70525/108499), 62.63 MiB | 10.91 MiB/s   Receiving objects:  66% (71610/108499), 62.63 MiB | 10.91 MiB/s   Receiving objects:  67% (72695/108499), 62.63 MiB | 10.91 MiB/s   Receiving objects:  68% (73780/108499), 62.63 MiB | 10.91 MiB/s   Receiving objects:  69% (74865/108499), 62.63 MiB | 10.91 MiB/s   Receiving objects:  70% (75950/108499), 62.63 MiB | 10.91 MiB/s   Receiving objects:  70% (76190/108499), 62.63 MiB | 10.91 MiB/s   Receiving objects:  71% (77035/108499), 69.34 MiB | 10.80 MiB/s   Receiving objects:  72% (78120/108499), 69.34 MiB | 10.80 MiB/s   Receiving objects:  73% (79205/108499), 69.34 MiB | 10.80 MiB/s   Receiving objects:  74% (80290/108499), 69.34 MiB | 10.80 MiB/s   Receiving objects:  75% (81375/108499), 69.34 MiB | 10.80 MiB/s   Receiving objects:  76% (82460/108499), 69.34 MiB | 10.80 MiB/s   Receiving objects:  77% (83545/108499), 69.34 MiB | 10.80 MiB/s   Receiving objects:  78% (84630/108499), 69.34 MiB | 10.80 MiB/s   Receiving objects:  79% (85715/108499), 69.34 MiB | 10.80 MiB/s   Receiving objects:  80% (86800/108499), 69.34 MiB | 10.80 MiB/s   Receiving objects:  81% (87885/108499), 69.34 MiB | 10.80 MiB/s   Receiving objects:  82% (88970/108499), 69.34 MiB | 10.80 MiB/s   Receiving objects:  83% (90055/108499), 69.34 MiB | 10.80 MiB/s   Receiving objects:  84% (91140/108499), 69.34 MiB | 10.80 MiB/s   Receiving objects:  85% (92225/108499), 69.34 MiB | 10.80 MiB/s   Receiving objects:  86% (93310/108499), 69.34 MiB | 10.80 MiB/s   Receiving objects:  87% (94395/108499), 69.34 MiB | 10.80 MiB/s   Receiving objects:  88% (95480/108499), 69.34 MiB | 10.80 MiB/s   Receiving objects:  89% (96565/108499), 74.70 MiB | 10.87 MiB/s   Receiving objects:  90% (97650/108499), 74.70 MiB | 10.87 MiB/s   Receiving objects:  91% (98735/108499), 74.70 MiB | 10.87 MiB/s   Receiving objects:  92% (99820/108499), 74.70 MiB | 10.87 MiB/s   Receiving objects:  93% (100905/108499), 74.70 MiB | 10.87 MiB/s   Receiving objects:  94% (101990/108499), 74.70 MiB | 10.87 MiB/s   Receiving objects:  95% (103075/108499), 74.70 MiB | 10.87 MiB/s   Receiving objects:  96% (104160/108499), 74.70 MiB | 10.87 MiB/s   Receiving objects:  97% (105245/108499), 74.70 MiB | 10.87 MiB/s   Receiving objects:  98% (106330/108499), 74.70 MiB | 10.87 MiB/s   Receiving objects:  99% (107415/108499), 74.70 MiB | 10.87 MiB/s   remote: Total 108499 (delta 0), reused 0 (delta 0), pack-reused 108499[K
Receiving objects: 100% (108499/108499), 74.70 MiB | 10.87 MiB/s   Receiving objects: 100% (108499/108499), 81.10 MiB | 10.79 MiB/s, done.
Resolving deltas:   0% (0/71911)   Resolving deltas:   1% (721/71911)   Resolving deltas:   2% (1439/71911)   Resolving deltas:   3% (2158/71911)   Resolving deltas:   4% (2887/71911)   Resolving deltas:   5% (3603/71911)   Resolving deltas:   6% (4330/71911)   Resolving deltas:   7% (5047/71911)   Resolving deltas:   8% (5757/71911)   Resolving deltas:   9% (6529/71911)   Resolving deltas:  10% (7200/71911)   Resolving deltas:  11% (7915/71911)   Resolving deltas:  12% (8637/71911)   Resolving deltas:  12% (8967/71911)   Resolving deltas:  13% (9480/71911)   Resolving deltas:  14% (10069/71911)   Resolving deltas:  15% (10792/71911)   Resolving deltas:  16% (11524/71911)   Resolving deltas:  17% (12231/71911)   Resolving deltas:  18% (12961/71911)   Resolving deltas:  18% (13105/71911)   Resolving deltas:  19% (13695/71911)   Resolving deltas:  20% (14400/71911)   Resolving deltas:  21% (15103/71911)   Resolving deltas:  22% (15828/71911)   Resolving deltas:  23% (16547/71911)   Resolving deltas:  24% (17383/71911)   Resolving deltas:  25% (18006/71911)   Resolving deltas:  25% (18126/71911)   Resolving deltas:  26% (19004/71911)   Resolving deltas:  27% (19626/71911)   Resolving deltas:  28% (20143/71911)   Resolving deltas:  29% (20976/71911)   Resolving deltas:  30% (21579/71911)   Resolving deltas:  31% (22380/71911)   Resolving deltas:  32% (23018/71911)   Resolving deltas:  33% (23742/71911)   Resolving deltas:  34% (24450/71911)   Resolving deltas:  35% (25169/71911)   Resolving deltas:  36% (25911/71911)   Resolving deltas:  37% (26639/71911)   Resolving deltas:  38% (27484/71911)   Resolving deltas:  39% (28065/71911)   Resolving deltas:  40% (28772/71911)   Resolving deltas:  41% (29488/71911)   Resolving deltas:  42% (30205/71911)   Resolving deltas:  43% (31319/71911)   Resolving deltas:  44% (31643/71911)   Resolving deltas:  45% (32401/71911)   Resolving deltas:  46% (33087/71911)   Resolving deltas:  47% (33814/71911)   Resolving deltas:  48% (34573/71911)   Resolving deltas:  49% (35310/71911)   Resolving deltas:  50% (35963/71911)   Resolving deltas:  51% (36676/71911)   Resolving deltas:  52% (37397/71911)   Resolving deltas:  52% (37562/71911)   Resolving deltas:  53% (38113/71911)   Resolving deltas:  54% (38858/71911)   Resolving deltas:  55% (39578/71911)   Resolving deltas:  56% (40275/71911)   Resolving deltas:  57% (41003/71911)   Resolving deltas:  58% (41726/71911)   Resolving deltas:  59% (42452/71911)   Resolving deltas:  60% (43191/71911)   Resolving deltas:  61% (43869/71911)   Resolving deltas:  62% (44651/71911)   Resolving deltas:  63% (45321/71911)   Resolving deltas:  64% (46058/71911)   Resolving deltas:  65% (46743/71911)   Resolving deltas:  66% (47524/71911)   Resolving deltas:  67% (48184/71911)   Resolving deltas:  68% (48902/71911)   Resolving deltas:  69% (49641/71911)   Resolving deltas:  70% (50378/71911)   Resolving deltas:  71% (51112/71911)   Resolving deltas:  72% (51807/71911)   Resolving deltas:  73% (52536/71911)   Resolving deltas:  74% (53222/71911)   Resolving deltas:  75% (53934/71911)   Resolving deltas:  76% (54682/71911)   Resolving deltas:  77% (55373/71911)   Resolving deltas:  77% (55723/71911)   Resolving deltas:  78% (56094/71911)   Resolving deltas:  79% (56818/71911)   Resolving deltas:  80% (57531/71911)   Resolving deltas:  81% (58260/71911)   Resolving deltas:  82% (58973/71911)   Resolving deltas:  83% (59812/71911)   Resolving deltas:  84% (60413/71911)   Resolving deltas:  85% (61136/71911)   Resolving deltas:  86% (61870/71911)   Resolving deltas:  87% (62566/71911)   Resolving deltas:  88% (63287/71911)   Resolving deltas:  89% (64107/71911)   Resolving deltas:  90% (64726/71911)   Resolving deltas:  91% (65441/71911)   Resolving deltas:  92% (66159/71911)   Resolving deltas:  93% (66878/71911)   Resolving deltas:  94% (67681/71911)   Resolving deltas:  95% (68357/71911)   Resolving deltas:  96% (69041/71911)   Resolving deltas:  97% (69754/71911)   Resolving deltas:  98% (70475/71911)   Resolving deltas:  99% (71192/71911)   Resolving deltas: 100% (71911/71911)   Resolving deltas: 100% (71911/71911), done.
]0;root@dlscusvmtest1: /optroot@dlscusvmtest1:/opt# azure ^C
]0;root@dlscusvmtest1: /optroot@dlscusvmtest1:/opt# cd kubernetes/docs/getting-started-guides/coreos/azure/
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# ./azure-login.js -u [K[K[K[K

module.js:340
    throw err;
          ^
Error: Cannot find module '/opt/kubernetes/docs/getting-started-guides/coreos/azure/node_modules/azure-cli/bin/azure'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Function.Module.runMain (module.js:497:10)
    at startup (node.js:119:16)
    at node.js:935:3
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# ./azure-login.js -u david.lalonde@GISCanada.onmicrosoft.com

module.js:340
    throw err;
          ^
Error: Cannot find module '/opt/kubernetes/docs/getting-started-guides/coreos/azure/node_modules/azure-cli/bin/azure'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Function.Module.runMain (module.js:497:10)
    at startup (node.js:119:16)
    at node.js:935:3
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# node_modules/azure-cli/bin/azurelnode_modules/azure-cli/bin/azuresnode_modules/azure-cli/bin/azure node_modules/azure-cli/bin/azure-node_modules/azure-cli/bin/azurelnode_modules/azure-cli/bin/azureanode_modules/azure-cli/bin/azure node_modules/azure-cli/bin/azure
ls: cannot access node_modules/azure-cli/bin/azure: No such file or directory
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# ls -la node_modules/azure-cli/bin/azure[K[K[K[K[K[K[K[K[K[K
ls: cannot access node_modules/azure-cli: No such file or directory
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# ls -la node_modules/azure-cli[K[K[K[K[K[K[K[K[K
ls: cannot access node_modules/: No such file or directory
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# ls -la 
total 520
drwxrwxr-x 6 root root   4096 Jul  3 14:08 [0m[01;34m.[0m
drwxrwxr-x 4 root root   4096 Jul  3 14:08 [01;34m..[0m
drwxrwxr-x 4 root root   4096 Jul  3 14:08 [01;34maddons[0m
-rwxrwxr-x 1 root root    120 Jul  3 14:08 [01;32mazure-login.js[0m
drwxrwxr-x 2 root root   4096 Jul  3 14:08 [01;34mcloud_config_templates[0m
-rwxrwxr-x 1 root root    434 Jul  3 14:08 [01;32mcreate-kubernetes-cluster.js[0m
-rwxrwxr-x 1 root root    193 Jul  3 14:08 [01;32mdestroy-cluster.js[0m
-rw-rw-r-- 1 root root 292367 Jul  3 14:08 [01;35mexternal_access.png[0m
-rw-rw-r-- 1 root root     14 Jul  3 14:08 .gitignore
-rw-rw-r-- 1 root root 173212 Jul  3 14:08 [01;35minitial_cluster.png[0m
drwxrwxr-x 3 root root   4096 Jul  3 14:08 [01;34mlib[0m
drwxrwxr-x 2 root root   4096 Jul  3 14:08 [01;34moutput[0m
-rw-rw-r-- 1 root root    509 Jul  3 14:08 package.json
-rw-rw-r-- 1 root root   9557 Jul  3 14:08 README.md
-rwxrwxr-x 1 root root    318 Jul  3 14:08 [01;32mscale-kubernetes-cluster.js[0m
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# npm install
[37m[40mnpm[0m [0m[30m[43mWARN[0m [0m[35mpackage.json[0m coreos-azure-weave@1.0.0 No repository field.
[0m-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G-[0G\[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G[37m[40mnpm[0m [0m[30m[43mWARN[0m [0m[35mdeprecated[0m jws@1.0.1: Security update: Versions below 3.0.0 are deprecated.
[0m-[0G\[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G[37m[40mnpm[0m [0m[30m[43mWARN[0m [0m[35mengine[0m galaxy@0.1.12: wanted: {"node":">=0.11.10"} (current: {"node":"0.10.38","npm":"1.4.28"})
[0m|[0G/[0G-[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G-[0G-[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G-[0G-[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G-[0G-[0G\[0G|[0G/[0G-[0G-[0G\[0G 
> fibers@1.0.6 install /opt/kubernetes/docs/getting-started-guides/coreos/azure/node_modules/azure-cli/node_modules/streamline/node_modules/fibers
> node build.js || nodejs build.js

-[0G\[0G`linux-x64-v8-3.14` exists; testing
|[0G/[0G-[0G\[0GBinary is fine; exiting
-[0G\[0G|[0G/[0G-[0G\[0G|[0G-[0G-[0G\[0G-[0G\[0G|[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G/[0G-[0G-[0G\[0G|[0G/[0G-[0G\[0G|[0G-[0G\[0G|[0Gcolors@1.1.2 node_modules/colors

underscore@1.8.3 node_modules/underscore

openssl-wrapper@0.2.1 node_modules/openssl-wrapper
├── debug@0.7.4
└── q@0.9.7

underscore.string@3.1.1 node_modules/underscore.string

js-yaml@3.3.1 node_modules/js-yaml
├── esprima@2.2.0
└── argparse@1.0.2 (sprintf-js@1.0.2, lodash@3.10.0)

azure-cli@0.9.5 node_modules/azure-cli
├── easy-table@0.0.1
├── eyes@0.1.8
├── xmlbuilder@0.4.3
├── swagger-schema-official@2.0.0-a33091a
├── through@2.3.4
├── colors@0.6.2
├── node-uuid@1.2.0
├── wordwrap@0.0.2
├── streamline-streams@0.1.5
├── async@0.2.7
├── image-size@0.3.5
├── mime@1.2.11
├── validator@3.1.0
├── walk@2.3.9 (foreachasync@3.0.0)
├── tv4@1.1.12
├── caller-id@0.1.0 (stack-trace@0.0.9)
├── tmp@0.0.25
├── commander@1.0.4 (keypress@0.1.0)
├── underscore@1.4.4
├── readable-stream@1.0.33 (isarray@0.0.1, inherits@2.0.1, string_decoder@0.10.31, core-util-is@1.0.1)
├── tunnel@0.0.2
├── event-stream@3.1.5 (stream-combiner@0.0.4, duplexer@0.1.1, from@0.1.3, pause-stream@0.0.11, map-stream@0.1.0, split@0.2.10)
├── azure-asm-hdinsight@0.10.1
├── azure-monitoring@0.10.0
├── jsrsasign@4.8.2
├── kuduscript@0.2.2 (commander@1.1.1)
├── azure-arm-website@0.10.0
├── ssh-key-to-pem@0.11.0 (asn1@0.1.11, ctype@0.5.2)
├── github@0.1.6
├── omelette@0.1.0
├── winston@0.6.2 (cycle@1.0.3, stack-trace@0.0.9, pkginfo@0.2.3, async@0.1.22, request@2.9.203)
├── xml2js@0.1.14 (sax@1.1.1)
├── request@2.27.0 (aws-sign@0.3.0, forever-agent@0.5.2, qs@0.6.6, tunnel-agent@0.3.0, oauth-sign@0.3.0, cookie-jar@0.3.0, json-stringify-safe@5.0.1, node-uuid@1.4.3, form-data@0.1.4, http-signature@0.10.1, hawk@1.0.0)
├── jszip@2.5.0 (pako@0.2.7)
├── azure-common@0.9.12 (dateformat@1.0.2-1.2.3, duplexer@0.1.1, envconf@0.0.4, xml2js@0.2.7, request@2.45.0)
├── node-forge@0.6.23
├── azure-storage@0.4.1 (extend@1.2.1, node-uuid@1.4.3, xml2js@0.2.7)
├── moment@2.6.0
├── streamline@0.10.17 (galaxy@0.1.12, source-map@0.1.43, fibers@1.0.6)
├── azure-gallery@2.0.0-pre.15 (azure-common@0.9.11)
├── adal-node@0.1.12 (node-uuid@1.4.1, xmldom@0.1.19, xpath.js@1.0.6, jws@1.0.1, date-utils@1.2.17)
├── azure-mgmt-resource@2.0.0-pre.17 (azure-common@0.9.11)
├── azure-mgmt-subscription@0.9.16 (azure-common@0.9.11)
├── azure-storage-legacy@0.9.13 (azure-common@0.9.10)
├── azure-mgmt-compute@0.9.16 (azure-common@0.9.11)
├── azure-mgmt@0.9.16 (azure-common@0.9.11)
├── azure-mgmt-authorization@0.9.0-pre.6 (azure-common@0.9.11)
├── azure-mgmt-storage@0.9.16 (azure-common@0.9.11)
├── azure-keyvault@0.10.0 (node-uuid@1.4.3, azure-common@0.9.13)
├── azure-insights@0.7.7-pre (azure-common@0.9.11)
├── azure-mgmt-website@0.9.16 (azure-common@0.9.11)
├── azure-extra@0.1.7 (azure-common@0.9.11)
├── azure-mgmt-vnet@0.9.17 (azure-common@0.9.11)
├── azure-arm-apiapp@0.1.3 (azure-common@0.9.13)
├── azure-mgmt-sql@0.9.17 (azure-common@0.9.11)
└── azure-mgmt-sb@0.9.16 (azure-common@0.9.11)
[2K]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# npm install[4Pls -la node_modules/azure-cli/bin/azure./azure-login.js -u david.lalonde@GISCanada.onmicrosoft.com
[32minfo[39m:    Executing command [1mlogin[22m
[33mwarn[39m:    Please note that currently you can login only via Microsoft organizational account or service principal. For instructions on how to set them up, please read http://aka.ms/Dhf67j.
Password: ********
                                                                               [36m-[39m Authenticating...[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m+
[31merror[39m:   Get Token request returned http error: 400 and server response: {"error":"invalid_grant","error_description":"AADSTS70002: Error validating credentials. AADSTS50054: Old password is used for authentication.\r\nTrace ID: cc2db094-10dc-43df-a275-88f1351ea87c\r\nCorrelation ID: 31b32a96-b16b-472b-b309-002bf88d03a9\r\nTimestamp: 2015-07-03 14:18:34Z","error_codes":[70002,50054],"timestamp":"2015-07-03 14:18:34Z","trace_id":"cc2db094-10dc-43df-a275-88f1351ea87c","correlation_id":"31b32a96-b16b-472b-b309-002bf88d03a9","submit_url":null,"context":null}
[32minfo[39m:    Error information has been recorded to /root/.azure/azure.err
[31merror[39m:   [1mlogin[22m command [1m[31mfailed
[39m[22m
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# Gino[K[K[K[K./azure-login.js -u david.lalonde@GISCanada.onmicrosoft.com
[32minfo[39m:    Executing command [1mlogin[22m
[33mwarn[39m:    Please note that currently you can login only via Microsoft organizational account or service principal. For instructions on how to set them up, please read http://aka.ms/Dhf67j.
Password: *********
                                                                               [36m-[39m Authenticating...[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[32minfo[39m:    Added subscription CA-Canada TBC-GIS Canada
[32minfo[39m:    Setting subscription CA-Canada TBC-GIS Canada as default
+
[32minfo[39m:    [1mlogin[22m command [1m[32mOK[39m[22m
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# ./create-kubernetes-cluster.js
[33mazure_wrapper/task:[39m [90m{ todo: 
   [ [ 'network',
       'vnet',
       'create',
       '--location=West Europe',
       '--address-space=172.16.0.0',
       'kube-internal-vnet-f6890077aed0e2' ],
     [ 'storage',
       'account',
       'create',
       '--type=LRS',
       '--location=West Europe',
       'f6890077aed0e2' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-f6890077aed0e2',
       '--virtual-network-name=kube-internal-vnet-f6890077aed0e2',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_f6890077aed0e2_ssh.pem',
       '--vm-name=etcd-00',
       '--ssh=2201',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_f6890077aed0e2_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-f6890077aed0e2',
       '--virtual-network-name=kube-internal-vnet-f6890077aed0e2',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_f6890077aed0e2_ssh.pem',
       '--vm-name=etcd-01',
       '--ssh=2202',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_f6890077aed0e2_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-f6890077aed0e2',
       '--virtual-network-name=kube-internal-vnet-f6890077aed0e2',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_f6890077aed0e2_ssh.pem',
       '--vm-name=etcd-02',
       '--ssh=2203',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_f6890077aed0e2_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-f6890077aed0e2',
       '--virtual-network-name=kube-internal-vnet-f6890077aed0e2',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_f6890077aed0e2_ssh.pem',
       '--vm-name=kube-00',
       '--ssh=2204',
       '--custom-data=./output/kubernetes-cluster-main-nodes_f6890077aed0e2_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-f6890077aed0e2',
       '--virtual-network-name=kube-internal-vnet-f6890077aed0e2',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_f6890077aed0e2_ssh.pem',
       '--vm-name=kube-01',
       '--ssh=2205',
       '--custom-data=./output/kubernetes-cluster-main-nodes_f6890077aed0e2_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-f6890077aed0e2',
       '--virtual-network-name=kube-internal-vnet-f6890077aed0e2',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_f6890077aed0e2_ssh.pem',
       '--vm-name=kube-02',
       '--ssh=2206',
       '--custom-data=./output/kubernetes-cluster-main-nodes_f6890077aed0e2_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ] ],
  done: [] }[39m
[33mazure_wrapper/exec:[39m [34m[ 'network',
  'vnet',
  'create',
  '--location=West Europe',
  '--address-space=172.16.0.0',
  'kube-internal-vnet-f6890077aed0e2' ][39m
[31mGenerating a 2048 bit RSA private key
.....................................................................................................................+++
....+++
writing new private key to './output/kube_f6890077aed0e2_ssh.key'
-----
[39m
[32minfo[39m:    Executing command [1mnetwork vnet create[22m
[32minfo[39m:    Using default address space cidr: 12
[32minfo[39m:    Using default subnet start IP: 172.16.0.0
[32minfo[39m:    Using default subnet cidr: 15
                                                                               [36m-[39m Getting network configuration[36m\[39m+
                                                                               [36m|[39m Getting or creating affinity group+
                                                                               [36m/[39m Getting locations[36m-[39m[36m\[39m[36m|[39m+
                                                                               [36m/[39m Updating Network Configuration[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m+
[32minfo[39m:    [1mnetwork vnet create[22m command [1m[32mOK[39m[22m
[33mazure_wrapper/task:[39m [90m{ todo: 
   [ [ 'storage',
       'account',
       'create',
       '--type=LRS',
       '--location=West Europe',
       'f6890077aed0e2' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-f6890077aed0e2',
       '--virtual-network-name=kube-internal-vnet-f6890077aed0e2',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_f6890077aed0e2_ssh.pem',
       '--vm-name=etcd-00',
       '--ssh=2201',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_f6890077aed0e2_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-f6890077aed0e2',
       '--virtual-network-name=kube-internal-vnet-f6890077aed0e2',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_f6890077aed0e2_ssh.pem',
       '--vm-name=etcd-01',
       '--ssh=2202',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_f6890077aed0e2_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-f6890077aed0e2',
       '--virtual-network-name=kube-internal-vnet-f6890077aed0e2',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_f6890077aed0e2_ssh.pem',
       '--vm-name=etcd-02',
       '--ssh=2203',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_f6890077aed0e2_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-f6890077aed0e2',
       '--virtual-network-name=kube-internal-vnet-f6890077aed0e2',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_f6890077aed0e2_ssh.pem',
       '--vm-name=kube-00',
       '--ssh=2204',
       '--custom-data=./output/kubernetes-cluster-main-nodes_f6890077aed0e2_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-f6890077aed0e2',
       '--virtual-network-name=kube-internal-vnet-f6890077aed0e2',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_f6890077aed0e2_ssh.pem',
       '--vm-name=kube-01',
       '--ssh=2205',
       '--custom-data=./output/kubernetes-cluster-main-nodes_f6890077aed0e2_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-f6890077aed0e2',
       '--virtual-network-name=kube-internal-vnet-f6890077aed0e2',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_f6890077aed0e2_ssh.pem',
       '--vm-name=kube-02',
       '--ssh=2206',
       '--custom-data=./output/kubernetes-cluster-main-nodes_f6890077aed0e2_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ] ],
  done: 
   [ { code: 0,
       signal: null,
       what: 'network vnet create --location=West Europe --address-space=172.16.0.0 kube-internal-vnet-f6890077aed0e2',
       remaining: 7 } ] }[39m
[33mazure_wrapper/exec:[39m [34m[ 'storage',
  'account',
  'create',
  '--type=LRS',
  '--location=West Europe',
  'f6890077aed0e2' ][39m
[32minfo[39m:    Executing command [1mstorage account create[22m
                                                                               [36m-[39m Creating storage account[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m+
[32minfo[39m:    [1mstorage account create[22m command [1m[32mOK[39m[22m
[33mazure_wrapper/task:[39m [90m{ todo: 
   [ [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-f6890077aed0e2',
       '--virtual-network-name=kube-internal-vnet-f6890077aed0e2',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_f6890077aed0e2_ssh.pem',
       '--vm-name=etcd-00',
       '--ssh=2201',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_f6890077aed0e2_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-f6890077aed0e2',
       '--virtual-network-name=kube-internal-vnet-f6890077aed0e2',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_f6890077aed0e2_ssh.pem',
       '--vm-name=etcd-01',
       '--ssh=2202',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_f6890077aed0e2_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-f6890077aed0e2',
       '--virtual-network-name=kube-internal-vnet-f6890077aed0e2',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_f6890077aed0e2_ssh.pem',
       '--vm-name=etcd-02',
       '--ssh=2203',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_f6890077aed0e2_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-f6890077aed0e2',
       '--virtual-network-name=kube-internal-vnet-f6890077aed0e2',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_f6890077aed0e2_ssh.pem',
       '--vm-name=kube-00',
       '--ssh=2204',
       '--custom-data=./output/kubernetes-cluster-main-nodes_f6890077aed0e2_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-f6890077aed0e2',
       '--virtual-network-name=kube-internal-vnet-f6890077aed0e2',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_f6890077aed0e2_ssh.pem',
       '--vm-name=kube-01',
       '--ssh=2205',
       '--custom-data=./output/kubernetes-cluster-main-nodes_f6890077aed0e2_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-f6890077aed0e2',
       '--virtual-network-name=kube-internal-vnet-f6890077aed0e2',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_f6890077aed0e2_ssh.pem',
       '--vm-name=kube-02',
       '--ssh=2206',
       '--custom-data=./output/kubernetes-cluster-main-nodes_f6890077aed0e2_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ] ],
  done: 
   [ { code: 0,
       signal: null,
       what: 'network vnet create --location=West Europe --address-space=172.16.0.0 kube-internal-vnet-f6890077aed0e2',
       remaining: 7 },
     { code: 0,
       signal: null,
       what: 'storage account create --type=LRS --location=West Europe f6890077aed0e2',
       remaining: 6 } ] }[39m
[33mazure_wrapper/exec:[39m [34m[ 'vm',
  'create',
  '--location=West Europe',
  '--vm-size=Small',
  '--connect=kube-f6890077aed0e2',
  '--virtual-network-name=kube-internal-vnet-f6890077aed0e2',
  '--no-ssh-password',
  '--ssh-cert=./output/kube_f6890077aed0e2_ssh.pem',
  '--vm-name=etcd-00',
  '--ssh=2201',
  '--custom-data=./output/kubernetes-cluster-etcd-nodes_f6890077aed0e2_generated.yml',
  '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
  'core' ][39m
[32minfo[39m:    Executing command [1mvm create[22m
                                                                               [36m-[39m Looking up image 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m+
                                                                               [36m|[39m Looking up virtual network[36m/[39m[36m-[39m[36m\[39m+
                                                                               [36m|[39m Looking up cloud service[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m+
[32minfo[39m:    cloud service kube-f6890077aed0e2 not found.
                                                                               [36m-[39m Creating cloud service[36m\[39m[36m|[39m[36m/[39m+
[31merror[39m:   The subscription policy limit for resource type 'hosted service count' was exceeded. The limit for resource type 'hosted service count' is 20 per subscription, the current count is 20, and the requested increment is 1.
[32minfo[39m:    Error information has been recorded to /root/.azure/azure.err
[31merror[39m:   [1mvm create[22m command [1m[31mfailed
[39m[22m
[31mazure_wrapper/fail: Exiting due to an error.[39m
[33mazure_wrapper/info: Saved state into `./output/kube_f6890077aed0e2_deployment.yml`[39m
[36mazure_wrapper/info: You probably want to destroy and re-run.[39m
Aborted (core dumped)
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# grep  kube-vi ./output/kube_f6890077aed0e2_deployment.yml
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# grep  kube-vi ./output/kube_f6890077aed0e2_deployment.yml[1P[1P[1P[1P[C[1P[1@v[1@i[C[1@ 
2 files to edit
[?1049h[?1h=[1;43r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[43;1H"kube-vi" [New File][>c[2;1H[1m[34m~                                                                                                                                                 [3;1H~                                                                                                                                                 [4;1H~                                                                                                                                                 [5;1H~                                                                                                                                                 [6;1H~                                                                                                                                                 [7;1H~                                                                                                                                                 [8;1H~                                                                                                                                                 [9;1H~                                                                                                                                                 [10;1H~                                                                                                                                                 [11;1H~                                                                                                                                                 [12;1H~                                                                                                                                                 [13;1H~                                                                                                                                                 [14;1H~                                                                                                                                                 [15;1H~                                                                                                                                                 [16;1H~                                                                                                                                                 [17;1H~                                                                                                                                                 [18;1H~                                                                                                                                                 [19;1H~                                                                                                                                                 [20;1H~                                                                                                                                                 [21;1H~                                                                                                                                                 [22;1H~                                                                                                                                                 [23;1H~                                                                                                                                                 [24;1H~                                                                                                                                                 [25;1H~                                                                                                                                                 [26;1H~                                                                                                                                                 [27;1H~                                                                                                                                                 [28;1H~                                                                                                                                                 [29;1H~                                                                                                                                                 [30;1H~                                                                                                                                                 [31;1H~                                                                                                                                                 [32;1H~                                                                                                                                                 [33;1H~                                                                                                                                                 [34;1H~                                                                                                                                                 [35;1H~                                                                                                                                                 [36;1H~                                                                                                                                                 [37;1H~                                                                                                                                                 [38;1H~                                                                                                                                                 [39;1H~                                                                                                                                                 [40;1H~                                                                                                                                                 [41;1H~                                                                                                                                                 [42;1H~                                                                                                                                                 [m[43;129H0,0-1[9CAll[1;1H[?12l[?25h[?25l[43;1H[K[43;1H:[?12l[?25hq[?25l[?12l[?25h![?25l[?12l[?25h[?25l[43;1H[K[43;1H[?1l>[?12l[?25h[?1049l]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# cd azure_wrapper/task[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[Kvi  kube-vi ./output/kube_f6890077aed0e2_deployment.yml[2@grep[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[27P./create-kubernetes-cluster.js --help
[33mazure_wrapper/task:[39m [90m{ todo: 
   [ [ 'network',
       'vnet',
       'create',
       '--location=West Europe',
       '--address-space=172.16.0.0',
       'kube-internal-vnet-f9785ceb1576a0' ],
     [ 'storage',
       'account',
       'create',
       '--type=LRS',
       '--location=West Europe',
       'f9785ceb1576a0' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-f9785ceb1576a0',
       '--virtual-network-name=kube-internal-vnet-f9785ceb1576a0',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_f9785ceb1576a0_ssh.pem',
       '--vm-name=etcd-00',
       '--ssh=2201',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_f9785ceb1576a0_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-f9785ceb1576a0',
       '--virtual-network-name=kube-internal-vnet-f9785ceb1576a0',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_f9785ceb1576a0_ssh.pem',
       '--vm-name=etcd-01',
       '--ssh=2202',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_f9785ceb1576a0_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-f9785ceb1576a0',
       '--virtual-network-name=kube-internal-vnet-f9785ceb1576a0',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_f9785ceb1576a0_ssh.pem',
       '--vm-name=etcd-02',
       '--ssh=2203',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_f9785ceb1576a0_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-f9785ceb1576a0',
       '--virtual-network-name=kube-internal-vnet-f9785ceb1576a0',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_f9785ceb1576a0_ssh.pem',
       '--vm-name=kube-00',
       '--ssh=2204',
       '--custom-data=./output/kubernetes-cluster-main-nodes_f9785ceb1576a0_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-f9785ceb1576a0',
       '--virtual-network-name=kube-internal-vnet-f9785ceb1576a0',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_f9785ceb1576a0_ssh.pem',
       '--vm-name=kube-01',
       '--ssh=2205',
       '--custom-data=./output/kubernetes-cluster-main-nodes_f9785ceb1576a0_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-f9785ceb1576a0',
       '--virtual-network-name=kube-internal-vnet-f9785ceb1576a0',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_f9785ceb1576a0_ssh.pem',
       '--vm-name=kube-02',
       '--ssh=2206',
       '--custom-data=./output/kubernetes-cluster-main-nodes_f9785ceb1576a0_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ] ],
  done: [] }[39m
[33mazure_wrapper/exec:[39m [34m[ 'network',
  'vnet',
  'create',
  '--location=West Europe',
  '--address-space=172.16.0.0',
  'kube-internal-vnet-f9785ceb1576a0' ][39m
[31mGenerating a 2048 bit RSA private key
.....+++
.......................................+++
writing new private key to './output/kube_f9785ceb1576a0_ssh.key'
-----
[39m
^C]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# ./create-kubernetes-cluster.js --help[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[K[K[K[K[K[K[1@v[1@i[1@ 
[?1049h[?1h=[1;43r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[43;1H"./create-kubernetes-cluster.js" 15L, 434C[>c[1;1H#!/usr/bin/env node

[36mvar[m azure = require([31m'./lib/azure_wrapper.js'[m);
[36mvar[m kube = require([31m'./lib/deployment_logic/kubernetes.js'[m);

azure.create_config([31m'kube'[m, [36m{[m [31m'etcd'[m: 3, [31m'kube'[m: 3 [36m}[m);

azure.run_task_queue([36m[[m
  azure.queue_default_network(),
  azure.queue_storage_if_needed(),
  azure.queue_machines([31m'etcd'[m, [31m'stable'[m,
    kube.create_etcd_cloud_config),
  azure.queue_machines([31m'kube'[m, [31m'stable'[m,
    kube.create_node_cloud_config),
[36m][m);
[1m[34m~                                                                                                                                                 [17;1H~                                                                                                                                                 [18;1H~                                                                                                                                                 [19;1H~                                                                                                                                                 [20;1H~                                                                                                                                                 [21;1H~                                                                                                                                                 [22;1H~                                                                                                                                                 [23;1H~                                                                                                                                                 [24;1H~                                                                                                                                                 [25;1H~                                                                                                                                                 [26;1H~                                                                                                                                                 [27;1H~                                                                                                                                                 [28;1H~                                                                                                                                                 [29;1H~                                                                                                                                                 [30;1H~                                                                                                                                                 [31;1H~                                                                                                                                                 [32;1H~                                                                                                                                                 [33;1H~                                                                                                                                                 [34;1H~                                                                                                                                                 [35;1H~                                                                                                                                                 [36;1H~                                                                                                                                                 [37;1H~                                                                                                                                                 [38;1H~                                                                                                                                                 [39;1H~                                                                                                                                                 [40;1H~                                                                                                                                                 [41;1H~                                                                                                                                                 [42;1H~                                                                                                                                                 [m[43;129H1,1[11CAll[1;1H[?12l[?25h[?25l[43;1H[K[43;1H:[?12l[?25hq[?25l[?12l[?25h![?25l[?12l[?25h[?25l[43;1H[K[43;1H[?1l>[?12l[?25h[?1049l]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# vi ./lib/deployment_logic/kubernetes.js
[?1049h[?1h=[1;43r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[43;1H"./lib/deployment_logic/kubernetes.js" 76L, 2485C[>c[1;1H[36mvar[m _ = require([31m'underscore'[m);
_.mixin(require([31m'underscore.string'[m).exports());

[36mvar[m util = require([31m'../util.js'[m);
[36mvar[m cloud_config = require([31m'../cloud_config.js'[m);


etcd_initial_cluster_conf_self = [36mfunction[m (conf) [36m{[m
  [36mvar[m port = [31m'2380'[m;

  [36mvar[m data = [36m{[m
    nodes: _(conf.nodes.etcd).times([36mfunction[m (n) [36m{[m[13;6H [36mvar[m host = util.hostname(n, [31m'etcd'[m);[14;6H [33mreturn[m [36m[[mhost, [36m[[mhost, port[36m][m.join([31m':'[m)[36m][m.join([31m'=http://'[m);
    [36m}[m),
  [36m}[m;

  [33mreturn[m [36m{[m
    [31m'name'[m: [31m'etcd2.service'[m,
    [31m'drop-ins'[m: [36m[{[m[21;6H [31m'name'[m: [31m'50-etcd-initial-cluster.conf'[m,[22;6H [31m'content'[m: _.template([31m"[Service][m[35m\n[m[31mEnvironment=ETCD_INITIAL_CLUSTER=<%= nodes.join(',') %>[m[35m\n[m[31m"[m)(data),
    [36m}][m,
  [36m}[m;
[36m}[m;

etcd_initial_cluster_conf_kube = [36mfunction[m (conf) [36m{[m
  [36mvar[m port = [31m'4001'[m;

  [36mvar[m data = [36m{[m
    nodes: _(conf.nodes.etcd).times([36mfunction[m (n) [36m{[m[32;6H [36mvar[m host = util.hostname(n, [31m'etcd'[m);[33;6H [33mreturn[m [31m'http://'[m + [36m[[mhost, port[36m][m.join([31m':'[m);
    [36m}[m),
  [36m}[m;

  [33mreturn[m [36m{[m
    [31m'name'[m: [31m'apiserver.service'[m,
    [31m'drop-ins'[m: [36m[{[m[40;6H [31m'name'[m: [31m'50-etcd-initial-cluster.conf'[m,[41;6H [31m'content'[m: _.template([31m"[Service][m[35m\n[m[31mEnvironment=ETCD_SERVERS=--etcd_servers=<%= nodes.join(',') %>[m[35m\n[m[31m"[m)(data),
    [36m}][m,[43;129H1,1[11CTop[1;1H[?12l[?25h[?25l[43;1H[K[43;1H/[?12l[?25hC[?25l[?12l[?25hl[?25l[?12l[?25ho[?25l[?12l[?25hu[?25l[?12l[?25hd[?25l[?12l[?25h[?25l[31msearch hit BOTTOM, continuing at TOP[m[1m[37m[41mE486: Pattern not found: Cloud[m[43;31H[K[43;129H1,1[11CTop[1;1H[?12l[?25h[?25l[43;1H[K[43;1H:[?12l[?25hq[?25l[?12l[?25h![?25l[?12l[?25h[?25l[43;1H[K[43;1H[?1l>[?12l[?25h[?1049l]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# s[Kls -la
total 524
drwxrwxr-x 7 root root   4096 Jul  3 14:24 [0m[01;34m.[0m
drwxrwxr-x 4 root root   4096 Jul  3 14:08 [01;34m..[0m
drwxrwxr-x 4 root root   4096 Jul  3 14:08 [01;34maddons[0m
-rwxrwxr-x 1 root root    120 Jul  3 14:08 [01;32mazure-login.js[0m
drwxrwxr-x 2 root root   4096 Jul  3 14:08 [01;34mcloud_config_templates[0m
-rwxrwxr-x 1 root root    434 Jul  3 14:08 [01;32mcreate-kubernetes-cluster.js[0m
-rwxrwxr-x 1 root root    193 Jul  3 14:08 [01;32mdestroy-cluster.js[0m
-rw-rw-r-- 1 root root 292367 Jul  3 14:08 [01;35mexternal_access.png[0m
-rw-rw-r-- 1 root root     14 Jul  3 14:08 .gitignore
-rw-rw-r-- 1 root root 173212 Jul  3 14:08 [01;35minitial_cluster.png[0m
drwxrwxr-x 3 root root   4096 Jul  3 14:08 [01;34mlib[0m
drwxrwxr-x 9 root root   4096 Jul  3 14:14 [01;34mnode_modules[0m
drwxrwxr-x 2 root root   4096 Jul  3 14:22 [01;34moutput[0m
-rw-rw-r-- 1 root root    509 Jul  3 14:08 package.json
-rw-rw-r-- 1 root root   9557 Jul  3 14:08 README.md
-rwxrwxr-x 1 root root    318 Jul  3 14:08 [01;32mscale-kubernetes-cluster.js[0m
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure#  cd libe
bash: cd: libe: No such file or directory
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# ls -la 
total 524
drwxrwxr-x 7 root root   4096 Jul  3 14:24 [0m[01;34m.[0m
drwxrwxr-x 4 root root   4096 Jul  3 14:08 [01;34m..[0m
drwxrwxr-x 4 root root   4096 Jul  3 14:08 [01;34maddons[0m
-rwxrwxr-x 1 root root    120 Jul  3 14:08 [01;32mazure-login.js[0m
drwxrwxr-x 2 root root   4096 Jul  3 14:08 [01;34mcloud_config_templates[0m
-rwxrwxr-x 1 root root    434 Jul  3 14:08 [01;32mcreate-kubernetes-cluster.js[0m
-rwxrwxr-x 1 root root    193 Jul  3 14:08 [01;32mdestroy-cluster.js[0m
-rw-rw-r-- 1 root root 292367 Jul  3 14:08 [01;35mexternal_access.png[0m
-rw-rw-r-- 1 root root     14 Jul  3 14:08 .gitignore
-rw-rw-r-- 1 root root 173212 Jul  3 14:08 [01;35minitial_cluster.png[0m
drwxrwxr-x 3 root root   4096 Jul  3 14:08 [01;34mlib[0m
drwxrwxr-x 9 root root   4096 Jul  3 14:14 [01;34mnode_modules[0m
drwxrwxr-x 2 root root   4096 Jul  3 14:22 [01;34moutput[0m
-rw-rw-r-- 1 root root    509 Jul  3 14:08 package.json
-rw-rw-r-- 1 root root   9557 Jul  3 14:08 README.md
-rwxrwxr-x 1 root root    318 Jul  3 14:08 [01;32mscale-kubernetes-cluster.js[0m
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# cd lib/
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azure/libroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure/lib# ls -la 
total 28
drwxrwxr-x 3 root root 4096 Jul  3 14:08 [0m[01;34m.[0m
drwxrwxr-x 7 root root 4096 Jul  3 14:24 [01;34m..[0m
-rw-rw-r-- 1 root root 8068 Jul  3 14:08 azure_wrapper.js
-rw-rw-r-- 1 root root 1153 Jul  3 14:08 cloud_config.js
drwxrwxr-x 2 root root 4096 Jul  3 14:24 [01;34mdeployment_logic[0m
-rw-rw-r-- 1 root root  812 Jul  3 14:08 util.js
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azure/libroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure/lib# vi azure_wrapper.js 
[?1049h[?1h=[1;43r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[43;1H"azure_wrapper.js" 271L, 8068C[>c[1;1H[36mvar[m _ = require([31m'underscore'[m);

[36mvar[m fs = require([31m'fs'[m);
[36mvar[m cp = require([31m'child_process'[m);

[36mvar[m yaml = require([31m'js-yaml'[m);

[36mvar[m openssl = require([31m'openssl-wrapper'[m);

[36mvar[m clr = require([31m'colors'[m);
[36mvar[m inspect = require([31m'util'[m).inspect;

[36mvar[m util = require([31m'./util.js'[m);

[36mvar[m coreos_image_ids = [36m{[m
  [31m'stable'[m: [31m'2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0'[m,
  [31m'beta'[m: [31m'2b171e93f07c4903bcad35bda10acf22__CoreOS-Beta-681.0.0'[m, [34m// untested[m
  [31m'alpha'[m: [31m'2b171e93f07c4903bcad35bda10acf22__CoreOS-Alpha-695.0.0'[m [34m// untested[m
[36m}[m;

[36mvar[m conf = [36m{}[m;

[36mvar[m hosts = [36m{[m
  collection: [36m[][m,
  ssh_port_counter: 2200,
[36m}[m;

[36mvar[m task_queue = [36m[][m;

exports.run_task_queue = [36mfunction[m (dummy) [36m{[m
  [36mvar[m tasks = [36m{[m
    todo: task_queue,
    done: [36m[][m,
  [36m}[m;

  [36mvar[m pop_task = [36mfunction[m() [36m{[m
    console.log(clr.yellow([31m'azure_wrapper/task:'[m), clr.grey(inspect(tasks)));
    [36mvar[m ret = [36m{}[m;
    ret.current = tasks.todo.shift();
    ret.remaining = tasks.todo.length;
    [33mreturn[m ret;
  [36m}[m;[43;129H1,1[11CTop[1;1H[?12l[?25h[?25l[43;1H[K[43;1H/[?12l[?25hc[?25l[?12l[?25hl[?25l[?12l[?25ho[?25l[?12l[?25hu[?25l[?12l[?25hd[?25l[?12l[?25h\[?25l[?12l[?25hc[?25l[?12l[?25h[?25l[27m[m[H[2J[1;4H subj: [31m'/O=Weaveworks, Inc./L=London/C=GB/CN=weave.works'[m,
    keyout: util.join_output_file_path(prefix, [31m'ssh.key'[m),
    out: util.join_output_file_path(prefix, [31m'ssh.pem'[m),
  [36m}[m;
  openssl.exec([31m'req'[m, opts, [36mfunction[m (err, buffer) [36m{[m
    [33mif[m (err) console.log(clr.red(err));
    fs.chmod(opts.keyout, [31m'0600'[m, [36mfunction[m (err) [36m{[m[8;6H [33mif[m (err) console.log(clr.red(err));
    [36m}[m);
  [36m}[m);
  [33mreturn[m [36m{[m
    key: opts.keyout,
    pem: opts.out,
  [36m}
}

var[m create_ssh_conf = [36mfunction[m () [36m{[m
  [36mvar[m file_name = util.join_output_file_path(conf.name, [31m'ssh_conf'[m);
  [36mvar[m ssh_conf_head = [36m[[m
    [31m"Host *"[m,
    [31m"[m[35m\t[m[31mHostname "[m + conf.resources[36m[[m[31m'service'[m[36m][m + [31m".cloudapp.net"[m,
    [31m"[m[35m\t[m[31mUser core"[m,
    [31m"[m[35m\t[m[31mCompression yes"[m,
    [31m"[m[35m\t[m[31mLogLevel FATAL"[m,
    [31m"[m[35m\t[m[31mStrictHostKeyChecking no"[m,
    [31m"[m[35m\t[m[31mUserKnownHostsFile /dev/null"[m,
    [31m"[m[35m\t[m[31mIdentitiesOnly yes"[m,
    [31m"[m[35m\t[m[31mIdentityFile "[m + conf.resources[36m[[m[31m'ssh_key'[m[36m][[m[31m'key'[m[36m][m,
    [31m"[m[35m\n[m[31m"[m,
  [36m][m;

  fs.writeFileSync(file_name, ssh_conf_head.concat(_.map(hosts.collection, [36mfunction[m (host) [36m{[m
    [33mreturn[m _.template([31m"Host <%= name %>[m[35m\n\t[m[31mPort <%= port %>[m[35m\n[m[31m"[m)(host);
  [36m}[m)).join([35m'\n'[m));
  console.log(clr.yellow([31m'azure_wrapper/info:'[m), clr.green([31m'Saved SSH config, you can use it like so: `ssh -F '[m, file_name, [31m'<hostname>`'[m));
  console.log(clr.yellow([31m'azure_wrapper/info:'[m), clr.green([31m'The hosts in this deployment are:[m[35m\n[m[31m'[m), _.map(hosts.collection, [36mfunction[m (host) [36m{[m [33mreturr[37;1Hn[m host.name; [36m}[m));
[36m}[m;

[36mvar[m get_location = [36mfunction[m () [36m{[m
  [33mif[m (process.env[36m[[m[31m'AZ_AFFINITY'[m[36m][m) [36m{[m
    [33mreturn[m [31m'--affinity-group='[m + process.env[36m[[m[31m'AZ_AFFINITY'[m[36m][m;[43;129H124,51[8C44%[21;51H[?12l[?25h[?25l[43;129H[K[43;1H/[?12l[?25h[?25l/cloud\c[27m[m[H[2J[1;2H [36m][m);
[36m}[m

exports.queue_storage_if_needed = [36mfunction[m() [36m{[m
  [33mif[m (!process.env[36m[[m[31m'AZURE_STORAGE_ACCOUNT'[m[36m][m) [36m{[m
    conf.resources[36m[[m[31m'storage_account'[m[36m][m = util.rand_suffix;
    task_queue.push([36m[[m[8;6H [31m'storage'[m, [31m'account'[m, [31m'create'[m,[9;6H [31m'--type=LRS'[m,[10;6H get_location(),[11;6H conf.resources[36m[[m[31m'storage_account'[m[36m][m,
    [36m][m);
    process.env[36m[[m[31m'AZURE_STORAGE_ACCOUNT'[m[36m][m = conf.resources[36m[[m[31m'storage_account'[m[36m][m;
  [36m}[m [33melse[m [36m{[m
    [34m// Preserve it for resizing, so we don't create a new one by accedent,[m
    [34m// when the environment variable is unset[m
    conf.resources[36m[[m[31m'storage_account'[m[36m][m = process.env[36m[[m[31m'AZURE_STORAGE_ACCOUNT'[m[36m][m;
  [36m}
}[m;

exports.queue_machines = [36mfunction[m (name_prefix, coreos_update_channel, cloud_config_creator) [36m{[m
  [36mvar[m x = conf.nodes[36m[[mname_prefix[36m][m;
  [36mvar[m vm_create_base_args = [36m[[m
    [31m'vm'[m, [31m'create'[m,
    get_location(),
    get_vm_size(),
    [31m'--connect='[m + conf.resources[36m[[m[31m'service'[m[36m][m,
    [31m'--virtual-network-name='[m + conf.resources[36m[[m[31m'vnet'[m[36m][m,
    [31m'--no-ssh-password'[m,
    [31m'--ssh-cert='[m + conf.resources[36m[[m[31m'ssh_key'[m[36m][[m[31m'pem'[m[36m][m,
  [36m][m;

  [36mvar[m cloud_config = cloud_config_creator(x, conf);

  [36mvar[m next_host = [36mfunction[m (n) [36m{[m
    hosts.ssh_port_counter += 1;
    [36mvar[m host = [36m{[m name: util.hostname(n, name_prefix), port: hosts.ssh_port_counter [36m}[m;
    [33mif[m (cloud_config [33minstanceof[m [32mArray[m) [36m{[m[39;6H host.cloud_config_file = cloud_config[36m[[mn[36m][m;
    [36m}[m [33melse[m [36m{[m[41;6H host.cloud_config_file = cloud_config;
    [36m}[m[43;129H185,72[8C71%[21;72H[?12l[?25h[?25l[43;131H6,34[22;34H[?12l[?25h[?25l[23;29H[36m[46m[[31;3H][m[43;131H7,29[23;29H[?12l[?25h[?25l[36m[[31;3H][m[43;131H8,1[24;19H[?12l[?25h[?25l[43;131H9[25;19H[?12l[?25h[?25l[43;130H90,18[26;18H[?12l[?25h[?25l[43;131H1,45[27;45H[?12l[?25h[?25l[43;131H2,5[28;55H[?12l[?25h[?25l[43;129H[K[43;1H/[?12l[?25hs[?25l[?12l[?25he[?25l[?12l[?25hr[?25l[?12l[?25hv[?25l[?12l[?25hi[?25l[?12l[?25hc[?25l[?12l[?25he[?25l[?12l[?25h[?25l[27m[m[H[2J[1;2H [36m}[m;

  task_queue = task_queue.concat(_(x).times([36mfunction[m (n) [36m{[m
    [33mif[m (conf.resizing && n < conf.old_size) [36m{[m[5;6H [33mreturn[m [36m[][m;
    [36m}[m [33melse[m [36m{[m[7;6H [33mreturn[m vm_create_base_args.concat(next_host(n), [36m[[m[8;8H coreos_image_ids[36m[[mcoreos_update_channel[36m][m, [31m'core'[m,[9;6H [36m][m);
    [36m}[m
  [36m}[m));
[36m}[m;

exports.create_config = [36mfunction[m (name, nodes) [36m{[m
  conf = [36m{[m
    name: name,
    nodes: nodes,
    weave_salt: util.rand_string(),
    resources: [36m{[m[20;6H vnet: [36m[[mname, [31m'internal-vnet'[m, util.rand_suffix[36m][m.join([31m'-'[m),[21;6H service: [36m[[mname, util.rand_suffix[36m][m.join([31m'-'[m),[22;6H ssh_key: create_ssh_key(name),
    [36m}[m
  [36m}[m;

[36m}[m;

exports.destroy_cluster = [36mfunction[m (state_file) [36m{[m
  load_state(state_file);
  [33mif[m (conf.hosts === [33mundefined[m) [36m{[m
    console.log(clr.red([31m'azure_wrapper/fail: Nothing to delete.'[m));
    process.abort();
  [36m}[m

  conf.destroying = [31mtrue[m;
  task_queue = _.map(conf.hosts, [36mfunction[m (host) [36m{[m
    [33mreturn[m [36m[[m[31m'vm'[m, [31m'delete'[m, [31m'--quiet'[m, [31m'--blob-delete'[m, host.name[36m][m;
  [36m}[m);

  task_queue.push([36m[[m[31m'network'[m, [31m'vnet'[m, [31m'delete'[m, [31m'--quiet'[m, conf.resources[36m[[m[31m'vnet'[m[36m]][m);
  task_queue.push([36m[[m[31m'storage'[m, [31m'account'[m, [31m'delete'[m, [31m'--quiet'[m, conf.resources[36m[[m[31m'storage_account'[m[36m]][m);[43;129H233,7[9C92%[21;7H[?12l[?25h[?25l[43;129H[K[43;1H/[?12l[?25h[?25l/service[31msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;4H subj: [31m'/O=Weaveworks, Inc./L=London/C=GB/CN=weave.works'[m,
    keyout: util.join_output_file_path(prefix, [31m'ssh.key'[m),
    out: util.join_output_file_path(prefix, [31m'ssh.pem'[m),
  [36m}[m;
  openssl.exec([31m'req'[m, opts, [36mfunction[m (err, buffer) [36m{[m
    [33mif[m (err) console.log(clr.red(err));
    fs.chmod(opts.keyout, [31m'0600'[m, [36mfunction[m (err) [36m{[m[8;6H [33mif[m (err) console.log(clr.red(err));
    [36m}[m);
  [36m}[m);
  [33mreturn[m [36m{[m
    key: opts.keyout,
    pem: opts.out,
  [36m}
}

var[m create_ssh_conf = [36mfunction[m () [36m{[m
  [36mvar[m file_name = util.join_output_file_path(conf.name, [31m'ssh_conf'[m);
  [36mvar[m ssh_conf_head = [36m[[m
    [31m"Host *"[m,
    [31m"[m[35m\t[m[31mHostname "[m + conf.resources[36m[[m[31m'service'[m[36m][m + [31m".cloudapp.net"[m,
    [31m"[m[35m\t[m[31mUser core"[m,
    [31m"[m[35m\t[m[31mCompression yes"[m,
    [31m"[m[35m\t[m[31mLogLevel FATAL"[m,
    [31m"[m[35m\t[m[31mStrictHostKeyChecking no"[m,
    [31m"[m[35m\t[m[31mUserKnownHostsFile /dev/null"[m,
    [31m"[m[35m\t[m[31mIdentitiesOnly yes"[m,
    [31m"[m[35m\t[m[31mIdentityFile "[m + conf.resources[36m[[m[31m'ssh_key'[m[36m][[m[31m'key'[m[36m][m,
    [31m"[m[35m\n[m[31m"[m,
  [36m][m;

  fs.writeFileSync(file_name, ssh_conf_head.concat(_.map(hosts.collection, [36mfunction[m (host) [36m{[m
    [33mreturn[m _.template([31m"Host <%= name %>[m[35m\n\t[m[31mPort <%= port %>[m[35m\n[m[31m"[m)(host);
  [36m}[m)).join([35m'\n'[m));
  console.log(clr.yellow([31m'azure_wrapper/info:'[m), clr.green([31m'Saved SSH config, you can use it like so: `ssh -F '[m, file_name, [31m'<hostname>`'[m));
  console.log(clr.yellow([31m'azure_wrapper/info:'[m), clr.green([31m'The hosts in this deployment are:[m[35m\n[m[31m'[m), _.map(hosts.collection, [36mfunction[m (host) [36m{[m [33mreturr[37;1Hn[m host.name; [36m}[m));
[36m}[m;

[36mvar[m get_location = [36mfunction[m () [36m{[m
  [33mif[m (process.env[36m[[m[31m'AZ_AFFINITY'[m[36m][m) [36m{[m
    [33mreturn[m [31m'--affinity-group='[m + process.env[36m[[m[31m'AZ_AFFINITY'[m[36m][m;[43;129H124,37[8C44%[31msearch hit BOTTOM, continuing at TOP[m[43;129H[K[43;129H124,37[8C44%[21;37H[?12l[?25h[?25l[43;1H[K[43;1H/[?12l[?25h[?25l/service[27m[m[H[2J[1;4H task_queue.push([36m[[m[2;6H [31m'storage'[m, [31m'account'[m, [31m'create'[m,[3;6H [31m'--type=LRS'[m,[4;6H get_location(),[5;6H conf.resources[36m[[m[31m'storage_account'[m[36m][m,
    [36m][m);
    process.env[36m[[m[31m'AZURE_STORAGE_ACCOUNT'[m[36m][m = conf.resources[36m[[m[31m'storage_account'[m[36m][m;
  [36m}[m [33melse[m [36m{[m
    [34m// Preserve it for resizing, so we don't create a new one by accedent,[m
    [34m// when the environment variable is unset[m
    conf.resources[36m[[m[31m'storage_account'[m[36m][m = process.env[36m[[m[31m'AZURE_STORAGE_ACCOUNT'[m[36m][m;
  [36m}
}[m;

exports.queue_machines = [36mfunction[m (name_prefix, coreos_update_channel, cloud_config_creator) [36m{[m
  [36mvar[m x = conf.nodes[36m[[mname_prefix[36m][m;
  [36mvar[m vm_create_base_args = [36m[[m
    [31m'vm'[m, [31m'create'[m,
    get_location(),
    get_vm_size(),
    [31m'--connect='[m + conf.resources[36m[[m[31m'service'[m[36m][m,
    [31m'--virtual-network-name='[m + conf.resources[36m[[m[31m'vnet'[m[36m][m,
    [31m'--no-ssh-password'[m,
    [31m'--ssh-cert='[m + conf.resources[36m[[m[31m'ssh_key'[m[36m][[m[31m'pem'[m[36m][m,
  [36m][m;

  [36mvar[m cloud_config = cloud_config_creator(x, conf);

  [36mvar[m next_host = [36mfunction[m (n) [36m{[m
    hosts.ssh_port_counter += 1;
    [36mvar[m host = [36m{[m name: util.hostname(n, name_prefix), port: hosts.ssh_port_counter [36m}[m;
    [33mif[m (cloud_config [33minstanceof[m [32mArray[m) [36m{[m[33;6H host.cloud_config_file = cloud_config[36m[[mn[36m][m;
    [36m}[m [33melse[m [36m{[m[35;6H host.cloud_config_file = cloud_config;
    [36m}[m
    hosts.collection.push(host);
    [33mreturn[m _.map([36m[[m[39;8H [31m"--vm-name=<%= name %>"[m,[40;8H [31m"--ssh=<%= port %>"[m,[41;8H [31m"--custom-data=<%= cloud_config_file %>"[m,
    [36m][m, [36mfunction[m (arg) [36m{[m [33mreturn[m _.template(arg)(host); [36m}[m);[43;129H191,36[8C74%[21;36H[?12l[?25h[?25l[43;129H[K[43;1H/[?12l[?25h[?25l/service[1;42r[1;1H[21M[1;43r[22;2H [36m}[m;

  task_queue = task_queue.concat(_(x).times([36mfunction[m (n) [36m{[m
    [33mif[m (conf.resizing && n < conf.old_size) [36m{[m[26;6H [33mreturn[m [36m[][m;
    [36m}[m [33melse[m [36m{[m[28;6H [33mreturn[m vm_create_base_args.concat(next_host(n), [36m[[m[29;8H coreos_image_ids[36m[[mcoreos_update_channel[36m][m, [31m'core'[m,[30;6H [36m][m);
    [36m}[m
  [36m}[m));
[36m}[m;

exports.create_config = [36mfunction[m (name, nodes) [36m{[m
  conf = [36m{[m
    name: name,
    nodes: nodes,
    weave_salt: util.rand_string(),
    resources: [36m{[m[41;6H vnet: [36m[[mname, [31m'internal-vnet'[m, util.rand_suffix[36m][m.join([31m'-'[m),[42;6H service: [36m[[mname, util.rand_suffix[36m][m.join([31m'-'[m),[43;1H[K[43;129H233,7[9C83%[42;7H[?12l[?25h[?25l[43;129H[K[43;1H/[?12l[?25h[?25l/service[31msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;4H subj: [31m'/O=Weaveworks, Inc./L=London/C=GB/CN=weave.works'[m,
    keyout: util.join_output_file_path(prefix, [31m'ssh.key'[m),
    out: util.join_output_file_path(prefix, [31m'ssh.pem'[m),
  [36m}[m;
  openssl.exec([31m'req'[m, opts, [36mfunction[m (err, buffer) [36m{[m
    [33mif[m (err) console.log(clr.red(err));
    fs.chmod(opts.keyout, [31m'0600'[m, [36mfunction[m (err) [36m{[m[8;6H [33mif[m (err) console.log(clr.red(err));
    [36m}[m);
  [36m}[m);
  [33mreturn[m [36m{[m
    key: opts.keyout,
    pem: opts.out,
  [36m}
}

var[m create_ssh_conf = [36mfunction[m () [36m{[m
  [36mvar[m file_name = util.join_output_file_path(conf.name, [31m'ssh_conf'[m);
  [36mvar[m ssh_conf_head = [36m[[m
    [31m"Host *"[m,
    [31m"[m[35m\t[m[31mHostname "[m + conf.resources[36m[[m[31m'service'[m[36m][m + [31m".cloudapp.net"[m,
    [31m"[m[35m\t[m[31mUser core"[m,
    [31m"[m[35m\t[m[31mCompression yes"[m,
    [31m"[m[35m\t[m[31mLogLevel FATAL"[m,
    [31m"[m[35m\t[m[31mStrictHostKeyChecking no"[m,
    [31m"[m[35m\t[m[31mUserKnownHostsFile /dev/null"[m,
    [31m"[m[35m\t[m[31mIdentitiesOnly yes"[m,
    [31m"[m[35m\t[m[31mIdentityFile "[m + conf.resources[36m[[m[31m'ssh_key'[m[36m][[m[31m'key'[m[36m][m,
    [31m"[m[35m\n[m[31m"[m,
  [36m][m;

  fs.writeFileSync(file_name, ssh_conf_head.concat(_.map(hosts.collection, [36mfunction[m (host) [36m{[m
    [33mreturn[m _.template([31m"Host <%= name %>[m[35m\n\t[m[31mPort <%= port %>[m[35m\n[m[31m"[m)(host);
  [36m}[m)).join([35m'\n'[m));
  console.log(clr.yellow([31m'azure_wrapper/info:'[m), clr.green([31m'Saved SSH config, you can use it like so: `ssh -F '[m, file_name, [31m'<hostname>`'[m));
  console.log(clr.yellow([31m'azure_wrapper/info:'[m), clr.green([31m'The hosts in this deployment are:[m[35m\n[m[31m'[m), _.map(hosts.collection, [36mfunction[m (host) [36m{[m [33mreturr[37;1Hn[m host.name; [36m}[m));
[36m}[m;

[36mvar[m get_location = [36mfunction[m () [36m{[m
  [33mif[m (process.env[36m[[m[31m'AZ_AFFINITY'[m[36m][m) [36m{[m
    [33mreturn[m [31m'--affinity-group='[m + process.env[36m[[m[31m'AZ_AFFINITY'[m[36m][m;[43;129H124,37[8C44%[31msearch hit BOTTOM, continuing at TOP[m[43;129H[K[43;129H124,37[8C44%[21;37H[?12l[?25h[?25l[43;1H[K[43;1H?[?12l[?25h[?25l?service[31msearch hit TOP, continuing at BOTTOM[27m[m[H[2J[1;2H [36m}[m;

  task_queue = task_queue.concat(_(x).times([36mfunction[m (n) [36m{[m
    [33mif[m (conf.resizing && n < conf.old_size) [36m{[m[5;6H [33mreturn[m [36m[][m;
    [36m}[m [33melse[m [36m{[m[7;6H [33mreturn[m vm_create_base_args.concat(next_host(n), [36m[[m[8;8H coreos_image_ids[36m[[mcoreos_update_channel[36m][m, [31m'core'[m,[9;6H [36m][m);
    [36m}[m
  [36m}[m));
[36m}[m;

exports.create_config = [36mfunction[m (name, nodes) [36m{[m
  conf = [36m{[m
    name: name,
    nodes: nodes,
    weave_salt: util.rand_string(),
    resources: [36m{[m[20;6H vnet: [36m[[mname, [31m'internal-vnet'[m, util.rand_suffix[36m][m.join([31m'-'[m),[21;6H service: [36m[[mname, util.rand_suffix[36m][m.join([31m'-'[m),[22;6H ssh_key: create_ssh_key(name),
    [36m}[m
  [36m}[m;

[36m}[m;

exports.destroy_cluster = [36mfunction[m (state_file) [36m{[m
  load_state(state_file);
  [33mif[m (conf.hosts === [33mundefined[m) [36m{[m
    console.log(clr.red([31m'azure_wrapper/fail: Nothing to delete.'[m));
    process.abort();
  [36m}[m

  conf.destroying = [31mtrue[m;
  task_queue = _.map(conf.hosts, [36mfunction[m (host) [36m{[m
    [33mreturn[m [36m[[m[31m'vm'[m, [31m'delete'[m, [31m'--quiet'[m, [31m'--blob-delete'[m, host.name[36m][m;
  [36m}[m);

  task_queue.push([36m[[m[31m'network'[m, [31m'vnet'[m, [31m'delete'[m, [31m'--quiet'[m, conf.resources[36m[[m[31m'vnet'[m[36m]][m);
  task_queue.push([36m[[m[31m'storage'[m, [31m'account'[m, [31m'delete'[m, [31m'--quiet'[m, conf.resources[36m[[m[31m'storage_account'[m[36m]][m);[43;129H233,7[9C92%[31msearch hit TOP, continuing at BOTTOM[m[43;129H[K[43;129H233,7[9C92%[21;7H[?12l[?25h[?25l[43;1H[K[43;1H:[?12l[?25h0[?25l[?12l[?25h[?25l[27m[m[H[2J[1;1H[36mvar[m _ = require([31m'underscore'[m);

[36mvar[m fs = require([31m'fs'[m);
[36mvar[m cp = require([31m'child_process'[m);

[36mvar[m yaml = require([31m'js-yaml'[m);

[36mvar[m openssl = require([31m'openssl-wrapper'[m);

[36mvar[m clr = require([31m'colors'[m);
[36mvar[m inspect = require([31m'util'[m).inspect;

[36mvar[m util = require([31m'./util.js'[m);

[36mvar[m coreos_image_ids = [36m{[m
  [31m'stable'[m: [31m'2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0'[m,
  [31m'beta'[m: [31m'2b171e93f07c4903bcad35bda10acf22__CoreOS-Beta-681.0.0'[m, [34m// untested[m
  [31m'alpha'[m: [31m'2b171e93f07c4903bcad35bda10acf22__CoreOS-Alpha-695.0.0'[m [34m// untested[m
[36m}[m;

[36mvar[m conf = [36m{}[m;

[36mvar[m hosts = [36m{[m
  collection: [36m[][m,
  ssh_port_counter: 2200,
[36m}[m;

[36mvar[m task_queue = [36m[][m;

exports.run_task_queue = [36mfunction[m (dummy) [36m{[m
  [36mvar[m tasks = [36m{[m
    todo: task_queue,
    done: [36m[][m,
  [36m}[m;

  [36mvar[m pop_task = [36mfunction[m() [36m{[m
    console.log(clr.yellow([31m'azure_wrapper/task:'[m), clr.grey(inspect(tasks)));
    [36mvar[m ret = [36m{}[m;
    ret.current = tasks.todo.shift();
    ret.remaining = tasks.todo.length;
    [33mreturn[m ret;
  [36m}[m;[43;129H1,1[11CTop[1;1H[?12l[?25h[?25l[43;129H2,0-1[2;1H[?12l[?25h[?25l[43;129H3,1  [3;1H[?12l[?25h[?25l[43;129H4[4;1H[?12l[?25h[?25l[43;129H5,0-1[5;1H[?12l[?25h[?25l[43;129H6,1  [6;1H[?12l[?25h[?25l[43;129H7,0-1[7;1H[?12l[?25h[?25l[43;129H8,1  [8;1H[?12l[?25h[?25l[43;129H9,0-1[9;1H[?12l[?25h[?25l[43;129H10,1 [10;1H[?12l[?25h[?25l[43;130H1[11;1H[?12l[?25h[?25l[43;130H2,0-1[12;1H[?12l[?25h[?25l[43;130H3,1  [13;1H[?12l[?25h[?25l[43;130H4,0-1[14;1H[?12l[?25h[?25l[43;130H5,1  [15;1H[?12l[?25h[?25l[43;130H6[16;1H[?12l[?25h[?25l[43;130H7[17;1H[?12l[?25h[?25l[43;130H8[18;1H[?12l[?25h[?25l[15;24H[36m[46m{[19;1H}[m[43;130H9[19;1H[?12l[?25h[?25l[15;24H[36m{[19;1H}[m[43;129H20,0-1[20;1H[?12l[?25h[?25l[43;130H1,1  [21;1H[?12l[?25h[?25l[43;130H2,0-1[22;1H[?12l[?25h[?25l[43;130H3,1  [23;1H[?12l[?25h[?25l[43;130H4[24;1H[?12l[?25h[?25l[43;130H5[25;1H[?12l[?25h[?25l[23;13H[36m[46m{


}[m[43;130H6[26;1H[?12l[?25h[?25l[23;13H[36m{


}[m[43;130H7,0-1[27;1H[?12l[?25h[?25l[43;130H8,1  [28;1H[?12l[?25h[?25l[43;130H9,0-1[29;1H[?12l[?25h[?25l[43;129H30,1  [30;1H[?12l[?25h[?25l[43;130H1[31;1H[?12l[?25h[?25l[43;130H2[32;1H[?12l[?25h[?25l[43;130H3[33;1H[?12l[?25h[?25l[43;130H4[34;1H[?12l[?25h[?25l[43;130H5,0-1[35;1H[?12l[?25h[?25l[43;130H6,1  [36;1H[?12l[?25h[?25l[43;130H7[37;1H[?12l[?25h[?25l[43;130H8[38;1H[?12l[?25h[?25l[43;130H9[39;1H[?12l[?25h[?25l[43;129H40[40;1H[?12l[?25h[?25l[43;130H1[41;1H[?12l[?25h[?25l[43;130H2[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[43;129H[K[43;129H43,0-1[9C0%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;2H ([36mfunction[m iter (task) [36m{[m[43;129H[K[43;129H44,1[11C0%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;4H [33mif[m (task.current === [33mundefined[m) [36m{[m[43;129H[K[43;129H45,1[11C1%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;6H [33mif[m (conf.destroying === [33mundefined[m) [36m{[m[43;129H[K[43;129H46,1[11C1%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H create_ssh_conf();[43;129H[K[43;129H47,1[11C2%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H save_state();[43;129H[K[43;129H48,1[11C2%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;6H [36m}[m[43;129H[K[43;129H49,1[11C3%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;6H [33mreturn[m;[43;129H[K[43;129H50,1[11C3%[42;1H[?12l[?25h[?25l[43;129H[K[43;1H:[?12l[?25hq[?25l[?12l[?25h![?25l[?12l[?25h[?25l[43;1H[K[43;1H[?1l>[?12l[?25h[?1049l]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azure/libroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure/lib# ls l-a
ls: cannot access l-a: No such file or directory
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azure/libroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure/lib#  vi cloud_config.js 
[?1049h[?1h=[1;43r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[43;1H"cloud_config.js" 43L, 1153C[>c[1;1H[36mvar[m _ = require([31m'underscore'[m);
[36mvar[m fs = require([31m'fs'[m);
[36mvar[m yaml = require([31m'js-yaml'[m);
[36mvar[m colors = require([31m'colors/safe'[m);


[36mvar[m write_cloud_config_from_object = [36mfunction[m (data, output_file) [36m{[m
  [33mtry[m [36m{[m
    fs.writeFileSync(output_file, [36m[[m[10;6H [31m'#cloud-config'[m,[11;6H yaml.safeDump(data),
    [36m][m.join([31m"[m[35m\n[m[31m"[m));
    [33mreturn[m output_file;
  [36m}[m [33mcatch[m (e) [36m{[m
    console.log(colors.red(e));
  [36m}
}[m;

exports.generate_environment_file_entry_from_object = [36mfunction[m (hostname, environ) [36m{[m
  [36mvar[m data = [36m{[m
    hostname: hostname,
    environ_array: _.map(environ, [36mfunction[m (value, key) [36m{[m[23;6H [33mreturn[m [36m[[mkey.toUpperCase(), JSON.stringify(value.toString())[36m][m.join([31m'='[m);
    [36m}[m),
  [36m}[m;

  [33mreturn[m [36m{[m
    permissions: [31m'0600'[m,
    owner: [31m'root'[m,
    content: _.template([31m"<%= environ_array.join('[m[35m\\[m[31mn') %>[m[35m\n[m[31m"[m)(data),
    path: _.template([31m"/etc/weave.<%= hostname %>.env"[m)(data),
  [36m}[m;
[36m}[m;

exports.process_template = [36mfunction[m (input_file, output_file, processor) [36m{[m
  [36mvar[m data = [36m{}[m;
  [33mtry[m [36m{[m
    data = yaml.safeLoad(fs.readFileSync(input_file, [31m'utf8'[m));
  [36m}[m [33mcatch[m (e) [36m{[m
    console.log(colors.red(e));
  [36m}[m
  [33mreturn[m write_cloud_config_from_object(processor(_.clone(data)), output_file);[43;129H1,1[11CTop[1;1H[?12l[?25h[?25l[43;1H[K[43;1H/[?12l[?25hk[?25l[?12l[?25hu[?25l[?12l[?25hb[?25l[?12l[?25he[?25l[?12l[?25h-[?25l[?12l[?25h[?25l[31msearch hit BOTTOM, continuing at TOP[m[1m[37m[41mE486: Pattern not found: kube-[m[43;31H[K[43;129H1,1[11CTop[1;1H[?12l[?25h[?25l[43;1H[K[43;1H/[?12l[?25hc[?25l[?12l[?25hl[?25l[?12l[?25ho[?25l[?12l[?25hu[?25l[?12l[?25hd[?25l[?12l[?25h[?25l[128C7,11[10CTop[7;11H[?12l[?25h[?25l[43;1H[K[43;1H/[?12l[?25h[?25l/cloud[128C10,9[10CTop[10;9H[?12l[?25h[?25l[43;1H[K[43;1H/[?12l[?25h[?25l/cloud[128C42,16[9CTop[42;16H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;1H[36m}[m;[43;1H[K[43;129H43,2[10CBot[42;2H[?12l[?25h[?25l[43;130H2,16[41;16H[?12l[?25h[?25l[38;15H[36m[46m{

[m  [36m[46m}[m[43;130H1,3 [40;3H[?12l[?25h[?25l[38;15H[36m{[m[39;16H[46m([13C)[m
  [36m}[m[43;130H0,16[39;16H[?12l[?25h[?25l[38;15H[36m[46m{[m[39;16H([13C)
  [36m[46m}[m[43;129H39,15[38;15H[?12l[?25h[?25l[36m{

[m  [36m}[m[43;130H8,16[37;16H[?12l[?25h[?25l[36;7H[36m[46m{

[m  [36m[46m}[m[43;130H7,7 [36;7H[?12l[?25h[?25l[36m{

[m  [36m}[m[43;130H6,16[35;16H[?12l[?25h[?25l[43;130H5[34;16H[?12l[?25h[?25l[43;130H4,0-1[33;1H[?12l[?25h[?25l[43;130H3,2  [32;2H[?12l[?25h[?25l[43;130H2,4[31;4H[?12l[?25h[?25l[43;130H1,16[30;16H[?12l[?25h[?25l[43;130H0[29;16H[?12l[?25h[?25l[43;129H29[28;16H[?12l[?25h[?25l[43;130H8[27;16H[?12l[?25h[?25l[26;10H[36m[46m{[31;3H}[m[43;130H7,10[26;10H[?12l[?25h[?25l[36m{[31;3H}[m[43;130H6,0-1[25;1H[?12l[?25h[?25l[43;130H5,4  [24;4H[?12l[?25h[?25l[43;130H4,7[23;7H[?12l[?25h[?25l[43;130H3,16[22;16H[?12l[?25h[?25l[43;130H2[21;16H[?12l[?25h[?25l[43;130H1[20;16H[?12l[?25h[?25l[19;14H[36m[46m{[24;3H}[m[43;130H0,14[19;14H[?12l[?25h[?25l[36m{[24;3H}[m[43;129H19,16[18;16H[?12l[?25h[?25l[43;130H8,0-1[17;1H[?12l[?25h[?25l[43;130H7,2  [16;2H[?12l[?25h[?25l[13;15H[36m[46m{

[m  [36m[46m}[m[43;130H6,3[15;3H[?12l[?25h[?25l[13;15H[36m{[m[14;16H[46m([13C)[m
  [36m}[m[43;130H5,16[14;16H[?12l[?25h[?25l[13;15H[36m[46m{[m[14;16H([13C)
  [36m[46m}[m[43;130H4,15[13;15H[?12l[?25h[?25l[36m{

[m  [36m}[m[43;130H3,16[12;16H[?12l[?25h[?25l[11;11H[46m([4C)[m[43;130H2[11;16H[?12l[?25h[?25l([4C)[43;130H1[10;16H[?12l[?25h[?25l[43;130H0[9;16H[?12l[?25h[?25l[43;129H9,16 [8;16H[?12l[?25h[?25l[7;7H[36m[46m{[13;3H}[m[43;129H8,7 [7;7H[?12l[?25h[?25l[36m{[13;3H}[m[43;129H7,16[6;16H[?12l[?25h[?25l[43;129H6,0-1[5;1H[?12l[?25h[?25l[43;129H5[4;1H[?12l[?25h[?25l[43;129H4,16 [3;16H[?12l[?25h[?25l[43;129H3[2;16H[?12l[?25h[?25l[43;129H2[1;16H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[1;1H[36mvar[m _ = require[46m([m[31m'underscore'[m[46m)[m;[43;129H[K[43;129H1,16[10CTop[1;16H[?12l[?25h[?25l([12C)[43;129H2[2;16H[?12l[?25h[?25l[43;129H[K[43;1H:[?12l[?25hq[?25l[?12l[?25h![?25l[?12l[?25h[?25l[43;1H[K[43;1H[?1l>[?12l[?25h[?1049l]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azure/libroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure/lib# ls l-avi azure_wrapper.js ^C
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azure/libroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure/lib# ls -la
total 28
drwxrwxr-x 3 root root 4096 Jul  3 14:26 [0m[01;34m.[0m
drwxrwxr-x 7 root root 4096 Jul  3 14:24 [01;34m..[0m
-rw-rw-r-- 1 root root 8068 Jul  3 14:08 azure_wrapper.js
-rw-rw-r-- 1 root root 1153 Jul  3 14:08 cloud_config.js
drwxrwxr-x 2 root root 4096 Jul  3 14:24 [01;34mdeployment_logic[0m
-rw-rw-r-- 1 root root  812 Jul  3 14:08 util.js
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azure/libroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure/lib#  vi util.js 
[?1049h[?1h=[1;43r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[43;1H"util.js" 33L, 812C[>c[1;1H[36mvar[m _ = require([31m'underscore'[m);
_.mixin(require([31m'underscore.string'[m).exports());

exports.ipv4 = [36mfunction[m (ocets, prefix) [36m{[m
  [33mreturn[m [36m{[m
    ocets: ocets,
    prefix: prefix,
    toString: [36mfunction[m () [36m{[m[9;6H [33mreturn[m [36m[[mocets.join([31m'.'[m), prefix[36m][m.join([31m'/'[m);
    [36m}[m
  [36m}
}[m;

exports.hostname = [36mfunction[m hostname (n, prefix) [36m{[m
  [33mreturn[m _.template([31m"<%= pre %>-<%= seq %>"[m)([36m{[m
    pre: prefix || [31m'core'[m,
    seq: _.pad(n, 2, [31m'0'[m),
  [36m}[m);
[36m}[m;

exports.rand_string = [36mfunction[m () [36m{[m
  [36mvar[m crypto = require([31m'crypto'[m);
  [36mvar[m shasum = crypto.createHash([31m'sha256'[m);
  shasum.update(crypto.randomBytes(256));
  [33mreturn[m shasum.digest([31m'hex'[m);
[36m}[m;


exports.rand_suffix = exports.rand_string().substring(50);

exports.join_output_file_path = [36mfunction[m(prefix, suffix) [36m{[m
  [33mreturn[m [31m'./output/'[m + [36m[[mprefix, exports.rand_suffix, suffix[36m][m.join([31m'_'[m);
[36m}[m;
[1m[34m~                                                                                                                                                 [35;1H~                                                                                                                                                 [36;1H~                                                                                                                                                 [37;1H~                                                                                                                                                 [38;1H~                                                                                                                                                 [39;1H~                                                                                                                                                 [40;1H~                                                                                                                                                 [41;1H~                                                                                                                                                 [42;1H~                                                                                                                                                 [m[43;129H1,1[11CAll[1;1H[?12l[?25h[?25l[43;1H[K[43;1H:[?12l[?25hq[?25l[?12l[?25h![?25l[?12l[?25h[?25l[43;1H[K[43;1H[?1l>[?12l[?25h[?1049l]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azure/libroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure/lib# lks [K[K[K[Kls -la
total 28
drwxrwxr-x 3 root root 4096 Jul  3 14:26 [0m[01;34m.[0m
drwxrwxr-x 7 root root 4096 Jul  3 14:24 [01;34m..[0m
-rw-rw-r-- 1 root root 8068 Jul  3 14:08 azure_wrapper.js
-rw-rw-r-- 1 root root 1153 Jul  3 14:08 cloud_config.js
drwxrwxr-x 2 root root 4096 Jul  3 14:24 [01;34mdeployment_logic[0m
-rw-rw-r-- 1 root root  812 Jul  3 14:08 util.js
 ]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azure/libroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure/lib#  vi a[Kcloud_config.js 
[?1049h[?1h=[1;43r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[43;1H"cloud_config.js" 43L, 1153C[>c[1;1H[36mvar[m _ = require([31m'underscore'[m);
[36mvar[m fs = require([31m'fs'[m);
[36mvar[m yaml = require([31m'js-yaml'[m);
[36mvar[m colors = require([31m'colors/safe'[m);


[36mvar[m write_cloud_config_from_object = [36mfunction[m (data, output_file) [36m{[m
  [33mtry[m [36m{[m
    fs.writeFileSync(output_file, [36m[[m[10;6H [31m'#cloud-config'[m,[11;6H yaml.safeDump(data),
    [36m][m.join([31m"[m[35m\n[m[31m"[m));
    [33mreturn[m output_file;
  [36m}[m [33mcatch[m (e) [36m{[m
    console.log(colors.red(e));
  [36m}
}[m;

exports.generate_environment_file_entry_from_object = [36mfunction[m (hostname, environ) [36m{[m
  [36mvar[m data = [36m{[m
    hostname: hostname,
    environ_array: _.map(environ, [36mfunction[m (value, key) [36m{[m[23;6H [33mreturn[m [36m[[mkey.toUpperCase(), JSON.stringify(value.toString())[36m][m.join([31m'='[m);
    [36m}[m),
  [36m}[m;

  [33mreturn[m [36m{[m
    permissions: [31m'0600'[m,
    owner: [31m'root'[m,
    content: _.template([31m"<%= environ_array.join('[m[35m\\[m[31mn') %>[m[35m\n[m[31m"[m)(data),
    path: _.template([31m"/etc/weave.<%= hostname %>.env"[m)(data),
  [36m}[m;
[36m}[m;

exports.process_template = [36mfunction[m (input_file, output_file, processor) [36m{[m
  [36mvar[m data = [36m{}[m;
  [33mtry[m [36m{[m
    data = yaml.safeLoad(fs.readFileSync(input_file, [31m'utf8'[m));
  [36m}[m [33mcatch[m (e) [36m{[m
    console.log(colors.red(e));
  [36m}[m
  [33mreturn[m write_cloud_config_from_object(processor(_.clone(data)), output_file);[43;129H1,1[11CTop[1;1H[?12l[?25h[?25l[43;1H[K[43;1H/[?12l[?25hs[?25l[?12l[?25he[?25l[?12l[?25hr[?25l[?12l[?25hv[?25l[?12l[?25hi[?25l[?12l[?25hc[?25l[?12l[?25he[?25l[?12l[?25h[?25l[31msearch hit BOTTOM, continuing at TOP[m[1m[37m[41mE486: Pattern not found: service[m[43;33H[K[43;129H1,1[11CTop[1;1H[?12l[?25h[?25l[43;129H2[2;1H[?12l[?25h[?25l[43;129H3[3;1H[?12l[?25h[?25l[43;129H4[4;1H[?12l[?25h[?25l[43;129H5,0-1[5;1H[?12l[?25h[?25l[43;129H6[6;1H[?12l[?25h[?25l[43;129H7,1  [7;1H[?12l[?25h[?25l[43;129H8[8;1H[?12l[?25h[?25l[43;129H9[9;1H[?12l[?25h[?25l[43;129H10,1[10;1H[?12l[?25h[?25l[43;130H1[11;1H[?12l[?25h[?25l[43;1H[K[43;1H:[?12l[?25hq[?25l[?12l[?25h![?25l[?12l[?25h[?25l[43;1H[K[43;1H[?1l>[?12l[?25h[?1049l]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azure/libroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure/lib# ls -la^C
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azure/libroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure/lib# vi azure_wrapper.js 
[?1049h[?1h=[1;43r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[43;1H"azure_wrapper.js" 271L, 8068C[>c[1;1H[36mvar[m _ = require([31m'underscore'[m);

[36mvar[m fs = require([31m'fs'[m);
[36mvar[m cp = require([31m'child_process'[m);

[36mvar[m yaml = require([31m'js-yaml'[m);

[36mvar[m openssl = require([31m'openssl-wrapper'[m);

[36mvar[m clr = require([31m'colors'[m);
[36mvar[m inspect = require([31m'util'[m).inspect;

[36mvar[m util = require([31m'./util.js'[m);

[36mvar[m coreos_image_ids = [36m{[m
  [31m'stable'[m: [31m'2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0'[m,
  [31m'beta'[m: [31m'2b171e93f07c4903bcad35bda10acf22__CoreOS-Beta-681.0.0'[m, [34m// untested[m
  [31m'alpha'[m: [31m'2b171e93f07c4903bcad35bda10acf22__CoreOS-Alpha-695.0.0'[m [34m// untested[m
[36m}[m;

[36mvar[m conf = [36m{}[m;

[36mvar[m hosts = [36m{[m
  collection: [36m[][m,
  ssh_port_counter: 2200,
[36m}[m;

[36mvar[m task_queue = [36m[][m;

exports.run_task_queue = [36mfunction[m (dummy) [36m{[m
  [36mvar[m tasks = [36m{[m
    todo: task_queue,
    done: [36m[][m,
  [36m}[m;

  [36mvar[m pop_task = [36mfunction[m() [36m{[m
    console.log(clr.yellow([31m'azure_wrapper/task:'[m), clr.grey(inspect(tasks)));
    [36mvar[m ret = [36m{}[m;
    ret.current = tasks.todo.shift();
    ret.remaining = tasks.todo.length;
    [33mreturn[m ret;
  [36m}[m;[43;129H1,1[11CTop[1;1H[?12l[?25h[?25l[43;129H2,0-1[2;1H[?12l[?25h[?25l[43;129H3,1  [3;1H[?12l[?25h[?25l[43;129H4[4;1H[?12l[?25h[?25l[43;1H[K[43;1H/[?12l[?25hk[?25l[?12l[?25hu[?25l[?12l[?25hb[?25l[?12l[?25he[?25l[?12l[?25h[?25l[31msearch hit BOTTOM, continuing at TOP[m[1m[37m[41mE486: Pattern not found: kube[m[43;30H[K[43;129H4,1[11CTop[4;1H[?12l[?25h[?25l[43;129H5,0-1[5;1H[?12l[?25h[?25l[43;129H6,1  [6;1H[?12l[?25h[?25l[43;129H7,0-1[7;1H[?12l[?25h[?25l[43;129H8,1  [8;1H[?12l[?25h[?25l[43;129H9,0-1[9;1H[?12l[?25h[?25l[43;129H10,1 [10;1H[?12l[?25h[?25l[43;130H1[11;1H[?12l[?25h[?25l[43;130H2,0-1[12;1H[?12l[?25h[?25l[43;130H3,1  [13;1H[?12l[?25h[?25l[43;130H4,0-1[14;1H[?12l[?25h[?25l[43;130H5,1  [15;1H[?12l[?25h[?25l[43;130H6[16;1H[?12l[?25h[?25l[43;130H7[17;1H[?12l[?25h[?25l[43;130H8[18;1H[?12l[?25h[?25l[15;24H[36m[46m{[19;1H}[m[43;130H9[19;1H[?12l[?25h[?25l[15;24H[36m{[19;1H}[m[43;129H20,0-1[20;1H[?12l[?25h[?25l[43;130H1,1  [21;1H[?12l[?25h[?25l[43;130H2,0-1[22;1H[?12l[?25h[?25l[43;130H3,1  [23;1H[?12l[?25h[?25l[43;130H4[24;1H[?12l[?25h[?25l[43;130H5[25;1H[?12l[?25h[?25l[23;13H[36m[46m{


}[m[43;130H6[26;1H[?12l[?25h[?25l[23;13H[36m{


}[m[43;130H7,0-1[27;1H[?12l[?25h[?25l[43;130H8,1  [28;1H[?12l[?25h[?25l[43;130H9,0-1[29;1H[?12l[?25h[?25l[43;129H30,1  [30;1H[?12l[?25h[?25l[43;130H1[31;1H[?12l[?25h[?25l[43;130H2[32;1H[?12l[?25h[?25l[43;130H3[33;1H[?12l[?25h[?25l[43;130H4[34;1H[?12l[?25h[?25l[43;130H5,0-1[35;1H[?12l[?25h[?25l[43;130H6,1  [36;1H[?12l[?25h[?25l[43;130H7[37;1H[?12l[?25h[?25l[43;130H8[38;1H[?12l[?25h[?25l[43;130H9[39;1H[?12l[?25h[?25l[43;1H[K[43;1H/[?12l[?25hc[?25l[?12l[?25hl[?25l[?12l[?25ho[?25l[?12l[?25hu[?25l[?12l[?25hd[?25l[?12l[?25h[?25l[27m[m[H[2J[1;4H subj: [31m'/O=Weaveworks, Inc./L=London/C=GB/CN=weave.works'[m,
    keyout: util.join_output_file_path(prefix, [31m'ssh.key'[m),
    out: util.join_output_file_path(prefix, [31m'ssh.pem'[m),
  [36m}[m;
  openssl.exec([31m'req'[m, opts, [36mfunction[m (err, buffer) [36m{[m
    [33mif[m (err) console.log(clr.red(err));
    fs.chmod(opts.keyout, [31m'0600'[m, [36mfunction[m (err) [36m{[m[8;6H [33mif[m (err) console.log(clr.red(err));
    [36m}[m);
  [36m}[m);
  [33mreturn[m [36m{[m
    key: opts.keyout,
    pem: opts.out,
  [36m}
}

var[m create_ssh_conf = [36mfunction[m () [36m{[m
  [36mvar[m file_name = util.join_output_file_path(conf.name, [31m'ssh_conf'[m);
  [36mvar[m ssh_conf_head = [36m[[m
    [31m"Host *"[m,
    [31m"[m[35m\t[m[31mHostname "[m + conf.resources[36m[[m[31m'service'[m[36m][m + [31m".cloudapp.net"[m,
    [31m"[m[35m\t[m[31mUser core"[m,
    [31m"[m[35m\t[m[31mCompression yes"[m,
    [31m"[m[35m\t[m[31mLogLevel FATAL"[m,
    [31m"[m[35m\t[m[31mStrictHostKeyChecking no"[m,
    [31m"[m[35m\t[m[31mUserKnownHostsFile /dev/null"[m,
    [31m"[m[35m\t[m[31mIdentitiesOnly yes"[m,
    [31m"[m[35m\t[m[31mIdentityFile "[m + conf.resources[36m[[m[31m'ssh_key'[m[36m][[m[31m'key'[m[36m][m,
    [31m"[m[35m\n[m[31m"[m,
  [36m][m;

  fs.writeFileSync(file_name, ssh_conf_head.concat(_.map(hosts.collection, [36mfunction[m (host) [36m{[m
    [33mreturn[m _.template([31m"Host <%= name %>[m[35m\n\t[m[31mPort <%= port %>[m[35m\n[m[31m"[m)(host);
  [36m}[m)).join([35m'\n'[m));
  console.log(clr.yellow([31m'azure_wrapper/info:'[m), clr.green([31m'Saved SSH config, you can use it like so: `ssh -F '[m, file_name, [31m'<hostname>`'[m));
  console.log(clr.yellow([31m'azure_wrapper/info:'[m), clr.green([31m'The hosts in this deployment are:[m[35m\n[m[31m'[m), _.map(hosts.collection, [36mfunction[m (host) [36m{[m [33mreturr[37;1Hn[m host.name; [36m}[m));
[36m}[m;

[36mvar[m get_location = [36mfunction[m () [36m{[m
  [33mif[m (process.env[36m[[m[31m'AZ_AFFINITY'[m[36m][m) [36m{[m
    [33mreturn[m [31m'--affinity-group='[m + process.env[36m[[m[31m'AZ_AFFINITY'[m[36m][m;[43;129H124,51[8C44%[21;51H[?12l[?25h[?25l[43;129H[K[43;1H/[?12l[?25h[?25l/cloud[27m[m[H[2J[1;2H [36m][m);
[36m}[m

exports.queue_storage_if_needed = [36mfunction[m() [36m{[m
  [33mif[m (!process.env[36m[[m[31m'AZURE_STORAGE_ACCOUNT'[m[36m][m) [36m{[m
    conf.resources[36m[[m[31m'storage_account'[m[36m][m = util.rand_suffix;
    task_queue.push([36m[[m[8;6H [31m'storage'[m, [31m'account'[m, [31m'create'[m,[9;6H [31m'--type=LRS'[m,[10;6H get_location(),[11;6H conf.resources[36m[[m[31m'storage_account'[m[36m][m,
    [36m][m);
    process.env[36m[[m[31m'AZURE_STORAGE_ACCOUNT'[m[36m][m = conf.resources[36m[[m[31m'storage_account'[m[36m][m;
  [36m}[m [33melse[m [36m{[m
    [34m// Preserve it for resizing, so we don't create a new one by accedent,[m
    [34m// when the environment variable is unset[m
    conf.resources[36m[[m[31m'storage_account'[m[36m][m = process.env[36m[[m[31m'AZURE_STORAGE_ACCOUNT'[m[36m][m;
  [36m}
}[m;

exports.queue_machines = [36mfunction[m (name_prefix, coreos_update_channel, cloud_config_creator) [36m{[m
  [36mvar[m x = conf.nodes[36m[[mname_prefix[36m][m;
  [36mvar[m vm_create_base_args = [36m[[m
    [31m'vm'[m, [31m'create'[m,
    get_location(),
    get_vm_size(),
    [31m'--connect='[m + conf.resources[36m[[m[31m'service'[m[36m][m,
    [31m'--virtual-network-name='[m + conf.resources[36m[[m[31m'vnet'[m[36m][m,
    [31m'--no-ssh-password'[m,
    [31m'--ssh-cert='[m + conf.resources[36m[[m[31m'ssh_key'[m[36m][[m[31m'pem'[m[36m][m,
  [36m][m;

  [36mvar[m cloud_config = cloud_config_creator(x, conf);

  [36mvar[m next_host = [36mfunction[m (n) [36m{[m
    hosts.ssh_port_counter += 1;
    [36mvar[m host = [36m{[m name: util.hostname(n, name_prefix), port: hosts.ssh_port_counter [36m}[m;
    [33mif[m (cloud_config [33minstanceof[m [32mArray[m) [36m{[m[39;6H host.cloud_config_file = cloud_config[36m[[mn[36m][m;
    [36m}[m [33melse[m [36m{[m[41;6H host.cloud_config_file = cloud_config;
    [36m}[m[43;129H185,72[8C71%[21;72H[?12l[?25h[?25l[43;131H6,34[22;34H[?12l[?25h[?25l[23;29H[36m[46m[[31;3H][m[43;131H7,29[23;29H[?12l[?25h[?25l[36m[[31;3H][m[43;131H8,1[24;19H[?12l[?25h[?25l[43;131H9[25;19H[?12l[?25h[?25l[43;130H90,18[26;18H[?12l[?25h[?25l[43;131H1,45[27;45H[?12l[?25h[?25l[43;129H[K[43;1H:[?12l[?25hq[?25l[?12l[?25h![?25l[?12l[?25h[?25l[43;1H[K[43;1H[?1l>[?12l[?25h[?1049l]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azure/libroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure/lib# vi azure_wrapper.js [1P[1P[1@c[1@p[C[1@ [C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cazure_wrapper.js.bak
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azure/libroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure/lib# vi azure_wrapper.js
[?1049h[?1h=[1;43r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[43;1H"azure_wrapper.js" 271L, 8068C[>c[1;1H[36mvar[m _ = require([31m'underscore'[m);

[36mvar[m fs = require([31m'fs'[m);
[36mvar[m cp = require([31m'child_process'[m);

[36mvar[m yaml = require([31m'js-yaml'[m);

[36mvar[m openssl = require([31m'openssl-wrapper'[m);

[36mvar[m clr = require([31m'colors'[m);
[36mvar[m inspect = require([31m'util'[m).inspect;

[36mvar[m util = require([31m'./util.js'[m);

[36mvar[m coreos_image_ids = [36m{[m
  [31m'stable'[m: [31m'2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0'[m,
  [31m'beta'[m: [31m'2b171e93f07c4903bcad35bda10acf22__CoreOS-Beta-681.0.0'[m, [34m// untested[m
  [31m'alpha'[m: [31m'2b171e93f07c4903bcad35bda10acf22__CoreOS-Alpha-695.0.0'[m [34m// untested[m
[36m}[m;

[36mvar[m conf = [36m{}[m;

[36mvar[m hosts = [36m{[m
  collection: [36m[][m,
  ssh_port_counter: 2200,
[36m}[m;

[36mvar[m task_queue = [36m[][m;

exports.run_task_queue = [36mfunction[m (dummy) [36m{[m
  [36mvar[m tasks = [36m{[m
    todo: task_queue,
    done: [36m[][m,
  [36m}[m;

  [36mvar[m pop_task = [36mfunction[m() [36m{[m
    console.log(clr.yellow([31m'azure_wrapper/task:'[m), clr.grey(inspect(tasks)));
    [36mvar[m ret = [36m{}[m;
    ret.current = tasks.todo.shift();
    ret.remaining = tasks.todo.length;
    [33mreturn[m ret;
  [36m}[m;[43;129H1,1[11CTop[1;1H[?12l[?25h[?25l[43;129H2,0-1[2;1H[?12l[?25h[?25l[43;129H3,1  [3;1H[?12l[?25h[?25l[43;129H4[4;1H[?12l[?25h[?25l[43;129H5,0-1[5;1H[?12l[?25h[?25l[43;129H6,1  [6;1H[?12l[?25h[?25l[43;129H7,0-1[7;1H[?12l[?25h[?25l[43;129H8,1  [8;1H[?12l[?25h[?25l[43;129H9,0-1[9;1H[?12l[?25h[?25l[43;129H10,1 [10;1H[?12l[?25h[?25l[43;130H1[11;1H[?12l[?25h[?25l[43;130H2,0-1[12;1H[?12l[?25h[?25l[43;130H3,1  [13;1H[?12l[?25h[?25l[43;130H4,0-1[14;1H[?12l[?25h[?25l[43;130H5,1  [15;1H[?12l[?25h[?25l[43;130H6[16;1H[?12l[?25h[?25l[43;130H7[17;1H[?12l[?25h[?25l[43;130H8[18;1H[?12l[?25h[?25l[15;24H[36m[46m{[19;1H}[m[43;130H9[19;1H[?12l[?25h[?25l[15;24H[36m{[19;1H}[m[43;129H20,0-1[20;1H[?12l[?25h[?25l[43;130H1,1  [21;1H[?12l[?25h[?25l[43;130H2,0-1[22;1H[?12l[?25h[?25l[43;130H3,1  [23;1H[?12l[?25h[?25l[43;130H4[24;1H[?12l[?25h[?25l[43;130H5[25;1H[?12l[?25h[?25l[23;13H[36m[46m{


}[m[43;130H6[26;1H[?12l[?25h[?25l[23;13H[36m{


}[m[43;130H7,0-1[27;1H[?12l[?25h[?25l[43;130H8,1  [28;1H[?12l[?25h[?25l[43;130H9,0-1[29;1H[?12l[?25h[?25l[43;129H30,1  [30;1H[?12l[?25h[?25l[43;130H1[31;1H[?12l[?25h[?25l[43;130H2[32;1H[?12l[?25h[?25l[43;130H3[33;1H[?12l[?25h[?25l[43;130H4[34;1H[?12l[?25h[?25l[43;130H5,0-1[35;1H[?12l[?25h[?25l[43;130H6,1  [36;1H[?12l[?25h[?25l[43;130H7[37;1H[?12l[?25h[?25l[43;130H8[38;1H[?12l[?25h[?25l[43;130H9[39;1H[?12l[?25h[?25l[43;129H40[40;1H[?12l[?25h[?25l[43;129H39[39;1H[?12l[?25h[?25l[43;130H8[38;1H[?12l[?25h[?25l[43;130H7[37;1H[?12l[?25h[?25l[43;130H8[38;1H[?12l[?25h[?25l[43;130H9[39;1H[?12l[?25h[?25l[43;129H40[40;1H[?12l[?25h[?25l[43;130H1[41;1H[?12l[?25h[?25l[43;130H2[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[43;1H[K[43;129H43,0-1[9C0%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;2H ([36mfunction[m iter (task) [36m{[m[43;129H[K[43;129H44,1[11C0%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;4H [33mif[m (task.current === [33mundefined[m) [36m{[m[43;129H[K[43;129H45,1[11C1%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;6H [33mif[m (conf.destroying === [33mundefined[m) [36m{[m[43;129H[K[43;129H46,1[11C1%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H create_ssh_conf();[43;129H[K[43;129H47,1[11C2%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H save_state();[43;129H[K[43;129H48,1[11C2%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;6H [36m}[m[43;129H[K[43;129H49,1[11C3%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;6H [33mreturn[m;[43;129H[K[43;129H50,1[11C3%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;4H [36m}[m [33melse[m [36m{[m[43;129H[K[43;129H51,1[11C3%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;6H [33mif[m (task.current.length !== 0) [36m{[m[43;129H[K[43;129H52,1[11C4%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H console.log(clr.yellow([31m'azure_wrapper/exec:'[m), clr.blue(inspect(task.current)));[43;129H[K[43;129H53,1[11C4%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H cp.fork([31m'node_modules/azure-cli/bin/azure'[m, task.current)[43;129H[K[43;129H54,1[11C5%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;10H .on([31m'exit'[m, [36mfunction[m (code, signal) [36m{[m[43;129H[K[43;129H55,1[11C5%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;12H tasks.done.push([36m{[m[43;129H[K[43;129H56,1[11C6%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;14H code: code,[43;129H[K[43;129H57,1[11C6%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;14H signal: signal,[43;129H[K[43;129H58,1[11C6%[42;1H[?12l[?25h[?25l[43;130H7[41;1H[?12l[?25h[?25l[43;130H6[40;1H[?12l[?25h[?25l[43;130H5[39;1H[?12l[?25h[?25l[43;130H4[38;1H[?12l[?25h[?25l[43;130H3[37;1H[?12l[?25h[?25l[43;130H2[36;1H[?12l[?25h[?25l[43;130H1[35;1H[?12l[?25h[?25l[43;130H0[34;1H[?12l[?25h[?25l[43;129H49[33;1H[?12l[?25h[?25l[43;130H8[32;1H[?12l[?25h[?25l[43;130H7[31;1H[?12l[?25h[?25l[43;130H6[30;1H[?12l[?25h[?25l[43;130H5[29;1H[?12l[?25h[?25l[43;130H4[28;1H[?12l[?25h[?25l[43;130H3,0-1[27;1H[?12l[?25h[?25l[43;130H2,1  [26;1H[?12l[?25h[?25l[43;130H1[25;1H[?12l[?25h[?25l[43;130H0[24;1H[?12l[?25h[?25l[43;129H39[23;1H[?12l[?25h[?25l[43;130H8[22;1H[?12l[?25h[?25l[43;130H7[21;1H[?12l[?25h[?25l[43;130H6[20;1H[?12l[?25h[?25l[43;130H5,0-1[19;1H[?12l[?25h[?25l[43;130H4,1  [18;1H[?12l[?25h[?25l[43;130H3[17;1H[?12l[?25h[?25l[43;130H2[16;1H[?12l[?25h[?25l[43;130H1[15;1H[?12l[?25h[?25l[43;130H0[14;1H[?12l[?25h[?25l[43;129H29,0-1[13;1H[?12l[?25h[?25l[43;129H30,1  [14;1H[?12l[?25h[?25l[43;130H1[15;1H[?12l[?25h[?25l[43;130H2[16;1H[?12l[?25h[?25l[43;130H3[17;1H[?12l[?25h[?25l[43;130H4[18;1H[?12l[?25h[?25l[43;130H5,0-1[19;1H[?12l[?25h[?25l[43;130H6,1  [20;1H[?12l[?25h[?25l[43;130H7[21;1H[?12l[?25h[?25l[43;130H8[22;1H[?12l[?25h[?25l[43;130H9[23;1H[?12l[?25h[?25l[43;129H40[24;1H[?12l[?25h[?25l[43;130H1[25;1H[?12l[?25h[?25l[43;130H2[26;1H[?12l[?25h[?25l[43;130H3,0-1[27;1H[?12l[?25h[?25l[43;130H4,1  [28;1H[?12l[?25h[?25l[43;130H5[29;1H[?12l[?25h[?25l[43;130H6[30;1H[?12l[?25h[?25l[43;130H7[31;1H[?12l[?25h[?25l[43;130H8[32;1H[?12l[?25h[?25l[43;130H9[33;1H[?12l[?25h[?25l[43;129H50[34;1H[?12l[?25h[?25l[43;130H1[35;1H[?12l[?25h[?25l[43;130H2[36;1H[?12l[?25h[?25l[43;130H3[37;1H[?12l[?25h[?25l[43;130H4[38;1H[?12l[?25h[?25l[43;130H5[39;1H[?12l[?25h[?25l[43;130H6[40;1H[?12l[?25h[?25l[43;130H7[41;1H[?12l[?25h[?25l[43;130H8[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;14H what: task.current.join([31m' '[m),[43;129H[K[43;129H59,1[11C7%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;14H remaining: task.remaining,[43;129H[K[43;129H60,1[11C7%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;12H [36m}[m);[43;129H[K[43;129H61,1[11C8%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;12H [33mif[m (code !== 0 && conf.destroying === [33mundefined[m) [36m{[m[43;129H[K[43;129H62,1[11C8%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;14H console.log(clr.red([31m'azure_wrapper/fail: Exiting due to an error.'[m));[43;129H[K[43;129H63,1[11C9%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;14H save_state();[43;129H[K[43;129H64,1[11C9%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;14H console.log(clr.cyan([31m'azure_wrapper/info: You probably want to destroy and re-run.'[m));[43;129H[K[43;129H65,1[10C10%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;14H process.abort();[43;129H[K[43;129H66,1[10C10%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;12H [36m}[m [33melse[m [36m{[m[43;129H[K[43;129H67,1[10C10%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;14H iter(pop_task());[43;129H[K[43;129H68,1[10C11%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;12H [36m}[m[43;129H[K[43;129H69,1[10C11%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H [36m}[m);[43;129H[K[43;129H70,1[10C12%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;6H [36m}[m [33melse[m [36m{[m[43;129H[K[43;129H71,1[10C12%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H iter(pop_task());[43;129H[K[43;129H72,1[10C13%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;6H [36m}[m[43;129H[K[43;129H73,1[10C13%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;4H [36m}[m[43;129H[K[43;129H74,1[10C13%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;2H [36m}[m)(pop_task());[43;129H[K[43;129H75,1[10C14%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;1H[36m}[m;[43;129H[K[43;129H76,1[10C14%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[43;129H[K[43;129H77,0-1[8C15%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;1H[36mvar[m save_state = [36mfunction[m () [36m{[m[43;129H[K[43;129H78,1[10C15%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;2H [36mvar[m file_name = util.join_output_file_path(conf.name, [31m'deployment.yml'[m);[43;129H[K[43;129H79,1[10C16%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;2H [33mtry[m [36m{[m[43;129H[K[43;129H80,1[10C16%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;4H conf.hosts = hosts.collection;[43;129H[K[43;129H81,1[10C17%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;4H fs.writeFileSync(file_name, yaml.safeDump(conf));[43;129H[K[43;129H82,1[10C17%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;4H console.log(clr.yellow([31m'azure_wrapper/info: Saved state into `%s`'[m), file_name);[43;129H[K[43;129H83,1[10C17%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;2H [36m}[m [33mcatch[m (e) [36m{[m[43;129H[K[43;129H84,1[10C18%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;4H console.log(clr.red(e));[43;129H[K[43;129H85,1[10C18%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;2H [36m}[m[43;129H[K[43;129H86,1[10C19%[42;1H[?12l[?25h[?25l[43;130H5[41;1H[?12l[?25h[?25l[43;130H4[40;1H[?12l[?25h[?25l[43;130H3[39;1H[?12l[?25h[?25l[43;130H2[38;1H[?12l[?25h[?25l[43;130H1[37;1H[?12l[?25h[?25l[43;130H0[36;1H[?12l[?25h[?25l[43;129H79[35;1H[?12l[?25h[?25l[43;130H8[34;1H[?12l[?25h[?25l[43;130H7,0-1[33;1H[?12l[?25h[?25l[43;130H6,1  [32;1H[?12l[?25h[?25l[43;130H5[31;1H[?12l[?25h[?25l[43;130H4[30;1H[?12l[?25h[?25l[43;130H3[29;1H[?12l[?25h[?25l[43;130H2[28;1H[?12l[?25h[?25l[43;130H1[27;1H[?12l[?25h[?25l[43;129H[K[43;1H:[?12l[?25h0[?25l[?12l[?25h[?25l[27m[m[H[2J[1;1H[36mvar[m _ = require([31m'underscore'[m);

[36mvar[m fs = require([31m'fs'[m);
[36mvar[m cp = require([31m'child_process'[m);

[36mvar[m yaml = require([31m'js-yaml'[m);

[36mvar[m openssl = require([31m'openssl-wrapper'[m);

[36mvar[m clr = require([31m'colors'[m);
[36mvar[m inspect = require([31m'util'[m).inspect;

[36mvar[m util = require([31m'./util.js'[m);

[36mvar[m coreos_image_ids = [36m{[m
  [31m'stable'[m: [31m'2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0'[m,
  [31m'beta'[m: [31m'2b171e93f07c4903bcad35bda10acf22__CoreOS-Beta-681.0.0'[m, [34m// untested[m
  [31m'alpha'[m: [31m'2b171e93f07c4903bcad35bda10acf22__CoreOS-Alpha-695.0.0'[m [34m// untested[m
[36m}[m;

[36mvar[m conf = [36m{}[m;

[36mvar[m hosts = [36m{[m
  collection: [36m[][m,
  ssh_port_counter: 2200,
[36m}[m;

[36mvar[m task_queue = [36m[][m;

exports.run_task_queue = [36mfunction[m (dummy) [36m{[m
  [36mvar[m tasks = [36m{[m
    todo: task_queue,
    done: [36m[][m,
  [36m}[m;

  [36mvar[m pop_task = [36mfunction[m() [36m{[m
    console.log(clr.yellow([31m'azure_wrapper/task:'[m), clr.grey(inspect(tasks)));
    [36mvar[m ret = [36m{}[m;
    ret.current = tasks.todo.shift();
    ret.remaining = tasks.todo.length;
    [33mreturn[m ret;
  [36m}[m;[43;129H1,1[11CTop[1;1H[?12l[?25h[?25l[43;129H[K[43;1H/[?12l[?25hc[?25l[?12l[?25ho[?25l[?12l[?25hn[?25l[?12l[?25hn[?25l[?12l[?25he[?25l[?12l[?25hc[?25l[?12l[?25ht[?25l[?12l[?25h[?25l[27m[m[H[2J[1;4H task_queue.push([36m[[m[2;6H [31m'storage'[m, [31m'account'[m, [31m'create'[m,[3;6H [31m'--type=LRS'[m,[4;6H get_location(),[5;6H conf.resources[36m[[m[31m'storage_account'[m[36m][m,
    [36m][m);
    process.env[36m[[m[31m'AZURE_STORAGE_ACCOUNT'[m[36m][m = conf.resources[36m[[m[31m'storage_account'[m[36m][m;
  [36m}[m [33melse[m [36m{[m
    [34m// Preserve it for resizing, so we don't create a new one by accedent,[m
    [34m// when the environment variable is unset[m
    conf.resources[36m[[m[31m'storage_account'[m[36m][m = process.env[36m[[m[31m'AZURE_STORAGE_ACCOUNT'[m[36m][m;
  [36m}
}[m;

exports.queue_machines = [36mfunction[m (name_prefix, coreos_update_channel, cloud_config_creator) [36m{[m
  [36mvar[m x = conf.nodes[36m[[mname_prefix[36m][m;
  [36mvar[m vm_create_base_args = [36m[[m
    [31m'vm'[m, [31m'create'[m,
    get_location(),
    get_vm_size(),
    [31m'--connect='[m + conf.resources[36m[[m[31m'service'[m[36m][m,
    [31m'--virtual-network-name='[m + conf.resources[36m[[m[31m'vnet'[m[36m][m,
    [31m'--no-ssh-password'[m,
    [31m'--ssh-cert='[m + conf.resources[36m[[m[31m'ssh_key'[m[36m][[m[31m'pem'[m[36m][m,
  [36m][m;

  [36mvar[m cloud_config = cloud_config_creator(x, conf);

  [36mvar[m next_host = [36mfunction[m (n) [36m{[m
    hosts.ssh_port_counter += 1;
    [36mvar[m host = [36m{[m name: util.hostname(n, name_prefix), port: hosts.ssh_port_counter [36m}[m;
    [33mif[m (cloud_config [33minstanceof[m [32mArray[m) [36m{[m[33;6H host.cloud_config_file = cloud_config[36m[[mn[36m][m;
    [36m}[m [33melse[m [36m{[m[35;6H host.cloud_config_file = cloud_config;
    [36m}[m
    hosts.collection.push(host);
    [33mreturn[m _.map([36m[[m[39;8H [31m"--vm-name=<%= name %>"[m,[40;8H [31m"--ssh=<%= port %>"[m,[41;8H [31m"--custom-data=<%= cloud_config_file %>"[m,
    [36m][m, [36mfunction[m (arg) [36m{[m [33mreturn[m _.template(arg)(host); [36m}[m);[43;129H191,8[9C74%[21;8H[?12l[?25h[?25l[43;133H9[21;9H[?12l[?25h[?25l[43;133H10[21;10H[?12l[?25h[?25l[43;134H1[21;11H[?12l[?25h[?25l[43;134H2[21;12H[?12l[?25h[?25l[43;134H3[21;13H[?12l[?25h[?25l[43;134H4[21;14H[?12l[?25h[?25l[43;134H5[21;15H[?12l[?25h[?25l[43;134H6[21;16H[?12l[?25h[?25l[43;134H7[21;17H[?12l[?25h[?25l[43;134H8[21;18H[?12l[?25h[?25l[43;1H[1m-- INSERT --[m[43;129H[K[43;129H191,18[8C74%[21;18H[K[21;18H[?12l[?25h[?25l cosneumgmtcs01[43;133H32[21;32H[?12l[?25h[?25l[43;134H1[21;31H[?12l[?25h[?25l[43;134H0[21;30H[?12l[?25h[?25l[43;133H29[21;29H[?12l[?25h[?25l[43;134H8[21;28H[?12l[?25h[?25l[43;134H7[21;27H[?12l[?25h[?25l[43;134H6[21;26H[?12l[?25h[?25l[43;134H5[21;25H[?12l[?25h[?25l[43;134H4[21;24H[?12l[?25h[?25l[43;134H3[21;23H[?12l[?25h[?25l[43;134H2[21;22H[?12l[?25h[?25l[43;134H1[21;21H[?12l[?25h[?25l[43;134H0[21;20H[?12l[?25h[?25l[43;133H19[21;19H[?12l[?25h[?25l[43;134H8[21;18H[?12l[?25h[?25l[43;134H7[21;17H[?12l[?25h[?25l[43;134H6[21;16H[?12l[?25h[?25l[31m=cosneumgmtcs01'[m cosneumgmtcs01[43;133H30[21;30H[?12l[?25h[?25l[43;134H1[21;31H[?12l[?25h[?25l[43;134H2[21;32H[?12l[?25h[?25l[43;134H3[21;33H[?12l[?25h[?25l[43;134H2[21;32H[?12l[?25h[?25l osneumgmtcs01[21;45H[K[21;32H[?12l[?25h[?25l sneumgmtcs01[21;44H[K[21;32H[?12l[?25h[?25l neumgmtcs01[21;43H[K[21;32H[?12l[?25h[?25l eumgmtcs01[21;42H[K[21;32H[?12l[?25h[?25l umgmtcs01[21;41H[K[21;32H[?12l[?25h[?25l mgmtcs01[21;40H[K[21;32H[?12l[?25h[?25l gmtcs01[21;39H[K[21;32H[?12l[?25h[?25l mtcs01[21;38H[K[21;32H[?12l[?25h[?25l tcs01[21;37H[K[21;32H[?12l[?25h[?25l cs01[21;36H[K[21;32H[?12l[?25h[?25l s01[21;35H[K[21;32H[?12l[?25h[?25l 01[21;34H[K[21;32H[?12l[?25h[?25l 1[21;33H[K[21;32H[?12l[?25h[?25l[21;32H[K[21;32H[?12l[?25h[?25l[21;42r[42;1H
[1;43r[21;7H[31m-connect=cosneumgmtcs01'[m     [31m'--virtual-network-name='[m + conf.resources[36m[[m[31m'vnet'[m[36m][m,[42;2H [36m}[m;[43;129H[K[43;129H191,32[8C74%[21;32H[?12l[?25h[?25l   [31m'--virtual-network-name='[m + conf.resources[36m[[m[31m'vnet'[m[36m][m,[21;86H[K[43;134H1[21;31H[?12l[?25h[?25l[31m'[m,    [31m'--virtual-network-name='[m + conf.resources[36m[[m[31m'vnet'[m[36m][m,[43;134H2[21;32H[?12l[?25h[?25l[22;42r[22;1H[L[1;43r[21;36H[K[22;4H [31m'--virtual-network-name='[m + conf.resources[36m[[m[31m'vnet'[m[36m][m,[43;129H[K[43;129H192,1[9C74%[22;1H[?12l[?25h[43;1H[K[22;1H[?25l[43;129H192,1[9C74%[22;1H[?12l[?25h[?25l[43;129H[K[43;1H:[?12l[?25hw[?25l[?12l[?25hq[?25l[?12l[?25h[?25l"azure_wrapper.js" 271L, 8054C written
[?1l>[?12l[?25h[?1049l]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azure/libroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure/lib# cd ..
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# (reverse-i-search)`': [Kk': cp  azure_wrapper.js azure_wrapper.js.bak[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1Pu': vi ./lib/deployment_logic/kubernetes.js[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1@b[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1@e[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1@r[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# vi ./lib/deployment_logic/kubernetes.js[1P^C
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# (reverse-i-search)`': [K.': cd ../': vi ./lib/deployment_logic/kubernetes.js[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C^C
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# ./create-kubernetes-cluster.js
[33mazure_wrapper/task:[39m [90m{ todo: 
   [ [ 'network',
       'vnet',
       'create',
       '--location=West Europe',
       '--address-space=172.16.0.0',
       'kube-internal-vnet-37633ecc96145a' ],
     [ 'storage',
       'account',
       'create',
       '--type=LRS',
       '--location=West Europe',
       '37633ecc96145a' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=cosneumgmtcs01',
       '--virtual-network-name=kube-internal-vnet-37633ecc96145a',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_37633ecc96145a_ssh.pem',
       '--vm-name=etcd-00',
       '--ssh=2201',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_37633ecc96145a_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=cosneumgmtcs01',
       '--virtual-network-name=kube-internal-vnet-37633ecc96145a',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_37633ecc96145a_ssh.pem',
       '--vm-name=etcd-01',
       '--ssh=2202',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_37633ecc96145a_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=cosneumgmtcs01',
       '--virtual-network-name=kube-internal-vnet-37633ecc96145a',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_37633ecc96145a_ssh.pem',
       '--vm-name=etcd-02',
       '--ssh=2203',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_37633ecc96145a_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=cosneumgmtcs01',
       '--virtual-network-name=kube-internal-vnet-37633ecc96145a',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_37633ecc96145a_ssh.pem',
       '--vm-name=kube-00',
       '--ssh=2204',
       '--custom-data=./output/kubernetes-cluster-main-nodes_37633ecc96145a_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=cosneumgmtcs01',
       '--virtual-network-name=kube-internal-vnet-37633ecc96145a',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_37633ecc96145a_ssh.pem',
       '--vm-name=kube-01',
       '--ssh=2205',
       '--custom-data=./output/kubernetes-cluster-main-nodes_37633ecc96145a_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=cosneumgmtcs01',
       '--virtual-network-name=kube-internal-vnet-37633ecc96145a',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_37633ecc96145a_ssh.pem',
       '--vm-name=kube-02',
       '--ssh=2206',
       '--custom-data=./output/kubernetes-cluster-main-nodes_37633ecc96145a_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ] ],
  done: [] }[39m
[33mazure_wrapper/exec:[39m [34m[ 'network',
  'vnet',
  'create',
  '--location=West Europe',
  '--address-space=172.16.0.0',
  'kube-internal-vnet-37633ecc96145a' ][39m
[31mGenerating a 2048 bit RSA private key
......................................................................................................................................................................................................+++
...............................+++
writing new private key to './output/kube_37633ecc96145a_ssh.key'
-----
[39m
[32minfo[39m:    Executing command [1mnetwork vnet create[22m
[32minfo[39m:    Using default address space cidr: 12
[32minfo[39m:    Using default subnet start IP: 172.16.0.0
[32minfo[39m:    Using default subnet cidr: 15
                                                                               [36m-[39m Getting network configuration[36m\[39m+
                                                                               [36m|[39m Getting or creating affinity group+
                                                                               [36m/[39m Getting locations[36m-[39m[36m\[39m+
                                                                               [36m|[39m Updating Network Configuration[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m+
[32minfo[39m:    [1mnetwork vnet create[22m command [1m[32mOK[39m[22m
[33mazure_wrapper/task:[39m [90m{ todo: 
   [ [ 'storage',
       'account',
       'create',
       '--type=LRS',
       '--location=West Europe',
       '37633ecc96145a' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=cosneumgmtcs01',
       '--virtual-network-name=kube-internal-vnet-37633ecc96145a',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_37633ecc96145a_ssh.pem',
       '--vm-name=etcd-00',
       '--ssh=2201',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_37633ecc96145a_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=cosneumgmtcs01',
       '--virtual-network-name=kube-internal-vnet-37633ecc96145a',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_37633ecc96145a_ssh.pem',
       '--vm-name=etcd-01',
       '--ssh=2202',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_37633ecc96145a_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=cosneumgmtcs01',
       '--virtual-network-name=kube-internal-vnet-37633ecc96145a',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_37633ecc96145a_ssh.pem',
       '--vm-name=etcd-02',
       '--ssh=2203',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_37633ecc96145a_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=cosneumgmtcs01',
       '--virtual-network-name=kube-internal-vnet-37633ecc96145a',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_37633ecc96145a_ssh.pem',
       '--vm-name=kube-00',
       '--ssh=2204',
       '--custom-data=./output/kubernetes-cluster-main-nodes_37633ecc96145a_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=cosneumgmtcs01',
       '--virtual-network-name=kube-internal-vnet-37633ecc96145a',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_37633ecc96145a_ssh.pem',
       '--vm-name=kube-01',
       '--ssh=2205',
       '--custom-data=./output/kubernetes-cluster-main-nodes_37633ecc96145a_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=cosneumgmtcs01',
       '--virtual-network-name=kube-internal-vnet-37633ecc96145a',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_37633ecc96145a_ssh.pem',
       '--vm-name=kube-02',
       '--ssh=2206',
       '--custom-data=./output/kubernetes-cluster-main-nodes_37633ecc96145a_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ] ],
  done: 
   [ { code: 0,
       signal: null,
       what: 'network vnet create --location=West Europe --address-space=172.16.0.0 kube-internal-vnet-37633ecc96145a',
       remaining: 7 } ] }[39m
[33mazure_wrapper/exec:[39m [34m[ 'storage',
  'account',
  'create',
  '--type=LRS',
  '--location=West Europe',
  '37633ecc96145a' ][39m
[32minfo[39m:    Executing command [1mstorage account create[22m
                                                                               [36m-[39m Creating storage account[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m+
[32minfo[39m:    [1mstorage account create[22m command [1m[32mOK[39m[22m
[33mazure_wrapper/task:[39m [90m{ todo: 
   [ [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=cosneumgmtcs01',
       '--virtual-network-name=kube-internal-vnet-37633ecc96145a',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_37633ecc96145a_ssh.pem',
       '--vm-name=etcd-00',
       '--ssh=2201',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_37633ecc96145a_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=cosneumgmtcs01',
       '--virtual-network-name=kube-internal-vnet-37633ecc96145a',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_37633ecc96145a_ssh.pem',
       '--vm-name=etcd-01',
       '--ssh=2202',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_37633ecc96145a_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=cosneumgmtcs01',
       '--virtual-network-name=kube-internal-vnet-37633ecc96145a',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_37633ecc96145a_ssh.pem',
       '--vm-name=etcd-02',
       '--ssh=2203',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_37633ecc96145a_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=cosneumgmtcs01',
       '--virtual-network-name=kube-internal-vnet-37633ecc96145a',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_37633ecc96145a_ssh.pem',
       '--vm-name=kube-00',
       '--ssh=2204',
       '--custom-data=./output/kubernetes-cluster-main-nodes_37633ecc96145a_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=cosneumgmtcs01',
       '--virtual-network-name=kube-internal-vnet-37633ecc96145a',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_37633ecc96145a_ssh.pem',
       '--vm-name=kube-01',
       '--ssh=2205',
       '--custom-data=./output/kubernetes-cluster-main-nodes_37633ecc96145a_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=cosneumgmtcs01',
       '--virtual-network-name=kube-internal-vnet-37633ecc96145a',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_37633ecc96145a_ssh.pem',
       '--vm-name=kube-02',
       '--ssh=2206',
       '--custom-data=./output/kubernetes-cluster-main-nodes_37633ecc96145a_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ] ],
  done: 
   [ { code: 0,
       signal: null,
       what: 'network vnet create --location=West Europe --address-space=172.16.0.0 kube-internal-vnet-37633ecc96145a',
       remaining: 7 },
     { code: 0,
       signal: null,
       what: 'storage account create --type=LRS --location=West Europe 37633ecc96145a',
       remaining: 6 } ] }[39m
[33mazure_wrapper/exec:[39m [34m[ 'vm',
  'create',
  '--location=West Europe',
  '--vm-size=Small',
  '--connect=cosneumgmtcs01',
  '--virtual-network-name=kube-internal-vnet-37633ecc96145a',
  '--no-ssh-password',
  '--ssh-cert=./output/kube_37633ecc96145a_ssh.pem',
  '--vm-name=etcd-00',
  '--ssh=2201',
  '--custom-data=./output/kubernetes-cluster-etcd-nodes_37633ecc96145a_generated.yml',
  '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
  'core' ][39m
[32minfo[39m:    Executing command [1mvm create[22m
                                                                               [36m-[39m Looking up image 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m+
                                                                               [36m|[39m Looking up virtual network[36m/[39m[36m-[39m[36m\[39m[36m|[39m+
                                                                               [36m/[39m Looking up cloud service[36m-[39m[36m\[39m[36m|[39m+
[33mwarn[39m:    --location option will be ignored
                                                                               [36m/[39m Getting cloud service properties+
                                                                               [36m-[39m Looking up deployment[36m\[39m+
[31merror[39m:   The existing deployment does not belong to virtual network kube-internal-vnet-37633ecc96145a
[32minfo[39m:    Error information has been recorded to /root/.azure/azure.err
[31merror[39m:   [1mvm create[22m command [1m[31mfailed
[39m[22m
[31mazure_wrapper/fail: Exiting due to an error.[39m
[33mazure_wrapper/info: Saved state into `./output/kube_37633ecc96145a_deployment.yml`[39m
[36mazure_wrapper/info: You probably want to destroy and re-run.[39m
Aborted (core dumped)
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# ./create-kubernetes-cluster.jscd ..[Kvi azure_wrapper.js
[?1049h[?1h=[1;43r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[43;1H"azure_wrapper.js" [New File][>c[2;1H[1m[34m~                                                                                                                                                 [3;1H~                                                                                                                                                 [4;1H~                                                                                                                                                 [5;1H~                                                                                                                                                 [6;1H~                                                                                                                                                 [7;1H~                                                                                                                                                 [8;1H~                                                                                                                                                 [9;1H~                                                                                                                                                 [10;1H~                                                                                                                                                 [11;1H~                                                                                                                                                 [12;1H~                                                                                                                                                 [13;1H~                                                                                                                                                 [14;1H~                                                                                                                                                 [15;1H~                                                                                                                                                 [16;1H~                                                                                                                                                 [17;1H~                                                                                                                                                 [18;1H~                                                                                                                                                 [19;1H~                                                                                                                                                 [20;1H~                                                                                                                                                 [21;1H~                                                                                                                                                 [22;1H~                                                                                                                                                 [23;1H~                                                                                                                                                 [24;1H~                                                                                                                                                 [25;1H~                                                                                                                                                 [26;1H~                                                                                                                                                 [27;1H~                                                                                                                                                 [28;1H~                                                                                                                                                 [29;1H~                                                                                                                                                 [30;1H~                                                                                                                                                 [31;1H~                                                                                                                                                 [32;1H~                                                                                                                                                 [33;1H~                                                                                                                                                 [34;1H~                                                                                                                                                 [35;1H~                                                                                                                                                 [36;1H~                                                                                                                                                 [37;1H~                                                                                                                                                 [38;1H~                                                                                                                                                 [39;1H~                                                                                                                                                 [40;1H~                                                                                                                                                 [41;1H~                                                                                                                                                 [42;1H~                                                                                                                                                 [m[43;129H0,0-1[9CAll[1;1H[?12l[?25h[?25l[43;1H[K[43;1H:[?12l[?25hq[?25l[?12l[?25h![?25l[?12l[?25h[?25l[43;1H[K[43;1H[?1l>[?12l[?25h[?1049l]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# cd lib/
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azure/libroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure/lib# ls -la
total 36
drwxrwxr-x 3 root root 4096 Jul  3 14:29 [0m[01;34m.[0m
drwxrwxr-x 7 root root 4096 Jul  3 14:32 [01;34m..[0m
-rw-rw-r-- 1 root root 8054 Jul  3 14:29 azure_wrapper.js
-rw-rw-r-- 1 root root 8068 Jul  3 14:28 azure_wrapper.js.bak
-rw-rw-r-- 1 root root 1153 Jul  3 14:08 cloud_config.js
drwxrwxr-x 2 root root 4096 Jul  3 14:24 [01;34mdeployment_logic[0m
-rw-rw-r-- 1 root root  812 Jul  3 14:08 util.js
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azure/libroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure/lib#  vi azure_wrapper.js
[?1049h[?1h=[1;43r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[43;1H"azure_wrapper.js" 271L, 8054C[>c[1;1H[36mvar[m _ = require([31m'underscore'[m);

[36mvar[m fs = require([31m'fs'[m);
[36mvar[m cp = require([31m'child_process'[m);

[36mvar[m yaml = require([31m'js-yaml'[m);

[36mvar[m openssl = require([31m'openssl-wrapper'[m);

[36mvar[m clr = require([31m'colors'[m);
[36mvar[m inspect = require([31m'util'[m).inspect;

[36mvar[m util = require([31m'./util.js'[m);

[36mvar[m coreos_image_ids = [36m{[m
  [31m'stable'[m: [31m'2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0'[m,
  [31m'beta'[m: [31m'2b171e93f07c4903bcad35bda10acf22__CoreOS-Beta-681.0.0'[m, [34m// untested[m
  [31m'alpha'[m: [31m'2b171e93f07c4903bcad35bda10acf22__CoreOS-Alpha-695.0.0'[m [34m// untested[m
[36m}[m;

[36mvar[m conf = [36m{}[m;

[36mvar[m hosts = [36m{[m
  collection: [36m[][m,
  ssh_port_counter: 2200,
[36m}[m;

[36mvar[m task_queue = [36m[][m;

exports.run_task_queue = [36mfunction[m (dummy) [36m{[m
  [36mvar[m tasks = [36m{[m
    todo: task_queue,
    done: [36m[][m,
  [36m}[m;

  [36mvar[m pop_task = [36mfunction[m() [36m{[m
    console.log(clr.yellow([31m'azure_wrapper/task:'[m), clr.grey(inspect(tasks)));
    [36mvar[m ret = [36m{}[m;
    ret.current = tasks.todo.shift();
    ret.remaining = tasks.todo.length;
    [33mreturn[m ret;
  [36m}[m;[43;129H1,1[11CTop[1;1H[?12l[?25h[?25l[43;1H[K[43;1H/[?12l[?25hc[?25l[?12l[?25ho[?25l[?12l[?25hn[?25l[?12l[?25hn[?25l[?12l[?25he[?25l[?12l[?25hc[?25l[?12l[?25ht[?25l[?12l[?25h[?25l[27m[m[H[2J[1;4H task_queue.push([36m[[m[2;6H [31m'storage'[m, [31m'account'[m, [31m'create'[m,[3;6H [31m'--type=LRS'[m,[4;6H get_location(),[5;6H conf.resources[36m[[m[31m'storage_account'[m[36m][m,
    [36m][m);
    process.env[36m[[m[31m'AZURE_STORAGE_ACCOUNT'[m[36m][m = conf.resources[36m[[m[31m'storage_account'[m[36m][m;
  [36m}[m [33melse[m [36m{[m
    [34m// Preserve it for resizing, so we don't create a new one by accedent,[m
    [34m// when the environment variable is unset[m
    conf.resources[36m[[m[31m'storage_account'[m[36m][m = process.env[36m[[m[31m'AZURE_STORAGE_ACCOUNT'[m[36m][m;
  [36m}
}[m;

exports.queue_machines = [36mfunction[m (name_prefix, coreos_update_channel, cloud_config_creator) [36m{[m
  [36mvar[m x = conf.nodes[36m[[mname_prefix[36m][m;
  [36mvar[m vm_create_base_args = [36m[[m
    [31m'vm'[m, [31m'create'[m,
    get_location(),
    get_vm_size(),
    [31m'--connect=cosneumgmtcs01'[m,
    [31m'--virtual-network-name='[m + conf.resources[36m[[m[31m'vnet'[m[36m][m,
    [31m'--no-ssh-password'[m,
    [31m'--ssh-cert='[m + conf.resources[36m[[m[31m'ssh_key'[m[36m][[m[31m'pem'[m[36m][m,
  [36m][m;

  [36mvar[m cloud_config = cloud_config_creator(x, conf);

  [36mvar[m next_host = [36mfunction[m (n) [36m{[m
    hosts.ssh_port_counter += 1;
    [36mvar[m host = [36m{[m name: util.hostname(n, name_prefix), port: hosts.ssh_port_counter [36m}[m;
    [33mif[m (cloud_config [33minstanceof[m [32mArray[m) [36m{[m[33;6H host.cloud_config_file = cloud_config[36m[[mn[36m][m;
    [36m}[m [33melse[m [36m{[m[35;6H host.cloud_config_file = cloud_config;
    [36m}[m
    hosts.collection.push(host);
    [33mreturn[m _.map([36m[[m[39;8H [31m"--vm-name=<%= name %>"[m,[40;8H [31m"--ssh=<%= port %>"[m,[41;8H [31m"--custom-data=<%= cloud_config_file %>"[m,
    [36m][m, [36mfunction[m (arg) [36m{[m [33mreturn[m _.template(arg)(host); [36m}[m);[43;129H191,8[9C74%[21;8H[?12l[?25h[?25l[43;131H0[20;8H[?12l[?25h[?25l[43;130H89[19;8H[?12l[?25h[?25l[43;133H9[19;9H[?12l[?25h[?25l[43;133H10[19;10H[?12l[?25h[?25l[43;134H1[19;11H[?12l[?25h[?25l[43;134H2[19;12H[?12l[?25h[?25l[43;134H3[19;13H[?12l[?25h[?25l[43;129H[K[43;1H/[?12l[?25hv[?25lm_create_base_args[?12l[?25h[?25l[1;42r[1;1H[7M[1;43r[36;2H [36m}[m;

  task_queue = task_queue.concat(_(x).times([36mfunction[m (n) [36m{[m
    [33mif[m (conf.resizing && n < conf.old_size) [36m{[m[40;6H [33mreturn[m [36m[][m;
    [36m}[m [33melse[m [36m{[m[42;6H [33mreturn[m vm_create_base_args.concat(next_host(n), [36m[[m[43;1H[K[43;129H219,14[8C77%[42;14H[?12l[?25h[?25l[43;129H[K[43;1H/[?12l[?25h[?25l/vm_create_base_args[31msearch hit BOTTOM, continuing at TOP[m[92C187,7[9C77%[43;129H[K[43;129H187,7[9C77%[10;7H[?12l[?25h[?25l[43;131H8[11;7H[?12l[?25h[?25l[43;131H9[12;7H[?12l[?25h[?25l[43;130H90[13;7H[?12l[?25h[?25l[43;131H1[14;7H[?12l[?25h[?25l[43;131H2[15;7H[?12l[?25h[?25l[43;131H3[16;7H[?12l[?25h[?25l[43;131H4[17;7H[?12l[?25h[?25l[43;131H5,4[18;4H[?12l[?25h[?25l[43;131H6,0-1[19;1H[?12l[?25h[?25l[43;131H7,7  [20;7H[?12l[?25h[?25l[43;131H8,0-1[21;1H[?12l[?25h[?25l[43;131H9,7  [22;7H[?12l[?25h[?25l[43;129H200[23;7H[?12l[?25h[?25l[43;131H1[24;7H[?12l[?25h[?25l[43;131H2[25;7H[?12l[?25h[?25l[43;131H3[26;7H[?12l[?25h[?25l[43;131H4[27;7H[?12l[?25h[?25l[43;131H5[28;7H[?12l[?25h[?25l[27;12H[36m[46m{[29;5H}[m[43;131H6,5[29;5H[?12l[?25h[?25l[27;12H[36m{[29;5H}[m[43;131H7,7[30;7H[?12l[?25h[?25l[43;131H8[31;7H[?12l[?25h[?25l[43;131H9[32;7H[?12l[?25h[?25l[43;130H10[33;7H[?12l[?25h[?25l[43;131H1[34;7H[?12l[?25h[?25l[43;131H2[35;7H[?12l[?25h[?25l[43;131H3,4[36;4H[?12l[?25h[?25l[43;131H4,0-1[37;1H[?12l[?25h[?25l[43;131H5,7  [38;7H[?12l[?25h[?25l[43;131H6[39;7H[?12l[?25h[?25l[43;131H7[40;7H[?12l[?25h[?25l[43;131H8[41;7H[?12l[?25h[?25l[43;131H9[42;7H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H coreos_image_ids[36m[[mcoreos_update_channel[36m][m, [31m'core'[m,[43;1H[K[43;129H220,7[9C77%[42;7H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[40;55H[36m[46m[[m[42;6H [36m[46m][m);[43;129H[K[43;129H221,7[9C78%[42;7H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[38;12H[36m[46m{[m[39;55H[36m[[41;7H][m
    [36m[46m}[m[43;129H[K[43;129H222,5[9C78%[42;5H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[37;12H[36m{[41;5H}[m
  [36m}[m));[43;129H[K[43;129H223,6[9C79%[42;6H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;1H[36m}[m;[43;129H[K[43;129H224,2[9C79%[42;2H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[43;129H[K[43;129H225,0-1[7C79%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;1Hexports.create_config = [36mfunction[m (name, nodes) [36m{[m[43;129H[K[43;129H226,7[9C80%[42;7H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;2H conf = [36m{[m[43;129H[K[43;129H227,7[9C80%[42;7H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;4H name: name,[43;129H[K[43;129H228,7[9C81%[42;7H[?12l[?25h[?25l[43;131H7[41;7H[?12l[?25h[?25l[43;131H6[40;7H[?12l[?25h[?25l[43;131H5,0-1[39;1H[?12l[?25h[?25l[43;131H4,2  [38;2H[?12l[?25h[?25l[43;131H3,6[37;6H[?12l[?25h[?25l[32;12H[36m[46m{[36;5H}[m[43;131H2,5[36;5H[?12l[?25h[?25l[32;12H[36m{[m[33;55H[36m[46m[[35;7H][m
    [36m}[m[43;131H1,7[35;7H[?12l[?25h[?25l[33;55H[36m[[35;7H][m[43;131H0[34;7H[?12l[?25h[?25l[43;130H19[33;7H[?12l[?25h[?25l[43;131H8[32;7H[?12l[?25h[?25l[43;131H7[31;7H[?12l[?25h[?25l[43;131H6[30;7H[?12l[?25h[?25l[43;131H5[29;7H[?12l[?25h[?25l[43;131H4,0-1[28;1H[?12l[?25h[?25l[43;131H3,4  [27;4H[?12l[?25h[?25l[43;131H4,0-1[28;1H[?12l[?25h[?25l[43;131H5,7  [29;7H[?12l[?25h[?25l[43;131H6[30;7H[?12l[?25h[?25l[43;131H7[31;7H[?12l[?25h[?25l[43;131H8[32;7H[?12l[?25h[?25l[43;131H9[33;7H[?12l[?25h[?25l[43;130H20[34;7H[?12l[?25h[?25l[33;55H[36m[46m[[35;7H][m[43;131H1[35;7H[?12l[?25h[?25l[32;12H[36m[46m{[m[33;55H[36m[[35;7H][m
    [36m[46m}[m[43;131H2,5[36;5H[?12l[?25h[?25l[32;12H[36m{[36;5H}[m[43;131H3,6[37;6H[?12l[?25h[?25l[43;131H4,2[38;2H[?12l[?25h[?25l[43;131H5,0-1[39;1H[?12l[?25h[?25l[43;131H6,7  [40;7H[?12l[?25h[?25l[43;131H7[41;7H[?12l[?25h[?25l[43;131H8[42;7H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;4H nodes: nodes,[43;129H[K[43;129H229,7[9C81%[42;7H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;4H weave_salt: util.rand_string(),[43;129H[K[43;129H230,7[9C82%[42;7H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;4H resources: [36m{[m[43;129H[K[43;129H231,7[9C82%[42;7H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;6H vnet: [36m[[mname, [31m'internal-vnet'[m, util.rand_suffix[36m][m.join([31m'-'[m),[43;129H[K[43;129H232,7[9C82%[42;7H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;6H service: [36m[[mname, util.rand_suffix[36m][m.join([31m'-'[m),[43;129H[K[43;129H233,7[9C83%[42;7H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;6H ssh_key: create_ssh_key(name),[43;129H[K[43;129H234,7[9C83%[42;7H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[38;16H[36m[46m{[m[42;4H [36m[46m}[m[43;129H[K[43;129H235,5[9C84%[42;5H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[37;16H[36m{[41;5H}[m
  [36m}[m;[43;129H[K[43;129H236,4[9C84%[42;4H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[43;129H[K[43;129H237,0-1[7C85%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;1H[36m}[m;[43;129H[K[43;129H238,2[9C85%[42;2H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[43;129H[K[43;129H239,0-1[7C86%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;1Hexports.destroy_cluster = [36mfunction[m (state_file) [36m{[m[43;129H[K[43;129H240,7[9C86%[42;7H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;2H load_state(state_file);[43;129H[K[43;129H241,7[9C86%[42;7H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;2H [33mif[m (conf.hosts === [33mundefined[m) [36m{[m[43;129H[K[43;129H242,7[9C87%[42;7H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;4H console.log(clr.red([31m'azure_wrapper/fail: Nothing to delete.'[m));[43;129H[K[43;129H243,7[9C87%[42;7H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;4H process.abort();[43;129H[K[43;129H244,7[9C88%[42;7H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[39;33H[36m[46m{[m[42;2H [36m[46m}[m[43;129H[K[43;129H245,3[9C88%[42;3H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[38;33H[36m{[41;3H}[m[43;129H[K[43;129H246,0-1[7C89%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;2H conf.destroying = [31mtrue[m;[43;129H[K[43;129H247,7[9C89%[42;7H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;2H task_queue = _.map(conf.hosts, [36mfunction[m (host) [36m{[m[43;129H[K[43;129H248,7[9C89%[42;7H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;4H [33mreturn[m [36m[[m[31m'vm'[m, [31m'delete'[m, [31m'--quiet'[m, [31m'--blob-delete'[m, host.name[36m][m;[43;129H[K[43;129H249,7[9C90%[42;7H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;2H [36m}[m);[43;129H[K[43;129H250,5[9C90%[42;5H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[43;129H[K[43;129H251,0-1[7C91%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;2H task_queue.push([36m[[m[31m'network'[m, [31m'vnet'[m, [31m'delete'[m, [31m'--quiet'[m, conf.resources[36m[[m[31m'vnet'[m[36m]][m);[43;129H[K[43;129H252,7[9C91%[42;7H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;2H task_queue.push([36m[[m[31m'storage'[m, [31m'account'[m, [31m'delete'[m, [31m'--quiet'[m, conf.resources[36m[[m[31m'storage_account'[m[36m]][m);[43;129H[K[43;129H253,7[9C92%[42;7H[?12l[?25h[?25l[43;131H2[41;7H[?12l[?25h[?25l[43;131H1,0-1[40;1H[?12l[?25h[?25l[43;131H0,5  [39;5H[?12l[?25h[?25l[43;130H49,7[38;7H[?12l[?25h[?25l[43;131H8[37;7H[?12l[?25h[?25l[43;131H7[36;7H[?12l[?25h[?25l[43;131H6,0-1[35;1H[?12l[?25h[?25l[31;33H[36m[46m{[34;3H}[m[43;131H5,3  [34;3H[?12l[?25h[?25l[31;33H[36m{[34;3H}[m[43;131H4,7[33;7H[?12l[?25h[?25l[43;131H3[32;7H[?12l[?25h[?25l[43;131H2[31;7H[?12l[?25h[?25l[43;131H1[30;7H[?12l[?25h[?25l[43;131H0[29;7H[?12l[?25h[?25l[43;130H39,0-1[28;1H[?12l[?25h[?25l[43;131H8,2  [27;2H[?12l[?25h[?25l[43;131H7,0-1[26;1H[?12l[?25h[?25l[43;131H6,4  [25;4H[?12l[?25h[?25l[20;16H[36m[46m{[24;5H}[m[43;131H5,5[24;5H[?12l[?25h[?25l[20;16H[36m{[24;5H}[m[43;131H4,7[23;7H[?12l[?25h[?25l[43;131H3[22;7H[?12l[?25h[?25l[43;131H2[21;7H[?12l[?25h[?25l[43;131H1[20;7H[?12l[?25h[?25l[43;131H0[19;7H[?12l[?25h[?25l[43;130H29[18;7H[?12l[?25h[?25l[43;131H8[17;7H[?12l[?25h[?25l[43;131H7[16;7H[?12l[?25h[?25l[43;131H6[15;7H[?12l[?25h[?25l[43;131H5,0-1[14;1H[?12l[?25h[?25l[43;131H4,2  [13;2H[?12l[?25h[?25l[43;131H3,6[12;6H[?12l[?25h[?25l[7;12H[36m[46m{[11;5H}[m[43;131H2,5[11;5H[?12l[?25h[?25l[7;12H[36m{[m[8;55H[36m[46m[[10;7H][m
    [36m}[m[43;131H1,7[10;7H[?12l[?25h[?25l[8;55H[36m[[10;7H][m[43;131H0[9;7H[?12l[?25h[?25l[43;130H19[8;7H[?12l[?25h[?25l[43;131H8[7;7H[?12l[?25h[?25l[43;131H7[6;7H[?12l[?25h[?25l[43;131H6[5;7H[?12l[?25h[?25l[43;131H5[4;7H[?12l[?25h[?25l[43;131H4,0-1[3;1H[?12l[?25h[?25l[43;131H3,4  [2;4H[?12l[?25h[?25l[43;131H2,7[1;7H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[1;8H [31m"--custom-data=<%= cloud_config_file %>"[m,[43;129H[K[43;129H211,7[9C91%[1;7H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[1;8H [31m"--ssh=<%= port %>"[m,[43;129H[K[43;129H210,7[9C91%[1;7H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[1;8H [31m"--vm-name=<%= name %>"[m,[43;129H[K[43;129H209,7[9C90%[1;7H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[1;4H [33mreturn[m _.map([36m[[m[43;129H[K[43;129H208,7[9C90%[1;7H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[1;4H hosts.collection.push(host);[43;129H[K[43;129H207,7[9C89%[1;7H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[1;4H [36m}[m[43;129H[K[43;129H206,5[9C89%[1;5H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[1;6H host.cloud_config_file = cloud_config;[43;129H[K[43;129H205,7[9C89%[1;7H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[1;4H [36m}[m [33melse[m [36m{[m[43;129H[K[43;129H204,7[9C88%[1;7H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[1;6H host.cloud_config_file = cloud_config[36m[[mn[36m][m;[43;129H[K[43;129H203,7[9C88%[1;7H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[1;4H [33mif[m (cloud_config [33minstanceof[m [32mArray[m) [36m{[m[43;129H[K[43;129H202,7[9C87%[1;7H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[1;4H [36mvar[m host = [36m{[m name: util.hostname(n, name_prefix), port: hosts.ssh_port_counter [36m}[m;[43;129H[K[43;129H201,7[9C87%[1;7H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[1;4H hosts.ssh_port_counter += 1;[43;129H[K[43;129H200,7[9C86%[1;7H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[1;2H [36mvar[m next_host = [36mfunction[m (n) [36m{[m[43;129H[K[43;129H199,7[9C86%[1;7H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[43;129H[K[43;129H198,0-1[7C86%[1;1H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[1;2H [36mvar[m cloud_config = cloud_config_creator(x, conf);[43;129H[K[43;129H197,7[9C85%[1;7H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[43;129H[K[43;129H196,0-1[7C85%[1;1H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[1;2H [36m][m;[43;129H[K[43;129H195,4[9C84%[1;4H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[1;4H [31m'--ssh-cert='[m + conf.resources[36m[[m[31m'ssh_key'[m[36m][[m[31m'pem'[m[36m][m,[43;129H[K[43;129H194,7[9C84%[1;7H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[1;4H [31m'--no-ssh-password'[m,[43;129H[K[43;129H193,7[9C83%[1;7H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[1;4H [31m'--virtual-network-name='[m + conf.resources[36m[[m[31m'vnet'[m[36m][m,[43;129H[K[43;129H192,7[9C83%[1;7H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[1;4H [31m'--connect=cosneumgmtcs01'[m,[43;129H[K[43;129H191,7[9C82%[1;7H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[1;4H get_vm_size(),[43;129H[K[43;129H190,7[9C82%[1;7H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[1;4H get_location(),[43;129H[K[43;129H189,7[9C82%[1;7H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[1;4H [31m'vm'[m, [31m'create'[m,[43;129H[K[43;129H188,7[9C81%[1;7H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[1;2H [36mvar[m vm_create_base_args = [36m[[m[43;129H[K[43;129H187,7[9C81%[1;7H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[1;2H [36mvar[m x = conf.nodes[36m[[mname_prefix[36m][m;[43;129H[K[43;129H186,7[9C80%[1;7H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[1;1Hexports.queue_machines = [36mfunction[m (name_prefix, coreos_update_channel, cloud_config_creator) [36m{[m[43;129H[K[43;129H185,7[9C80%[1;7H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[43;129H[K[43;129H184,0-1[7C79%[1;1H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[1;1H[36m}[m;[43;129H[K[43;129H183,2[9C79%[1;2H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[1;2H [36m}[m[43;129H[K[43;129H182,3[9C79%[1;3H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[1;4H conf.resources[36m[[m[31m'storage_account'[m[36m][m = process.env[36m[[m[31m'AZURE_STORAGE_ACCOUNT'[m[36m][m;[43;129H[K[43;129H181,7[9C78%[1;7H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[1;4H [34m// when the environment variable is unset[m[43;129H[K[43;129H180,7[9C78%[1;7H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[1;4H [34m// Preserve it for resizing, so we don't create a new one by accedent,[m[43;129H[K[43;129H179,7[9C77%[1;7H[?12l[?25h[?25l[1;42r[1;1H[L[1;43r[1;2H [36m}[m [33melse[m [36m{[m[43;129H[K[43;129H178,7[9C77%[1;7H[?12l[?25h[?25l[43;131H9[2;7H[?12l[?25h[?25l[43;130H80[3;7H[?12l[?25h[?25l[43;131H1[4;7H[?12l[?25h[?25l[1;10H[36m[46m{[5;3H}[m[43;131H2,3[5;3H[?12l[?25h[?25l[1;10H[36m{[5;3H}[m[43;131H3,2[6;2H[?12l[?25h[?25l[43;131H4,0-1[7;1H[?12l[?25h[?25l[43;131H5,7  [8;7H[?12l[?25h[?25l[43;131H6[9;7H[?12l[?25h[?25l[43;131H7[10;7H[?12l[?25h[?25l[43;131H8[11;7H[?12l[?25h[?25l[43;131H9[12;7H[?12l[?25h[?25l[43;130H90[13;7H[?12l[?25h[?25l[43;131H1[14;7H[?12l[?25h[?25l[43;131H2[15;7H[?12l[?25h[?25l[43;133H8[15;8H[?12l[?25h[?25l[43;133H9[15;9H[?12l[?25h[?25l[43;133H10[15;10H[?12l[?25h[?25l[43;134H1[15;11H[?12l[?25h[?25l[43;134H2[15;12H[?12l[?25h[?25l[43;134H3[15;13H[?12l[?25h[?25l[43;134H4[15;14H[?12l[?25h[?25l[43;134H5[15;15H[?12l[?25h[?25l[43;134H6[15;16H[?12l[?25h[?25l[43;134H7[15;17H[?12l[?25h[?25l[43;134H8[15;18H[?12l[?25h[?25l[43;134H9[15;19H[?12l[?25h[?25l[43;133H20[15;20H[?12l[?25h[?25l[43;134H1[15;21H[?12l[?25h[?25l[43;134H2[15;22H[?12l[?25h[?25l[43;134H3[15;23H[?12l[?25h[?25l[43;134H4[15;24H[?12l[?25h[?25l[43;134H5[15;25H[?12l[?25h[?25l[43;134H6[15;26H[?12l[?25h[?25l[43;134H7[15;27H[?12l[?25h[?25l[43;134H8[15;28H[?12l[?25h[?25l[43;134H9[15;29H[?12l[?25h[?25l[43;133H30[15;30H[?12l[?25h[?25l[43;134H1[15;31H[?12l[?25h[?25l[43;134H2[15;32H[?12l[?25h[?25l[43;134H3[15;33H[?12l[?25h[?25l[43;134H4[15;34H[?12l[?25h[?25l[43;134H5[15;35H[?12l[?25h[?25l[43;134H6[15;36H[?12l[?25h[?25l[43;134H7[15;37H[?12l[?25h[?25l[43;134H8[15;38H[?12l[?25h[?25l[43;134H9[15;39H[?12l[?25h[?25l[43;133H40[15;40H[?12l[?25h[?25l[43;134H1[15;41H[?12l[?25h[?25l[43;134H2[15;42H[?12l[?25h[?25l[43;134H3[15;43H[?12l[?25h[?25l[43;134H4[15;44H[?12l[?25h[?25l[43;134H5[15;45H[?12l[?25h[?25l[43;129H[K[43;1H:[?12l[?25hq[?25l[?12l[?25h1[?25l[?12l[?25h[?25l[1m[37m[41mE488: Trailing characters[m[103C192,45[8C77%[15;45H[?12l[?25h[?25l[43;1H[K[43;1H:[?12l[?25hq[?25l[?12l[?25h![?25l[?12l[?25h[?25l[43;1H[K[43;1H[?1l>[?12l[?25h[?1049l]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azure/libroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure/lib# cd ..
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# ls -la
total 524
drwxrwxr-x 7 root root   4096 Jul  3 14:32 [0m[01;34m.[0m
drwxrwxr-x 4 root root   4096 Jul  3 14:08 [01;34m..[0m
drwxrwxr-x 4 root root   4096 Jul  3 14:08 [01;34maddons[0m
-rwxrwxr-x 1 root root    120 Jul  3 14:08 [01;32mazure-login.js[0m
drwxrwxr-x 2 root root   4096 Jul  3 14:08 [01;34mcloud_config_templates[0m
-rwxrwxr-x 1 root root    434 Jul  3 14:08 [01;32mcreate-kubernetes-cluster.js[0m
-rwxrwxr-x 1 root root    193 Jul  3 14:08 [01;32mdestroy-cluster.js[0m
-rw-rw-r-- 1 root root 292367 Jul  3 14:08 [01;35mexternal_access.png[0m
-rw-rw-r-- 1 root root     14 Jul  3 14:08 .gitignore
-rw-rw-r-- 1 root root 173212 Jul  3 14:08 [01;35minitial_cluster.png[0m
drwxrwxr-x 3 root root   4096 Jul  3 14:33 [01;34mlib[0m
drwxrwxr-x 9 root root   4096 Jul  3 14:14 [01;34mnode_modules[0m
drwxrwxr-x 2 root root   4096 Jul  3 14:31 [01;34moutput[0m
-rw-rw-r-- 1 root root    509 Jul  3 14:08 package.json
-rw-rw-r-- 1 root root   9557 Jul  3 14:08 README.md
-rwxrwxr-x 1 root root    318 Jul  3 14:08 [01;32mscale-kubernetes-cluster.js[0m
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# vi output/
[?1049h[?1h=[1;43r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[43;1H"output/" Illegal file name[>c[1;1H[34m" ============================================================================
" Netrw Directory Listing                                        [m[36m(netrw v143)[m
[34m"   /opt/kubernetes/docs/getting-started-guides/coreos/azure/output
"   Sorted by[m[33m      name[m
[34m"   Sort sequence:[m[33m [\/]$[m[34m,[m[33m\<core\%(\.\d\+\)\=\>[m[34m,[m[33m\.h$[m[34m,[m[33m\.c$[m[34m,[m[33m\.cpp$[m[34m,[m[33m\~\=\*$[m[34m,[m[33m*[m[34m,[m[33m\.o$[m[34m,[m[33m\.obj$[m[34m,[m[33m\.info$[m[34m,[m[33m\.swp$[m[34m,[m[33m\.bak$[m[34m,[m[33m\~$[m
[34m"   Quick Help: [m<F1[36m>[m[35m:[mhelp  [36m-[m[35m:[mgo up dir  [36mD[m[35m:[mdelete  [36mR[m[35m:[mrename  [36ms[m[35m:[msort-by  [36mx[m[35m:[mexec
[34m" ============================================================================[m
[4m[34m..[m[4m[36m/[m[4m                                                                                                                                               [m[9;1H.gitignore
kube_37633ecc96145a_deployment.yml
kube_37633ecc96145a_ssh.key
kube_37633ecc96145a_ssh.pem
kube_f6890077aed0e2_deployment.yml
kube_f6890077aed0e2_ssh.key
kube_f6890077aed0e2_ssh.pem
kube_f9785ceb1576a0_ssh.key
kube_f9785ceb1576a0_ssh.pem
kubernetes-cluster-etcd-nodes_37633ecc96145a_generated.yml
kubernetes-cluster-etcd-nodes_f6890077aed0e2_generated.yml
kubernetes-cluster-etcd-nodes_f9785ceb1576a0_generated.yml
kubernetes-cluster-main-nodes_37633ecc96145a_generated.yml
kubernetes-cluster-main-nodes_f6890077aed0e2_generated.yml
kubernetes-cluster-main-nodes_f9785ceb1576a0_generated.yml
.swp
[1m[34m~                                                                                                                                                 [26;1H~                                                                                                                                                 [27;1H~                                                                                                                                                 [28;1H~                                                                                                                                                 [29;1H~                                                                                                                                                 [30;1H~                                                                                                                                                 [31;1H~                                                                                                                                                 [32;1H~                                                                                                                                                 [33;1H~                                                                                                                                                 [34;1H~                                                                                                                                                 [35;1H~                                                                                                                                                 [36;1H~                                                                                                                                                 [37;1H~                                                                                                                                                 [38;1H~                                                                                                                                                 [39;1H~                                                                                                                                                 [40;1H~                                                                                                                                                 [41;1H~                                                                                                                                                 [42;1H~                                                                                                                                                 [m[43;129H8,1[11CAll[8;1H[?12l[?25h[?25l[43;131H2[8;2H[?12l[?25h[?25l[1;1H[4m[34m" ============================================================================[m[4m                                                                    [m[1;1H[34m" ============================================================================[m[1;79H[K[4;14H[33m time[m[4;19H[K[5;4H[34m Quick Help: [m<F1[36m>[m[35m:[mhelp  [36m-[m[35m:[mgo up dir  [36mD[m[35m:[mdelete  [36mR[m[35m:[mrename  [36ms[m[35m:[msort-by  [36mx[m[35m:[mexec[5;78H[K[6;2H[34m ============================================================================[m
.gitignore[7;11H[K[8;1H[4mkubernetes-cluster-etcd-nodes_f6890077aed0e2_generated.yml[m
kubernetes-cluster-main-nodes_f6890077aed0e2_generated.yml
kube_f6890077aed0e2_ssh.key[10;28H[K[11;5H_f6890077aed0e2_ssh.pem
kube_f6890077aed0e2_deployment.yml[13;6Hf9785ceb1576a0_ssh.key[13;28H[K[14;6Hf9785ceb1576a0_ssh.pem
kubernetes-cluster-etcd-nodes_f9785ceb1576a0_generated.yml
kubernetes-cluster-main-nodes_f9785ceb1576a0_generated.yml
kubernetes-cluster-etcd-nodes_37633ecc96145a_generated.yml[18;19H-main
kube_37633ecc96145a_ssh.key[19;28H[K[20;4He_37633ecc96145a_ssh.pem[20;28H[K[21;4He_37633ecc96145a_deployment.yml[21;35H[K[22;1H[34m..[m[36m/[m[22;4H[K[23;1H.swp[23;5H[K[24;1H[1m[34m~                                                                                                                                                 [8;2H[?12l[?25h[?25l[m[43;1H[K[43;1H:[?12l[?25hq[?25l[?12l[?25h![?25l[?12l[?25h[?25l[43;1H[K[43;1H[?1l>[?12l[?25h[?1049l]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# vi [K[K[Kcd output/
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azure/outputroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure/output# l s-l
ls: cannot access s-l: No such file or directory
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azure/outputroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure/output#  a[K[Kls -la
total 104
drwxrwxr-x 2 root root  4096 Jul  3 14:34 [0m[01;34m.[0m
drwxrwxr-x 7 root root  4096 Jul  3 14:34 [01;34m..[0m
-rw-rw-r-- 1 root root     2 Jul  3 14:08 .gitignore
-rw-rw-r-- 1 root root  1087 Jul  3 14:31 kube_37633ecc96145a_deployment.yml
-rw------- 1 root root  1704 Jul  3 14:30 kube_37633ecc96145a_ssh.key
-rw-rw-r-- 1 root root  1253 Jul  3 14:30 kube_37633ecc96145a_ssh.pem
-rw-rw-r-- 1 root root  1087 Jul  3 14:19 kube_f6890077aed0e2_deployment.yml
-rw------- 1 root root  1704 Jul  3 14:18 kube_f6890077aed0e2_ssh.key
-rw-rw-r-- 1 root root  1253 Jul  3 14:18 kube_f6890077aed0e2_ssh.pem
-rw------- 1 root root  1704 Jul  3 14:22 kube_f9785ceb1576a0_ssh.key
-rw-rw-r-- 1 root root  1253 Jul  3 14:22 kube_f9785ceb1576a0_ssh.pem
-rw-rw-r-- 1 root root  2304 Jul  3 14:30 kubernetes-cluster-etcd-nodes_37633ecc96145a_generated.yml
-rw-rw-r-- 1 root root  2304 Jul  3 14:17 kubernetes-cluster-etcd-nodes_f6890077aed0e2_generated.yml
-rw-rw-r-- 1 root root  2304 Jul  3 14:22 kubernetes-cluster-etcd-nodes_f9785ceb1576a0_generated.yml
-rw-rw-r-- 1 root root 12462 Jul  3 14:30 kubernetes-cluster-main-nodes_37633ecc96145a_generated.yml
-rw-rw-r-- 1 root root 12462 Jul  3 14:17 kubernetes-cluster-main-nodes_f6890077aed0e2_generated.yml
-rw-rw-r-- 1 root root 12462 Jul  3 14:22 kubernetes-cluster-main-nodes_f9785ceb1576a0_generated.yml
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azure/outputroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure/output#  vi kube_37633ecc96145a_deployment.yml
[?1049h[?1h=[1;43r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[43;1H"kube_37633ecc96145a_deployment.yml" 31L, 1087C[>c[1;1H[36mname[m[35m:[m kube
[36mnodes[m[35m:[m
  [36metcd[m[35m:[m [31m3[m
  [36mkube[m[35m:[m [31m3[m
[36mweave_salt[m[35m:[m 2e72f68375e8bf0e7857632e3fd9d9a5d1b557569a6f7ca872a47e0ae49e5bc1
[36mresources[m[35m:[m
  [36mvnet[m[35m:[m kube-internal-vnet-37633ecc96145a
  [36mservice[m[35m:[m kube-37633ecc96145a
  [36mssh_key[m[35m:[m
    [36mkey[m[35m:[m ./output/kube_37633ecc96145a_ssh.key
    [36mpem[m[35m:[m ./output/kube_37633ecc96145a_ssh.pem
  [36mstorage_account[m[35m:[m 37633ecc96145a
[36mhosts[m[35m:[m
  [33m- [m[36mname[m[35m:[m etcd-00
    [36mport[m[35m:[m [31m2201[m
    [36mcloud_config_file[m[35m:[m ./output/kubernetes-cluster-etcd-nodes_37633ecc96145a_generated.yml
  [33m- [m[36mname[m[35m:[m etcd-01
    [36mport[m[35m:[m [31m2202[m
    [36mcloud_config_file[m[35m:[m ./output/kubernetes-cluster-etcd-nodes_37633ecc96145a_generated.yml
  [33m- [m[36mname[m[35m:[m etcd-02
    [36mport[m[35m:[m [31m2203[m
    [36mcloud_config_file[m[35m:[m ./output/kubernetes-cluster-etcd-nodes_37633ecc96145a_generated.yml
  [33m- [m[36mname[m[35m:[m kube-00
    [36mport[m[35m:[m [31m2204[m
    [36mcloud_config_file[m[35m:[m ./output/kubernetes-cluster-main-nodes_37633ecc96145a_generated.yml
  [33m- [m[36mname[m[35m:[m kube-01
    [36mport[m[35m:[m [31m2205[m
    [36mcloud_config_file[m[35m:[m ./output/kubernetes-cluster-main-nodes_37633ecc96145a_generated.yml
  [33m- [m[36mname[m[35m:[m kube-02
    [36mport[m[35m:[m [31m2206[m
    [36mcloud_config_file[m[35m:[m ./output/kubernetes-cluster-main-nodes_37633ecc96145a_generated.yml
[1m[34m~                                                                                                                                                 [33;1H~                                                                                                                                                 [34;1H~                                                                                                                                                 [35;1H~                                                                                                                                                 [36;1H~                                                                                                                                                 [37;1H~                                                                                                                                                 [38;1H~                                                                                                                                                 [39;1H~                                                                                                                                                 [40;1H~                                                                                                                                                 [41;1H~                                                                                                                                                 [42;1H~                                                                                                                                                 [m[43;129H1,1[11CAll[1;1H[?12l[?25h[?25l[43;1H[K[43;1H:[?12l[?25hq[?25l[?12l[?25h![?25l[?12l[?25h[?25l[43;1H[K[43;1H[?1l>[?12l[?25h[?1049l]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azure/outputroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure/output# l[Ki[Kvi kube_f6890077aed0e2_deployment.yml
[?1049h[?1h=[1;43r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[43;1H"kube_f6890077aed0e2_deployment.yml" 31L, 1087C[>c[1;1H[36mname[m[35m:[m kube
[36mnodes[m[35m:[m
  [36metcd[m[35m:[m [31m3[m
  [36mkube[m[35m:[m [31m3[m
[36mweave_salt[m[35m:[m b9a9c49583cb021eb28ca626f15107c993e32bd799a04dc3cfe9522d5a6b1f92
[36mresources[m[35m:[m
  [36mvnet[m[35m:[m kube-internal-vnet-f6890077aed0e2
  [36mservice[m[35m:[m kube-f6890077aed0e2
  [36mssh_key[m[35m:[m
    [36mkey[m[35m:[m ./output/kube_f6890077aed0e2_ssh.key
    [36mpem[m[35m:[m ./output/kube_f6890077aed0e2_ssh.pem
  [36mstorage_account[m[35m:[m f6890077aed0e2
[36mhosts[m[35m:[m
  [33m- [m[36mname[m[35m:[m etcd-00
    [36mport[m[35m:[m [31m2201[m
    [36mcloud_config_file[m[35m:[m ./output/kubernetes-cluster-etcd-nodes_f6890077aed0e2_generated.yml
  [33m- [m[36mname[m[35m:[m etcd-01
    [36mport[m[35m:[m [31m2202[m
    [36mcloud_config_file[m[35m:[m ./output/kubernetes-cluster-etcd-nodes_f6890077aed0e2_generated.yml
  [33m- [m[36mname[m[35m:[m etcd-02
    [36mport[m[35m:[m [31m2203[m
    [36mcloud_config_file[m[35m:[m ./output/kubernetes-cluster-etcd-nodes_f6890077aed0e2_generated.yml
  [33m- [m[36mname[m[35m:[m kube-00
    [36mport[m[35m:[m [31m2204[m
    [36mcloud_config_file[m[35m:[m ./output/kubernetes-cluster-main-nodes_f6890077aed0e2_generated.yml
  [33m- [m[36mname[m[35m:[m kube-01
    [36mport[m[35m:[m [31m2205[m
    [36mcloud_config_file[m[35m:[m ./output/kubernetes-cluster-main-nodes_f6890077aed0e2_generated.yml
  [33m- [m[36mname[m[35m:[m kube-02
    [36mport[m[35m:[m [31m2206[m
    [36mcloud_config_file[m[35m:[m ./output/kubernetes-cluster-main-nodes_f6890077aed0e2_generated.yml
[1m[34m~                                                                                                                                                 [33;1H~                                                                                                                                                 [34;1H~                                                                                                                                                 [35;1H~                                                                                                                                                 [36;1H~                                                                                                                                                 [37;1H~                                                                                                                                                 [38;1H~                                                                                                                                                 [39;1H~                                                                                                                                                 [40;1H~                                                                                                                                                 [41;1H~                                                                                                                                                 [42;1H~                                                                                                                                                 [m[43;129H1,1[11CAll[1;1H[?12l[?25h[?25l[43;1H[K[43;1H:[?12l[?25hq[?25l[?12l[?25h![?25l[?12l[?25h[?25l[43;1H[K[43;1H[?1l>[?12l[?25h[?1049l]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azure/outputroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure/output# ls -la
total 104
drwxrwxr-x 2 root root  4096 Jul  3 14:35 [0m[01;34m.[0m
drwxrwxr-x 7 root root  4096 Jul  3 14:34 [01;34m..[0m
-rw-rw-r-- 1 root root     2 Jul  3 14:08 .gitignore
-rw-rw-r-- 1 root root  1087 Jul  3 14:31 kube_37633ecc96145a_deployment.yml
-rw------- 1 root root  1704 Jul  3 14:30 kube_37633ecc96145a_ssh.key
-rw-rw-r-- 1 root root  1253 Jul  3 14:30 kube_37633ecc96145a_ssh.pem
-rw-rw-r-- 1 root root  1087 Jul  3 14:19 kube_f6890077aed0e2_deployment.yml
-rw------- 1 root root  1704 Jul  3 14:18 kube_f6890077aed0e2_ssh.key
-rw-rw-r-- 1 root root  1253 Jul  3 14:18 kube_f6890077aed0e2_ssh.pem
-rw------- 1 root root  1704 Jul  3 14:22 kube_f9785ceb1576a0_ssh.key
-rw-rw-r-- 1 root root  1253 Jul  3 14:22 kube_f9785ceb1576a0_ssh.pem
-rw-rw-r-- 1 root root  2304 Jul  3 14:30 kubernetes-cluster-etcd-nodes_37633ecc96145a_generated.yml
-rw-rw-r-- 1 root root  2304 Jul  3 14:17 kubernetes-cluster-etcd-nodes_f6890077aed0e2_generated.yml
-rw-rw-r-- 1 root root  2304 Jul  3 14:22 kubernetes-cluster-etcd-nodes_f9785ceb1576a0_generated.yml
-rw-rw-r-- 1 root root 12462 Jul  3 14:30 kubernetes-cluster-main-nodes_37633ecc96145a_generated.yml
-rw-rw-r-- 1 root root 12462 Jul  3 14:17 kubernetes-cluster-main-nodes_f6890077aed0e2_generated.yml
-rw-rw-r-- 1 root root 12462 Jul  3 14:22 kubernetes-cluster-main-nodes_f9785ceb1576a0_generated.yml
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azure/outputroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure/output#  rm -rfv *
removed `kube_37633ecc96145a_deployment.yml'
removed `kube_37633ecc96145a_ssh.key'
removed `kube_37633ecc96145a_ssh.pem'
removed `kube_f6890077aed0e2_deployment.yml'
removed `kube_f6890077aed0e2_ssh.key'
removed `kube_f6890077aed0e2_ssh.pem'
removed `kube_f9785ceb1576a0_ssh.key'
removed `kube_f9785ceb1576a0_ssh.pem'
removed `kubernetes-cluster-etcd-nodes_37633ecc96145a_generated.yml'
removed `kubernetes-cluster-etcd-nodes_f6890077aed0e2_generated.yml'
removed `kubernetes-cluster-etcd-nodes_f9785ceb1576a0_generated.yml'
removed `kubernetes-cluster-main-nodes_37633ecc96145a_generated.yml'
removed `kubernetes-cluster-main-nodes_f6890077aed0e2_generated.yml'
removed `kubernetes-cluster-main-nodes_f9785ceb1576a0_generated.yml'
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azure/outputroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure/output# cd ..
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# ls -la
total 524
drwxrwxr-x 7 root root   4096 Jul  3 14:34 [0m[01;34m.[0m
drwxrwxr-x 4 root root   4096 Jul  3 14:08 [01;34m..[0m
drwxrwxr-x 4 root root   4096 Jul  3 14:08 [01;34maddons[0m
-rwxrwxr-x 1 root root    120 Jul  3 14:08 [01;32mazure-login.js[0m
drwxrwxr-x 2 root root   4096 Jul  3 14:08 [01;34mcloud_config_templates[0m
-rwxrwxr-x 1 root root    434 Jul  3 14:08 [01;32mcreate-kubernetes-cluster.js[0m
-rwxrwxr-x 1 root root    193 Jul  3 14:08 [01;32mdestroy-cluster.js[0m
-rw-rw-r-- 1 root root 292367 Jul  3 14:08 [01;35mexternal_access.png[0m
-rw-rw-r-- 1 root root     14 Jul  3 14:08 .gitignore
-rw-rw-r-- 1 root root 173212 Jul  3 14:08 [01;35minitial_cluster.png[0m
drwxrwxr-x 3 root root   4096 Jul  3 14:33 [01;34mlib[0m
drwxrwxr-x 9 root root   4096 Jul  3 14:14 [01;34mnode_modules[0m
drwxrwxr-x 2 root root   4096 Jul  3 14:35 [01;34moutput[0m
-rw-rw-r-- 1 root root    509 Jul  3 14:08 package.json
-rw-rw-r-- 1 root root   9557 Jul  3 14:08 README.md
-rwxrwxr-x 1 root root    318 Jul  3 14:08 [01;32mscale-kubernetes-cluster.js[0m
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure#  cd lib/
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azure/libroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure/lib# ls -al
total 36
drwxrwxr-x 3 root root 4096 Jul  3 14:33 [0m[01;34m.[0m
drwxrwxr-x 7 root root 4096 Jul  3 14:34 [01;34m..[0m
-rw-rw-r-- 1 root root 8054 Jul  3 14:29 azure_wrapper.js
-rw-rw-r-- 1 root root 8068 Jul  3 14:28 azure_wrapper.js.bak
-rw-rw-r-- 1 root root 1153 Jul  3 14:08 cloud_config.js
drwxrwxr-x 2 root root 4096 Jul  3 14:24 [01;34mdeployment_logic[0m
-rw-rw-r-- 1 root root  812 Jul  3 14:08 util.js
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azure/libroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure/lib#  cd ..
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# cd cloud_config_templates/
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azure/cloud_config_templatesroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure/cloud_config_templates# ls -la
total 28
drwxrwxr-x 2 root root  4096 Jul  3 14:08 [0m[01;34m.[0m
drwxrwxr-x 7 root root  4096 Jul  3 14:34 [01;34m..[0m
-rw-rw-r-- 1 root root  2133 Jul  3 14:08 kubernetes-cluster-etcd-node-template.yml
-rw-rw-r-- 1 root root 12600 Jul  3 14:08 kubernetes-cluster-main-nodes-template.yml
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azure/cloud_config_templatesroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure/cloud_config_templates# vi ke[K[Kkubernetes-cluster-main-nodes-template.yml
[?1049h[?1h=[1;43r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[43;1H"kubernetes-cluster-main-nodes-template.yml" 389L, 12600C[>c[1;1H[34m## This file is used as input to deployment script, which ammends it as needed.
## More specifically, we need to add environment files for as many nodes as we
## are going to deploy.[m

[36mwrite_files[m[35m:[m
  [33m- [m[36mpath[m[35m:[m /opt/bin/curl-retry.sh
    [36mpermissions[m[35m:[m [31m'0755'[m
    [36mowner[m[35m:[m root
    [36mcontent[m[35m:[m |[10;6H[34m #!/bin/sh -x[m[11;6H until curl $@[12;6H do sleep [31m1[m[13;6H done

  [33m- [m[36mpath[m[35m:[m /opt/bin/register_minion.sh
    [36mpermissions[m[35m:[m [31m'0755'[m
    [36mowner[m[35m:[m root
    [36mcontent[m[35m:[m |[19;6H[34m #!/bin/sh -xe[m[20;6H minion_id="${1}"[21;6H master_url="${2}"[22;6H env_label="${3}"[23;6H until healthcheck=$(curl --fail --silent [31m"${master_url}/healthz"[m)[24;6H do sleep [31m2[m[25;6H done[26;6H test -n [31m"${healthcheck}"[m[27;6H test [31m"${healthcheck}"[m = [31m"ok"[m[28;6H printf [31m'{
        "apiVersion": "v1",
        "kind": "Node",
        "metadata": {
          "name": "%s",
          "labels": { "environment": "%s" }
        }'[m [31m"${minion_id}"[m [31m"${env_label}"[m \[35;8H | /opt/bin/kubectl create -s [31m"${master_url}"[m -f -

  [33m- [m[36mpath[m[35m:[m /etc/kubernetes/manifests/fluentd.manifest
    [36mpermissions[m[35m:[m [31m'0755'[m
    [36mowner[m[35m:[m root
    [36mcontent[m[35m:[m |[41;6H [36mapiVersion[m[35m:[m v1[42;6H [36mkind[m[35m:[m Pod[43;129H1,1[11CTop[1;1H[?12l[?25h[?25l[43;129H2[2;1H[?12l[?25h[?25l[43;129H3[3;1H[?12l[?25h[?25l[43;129H4,0-1[4;1H[?12l[?25h[?25l[43;129H5,1  [5;1H[?12l[?25h[?25l[43;129H6[6;1H[?12l[?25h[?25l[43;129H7[7;1H[?12l[?25h[?25l[43;129H8[8;1H[?12l[?25h[?25l[43;129H9[9;1H[?12l[?25h[?25l[43;129H10,1[10;1H[?12l[?25h[?25l[43;130H1[11;1H[?12l[?25h[?25l[43;130H2[12;1H[?12l[?25h[?25l[43;130H3[13;1H[?12l[?25h[?25l[43;130H4,0-1[14;1H[?12l[?25h[?25l[43;130H5,1  [15;1H[?12l[?25h[?25l[43;130H6[16;1H[?12l[?25h[?25l[43;130H7[17;1H[?12l[?25h[?25l[43;130H8[18;1H[?12l[?25h[?25l[43;130H9[19;1H[?12l[?25h[?25l[43;129H20[20;1H[?12l[?25h[?25l[43;130H1[21;1H[?12l[?25h[?25l[43;130H2[22;1H[?12l[?25h[?25l[43;130H3[23;1H[?12l[?25h[?25l[43;130H4[24;1H[?12l[?25h[?25l[43;130H5[25;1H[?12l[?25h[?25l[43;130H6[26;1H[?12l[?25h[?25l[43;130H7[27;1H[?12l[?25h[?25l[43;130H8[28;1H[?12l[?25h[?25l[43;130H9[29;1H[?12l[?25h[?25l[43;129H30[30;1H[?12l[?25h[?25l[43;130H1[31;1H[?12l[?25h[?25l[43;130H2[32;1H[?12l[?25h[?25l[43;130H3[33;1H[?12l[?25h[?25l[43;130H4[34;1H[?12l[?25h[?25l[43;130H5[35;1H[?12l[?25h[?25l[43;130H6,0-1[36;1H[?12l[?25h[?25l[43;130H7,1  [37;1H[?12l[?25h[?25l[43;130H8[38;1H[?12l[?25h[?25l[43;130H9[39;1H[?12l[?25h[?25l[43;129H40[40;1H[?12l[?25h[?25l[43;130H1[41;1H[?12l[?25h[?25l[43;130H2[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;6H [36mmetadata[m[35m:[m[43;1H[K[43;129H43,1[11C0%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H [36mname[m[35m:[m fluentd-elasticsearch[43;129H[K[43;129H44,1[11C0%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;6H [36mspec[m[35m:[m[43;129H[K[43;129H45,1[11C0%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H [36mcontainers[m[35m:[m[43;129H[K[43;129H46,1[11C1%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H [33m- [m[36mname[m[35m:[m fluentd-elasticsearch[43;129H[K[43;129H47,1[11C1%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;10H [36mimage[m[35m:[m gcr.io/google_containers/fluentd-elasticsearch:1.5[43;129H[K[43;129H48,1[11C1%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;10H [36menv[m[35m:[m[43;129H[K[43;129H49,1[11C2%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;10H [33m- [m[36mname[m[35m:[m [31m"FLUENTD_ARGS"[m[43;129H[K[43;129H50,1[11C2%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;12H [36mvalue[m[35m:[m [31m"-qq"[m[43;129H[K[43;129H51,1[11C2%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;10H [36mvolumeMounts[m[35m:[m[43;129H[K[43;129H52,1[11C2%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;10H [33m- [m[36mname[m[35m:[m varlog[43;129H[K[43;129H53,1[11C3%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;12H [36mmountPath[m[35m:[m /varlog[43;129H[K[43;129H54,1[11C3%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;10H [33m- [m[36mname[m[35m:[m containers[43;129H[K[43;129H55,1[11C3%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;12H [36mmountPath[m[35m:[m /var/lib/docker/containers[43;129H[K[43;129H56,1[11C4%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H [36mvolumes[m[35m:[m[43;129H[K[43;129H57,1[11C4%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H [33m- [m[36mname[m[35m:[m varlog[43;129H[K[43;129H58,1[11C4%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;10H [36mhostPath[m[35m:[m[43;129H[K[43;129H59,1[11C4%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;12H [36mpath[m[35m:[m /var/log[43;129H[K[43;129H60,1[11C5%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H [33m- [m[36mname[m[35m:[m containers[43;129H[K[43;129H61,1[11C5%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;10H [36mhostPath[m[35m:[m[43;129H[K[43;129H62,1[11C5%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;12H [36mpath[m[35m:[m /var/lib/docker/containers[43;129H[K[43;129H63,1[11C6%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[43;129H[K[43;129H64,0-1[9C6%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;1H[36mcoreos[m[35m:[m[43;129H[K[43;129H65,1[11C6%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;2H [36mupdate[m[35m:[m[43;129H[K[43;129H66,1[11C6%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;4H [36mgroup[m[35m:[m stable[43;129H[K[43;129H67,1[11C7%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;4H [36mreboot-strategy[m[35m:[m off[43;129H[K[43;129H68,1[11C7%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;2H [36munits[m[35m:[m[43;129H[K[43;129H69,1[11C7%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;4H [33m- [m[36mname[m[35m:[m systemd-networkd-wait-online.service[43;129H[K[43;129H70,1[11C8%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;6H [36mdrop-ins[m[35m:[m[43;129H[K[43;129H71,1[11C8%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H [33m- [m[36mname[m[35m:[m 50-check-github-is-reachable.conf[43;129H[K[43;129H72,1[11C8%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;10H [36mcontent[m[35m:[m |[43;129H[K[43;129H73,1[11C8%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;12H [35m[[mService[35m][m[43;129H[K[43;129H74,1[11C9%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;12H ExecStart=/bin/sh -x -c \[43;129H[K[43;129H75,1[11C9%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;14H [31m'until curl --silent --fail https://status.github.com/api/status.json | grep -q \"good\"; do sleep 2; done'[m[43;129H[K[43;129H76,1[11C9%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[43;129H[K[43;129H77,0-1[8C10%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;4H [33m- [m[36mname[m[35m:[m docker.service[43;129H[K[43;129H78,1[10C10%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;6H [36mdrop-ins[m[35m:[m[43;129H[K[43;129H79,1[10C10%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H [33m- [m[36mname[m[35m:[m 50-weave-kubernetes.conf[43;129H[K[43;129H80,1[10C10%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;10H [36mcontent[m[35m:[m |[43;129H[K[43;129H81,1[10C11%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;12H [35m[[mService[35m][m[43;129H[K[43;129H82,1[10C11%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;12H Environment=DOCKER_OPTS='--bridge="weave" -r="false"'[43;129H[K[43;129H83,1[10C11%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[43;129H[K[43;129H84,0-1[8C12%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;4H [33m- [m[36mname[m[35m:[m weave-network.target[43;129H[K[43;129H85,1[10C12%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;6H [36menable[m[35m:[m [31mtrue[m[43;129H[K[43;129H86,1[10C12%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;6H [36mcontent[m[35m:[m |[43;129H[K[43;129H87,1[10C12%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H [35m[[mUnit[35m][m[43;129H[K[43;129H88,1[10C13%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H Description=Weave Network Setup Complete[43;129H[K[43;129H89,1[10C13%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H Documentation=man:systemd.special(7)[43;129H[K[43;129H90,1[10C13%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H RefuseManualStart=no[43;129H[K[43;129H91,1[10C14%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H After=network-online.target[43;129H[K[43;129H92,1[10C14%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H [35m[[mInstall[35m][m[43;129H[K[43;129H93,1[10C14%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H WantedBy=multi-user.target[43;129H[K[43;129H94,1[10C14%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H WantedBy=kubernetes-master.target[43;129H[K[43;129H95,1[10C15%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H WantedBy=kubernetes-minion.target[43;129H[K[43;129H96,1[10C15%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[43;129H[K[43;129H97,0-1[8C15%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;4H [33m- [m[36mname[m[35m:[m kubernetes-master.target[43;129H[K[43;129H98,1[10C16%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;6H [36menable[m[35m:[m [31mtrue[m[43;129H[K[43;129H99,1[10C16%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;6H [36mcommand[m[35m:[m start[43;129H[K[43;129H100,1[9C16%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;6H [36mcontent[m[35m:[m |[43;129H[K[43;129H101,1[9C17%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H [35m[[mUnit[35m][m[43;129H[K[43;129H102,1[9C17%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H Description=Kubernetes Cluster Master[43;129H[K[43;129H103,1[9C17%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H Documentation=http://kubernetes.io/[43;129H[K[43;129H104,1[9C17%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H RefuseManualStart=no[43;129H[K[43;129H105,1[9C18%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H After=weave-network.target[43;129H[K[43;129H106,1[9C18%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H Requires=weave-network.target[43;129H[K[43;129H107,1[9C18%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H ConditionHost=kube-00[43;129H[K[43;129H108,1[9C19%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H Wants=apiserver.service[43;129H[K[43;129H109,1[9C19%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H Wants=scheduler.service[43;129H[K[43;129H110,1[9C19%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H Wants=controller-manager.service[43;129H[K[43;129H111,1[9C19%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H [35m[[mInstall[35m][m[43;129H[K[43;129H112,1[9C20%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;8H WantedBy=multi-user.target[43;129H[K[43;129H113,1[9C20%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[43;129H[K[43;129H114,0-1[7C20%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;4H [33m- [m[36mname[m[35m:[m kubernetes-minion.target[43;129H[K[43;129H115,1[9C21%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;6H [36menable[m[35m:[m [31mtrue[m[43;129H[K[43;129H116,1[9C21%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;6H [36mcommand[m[35m:[m start[43;129H[K[43;129H117,1[9C21%[42;1H[?12l[?25h[?25l[1;42r[42;1H
[1;43r[42;6H [36mcontent[m[35m:[m |[43;129H[K[43;129H118,1[9C21%[42;1H[?12l[?25h[?25l[43;129H[K[43;1H:[?12l[?25hq[?25l[?12l[?25h![?25l[?12l[?25h[?25l[43;1H[K[43;1H[?1l>[?12l[?25h[?1049l]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azure/cloud_config_templatesroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure/cloud_config_templates# cd ..
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# cd ..
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreosroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos# cd azure/
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# l s-l
ls: cannot access s-l: No such file or directory
a]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# a [K[Kls -la
total 524
drwxrwxr-x 7 root root   4096 Jul  3 14:34 [0m[01;34m.[0m
drwxrwxr-x 4 root root   4096 Jul  3 14:08 [01;34m..[0m
drwxrwxr-x 4 root root   4096 Jul  3 14:08 [01;34maddons[0m
-rwxrwxr-x 1 root root    120 Jul  3 14:08 [01;32mazure-login.js[0m
drwxrwxr-x 2 root root   4096 Jul  3 14:36 [01;34mcloud_config_templates[0m
-rwxrwxr-x 1 root root    434 Jul  3 14:08 [01;32mcreate-kubernetes-cluster.js[0m
-rwxrwxr-x 1 root root    193 Jul  3 14:08 [01;32mdestroy-cluster.js[0m
-rw-rw-r-- 1 root root 292367 Jul  3 14:08 [01;35mexternal_access.png[0m
-rw-rw-r-- 1 root root     14 Jul  3 14:08 .gitignore
-rw-rw-r-- 1 root root 173212 Jul  3 14:08 [01;35minitial_cluster.png[0m
drwxrwxr-x 3 root root   4096 Jul  3 14:33 [01;34mlib[0m
drwxrwxr-x 9 root root   4096 Jul  3 14:14 [01;34mnode_modules[0m
drwxrwxr-x 2 root root   4096 Jul  3 14:35 [01;34moutput[0m
-rw-rw-r-- 1 root root    509 Jul  3 14:08 package.json
-rw-rw-r-- 1 root root   9557 Jul  3 14:08 README.md
-rwxrwxr-x 1 root root    318 Jul  3 14:08 [01;32mscale-kubernetes-cluster.js[0m
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure#  cd lib/
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azure/libroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure/lib# ls -la
total 36
drwxrwxr-x 3 root root 4096 Jul  3 14:33 [0m[01;34m.[0m
drwxrwxr-x 7 root root 4096 Jul  3 14:34 [01;34m..[0m
-rw-rw-r-- 1 root root 8054 Jul  3 14:29 azure_wrapper.js
-rw-rw-r-- 1 root root 8068 Jul  3 14:28 azure_wrapper.js.bak
-rw-rw-r-- 1 root root 1153 Jul  3 14:08 cloud_config.js
drwxrwxr-x 2 root root 4096 Jul  3 14:24 [01;34mdeployment_logic[0m
-rw-rw-r-- 1 root root  812 Jul  3 14:08 util.js
 ]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azure/libroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure/lib#  mv azure_wrapper.js azure_wrapper.js. azure_wrapper.jsbak azure_wrapper.js[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azure/libroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure/lib# cd ..
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# (reverse-i-search)`': [K.': cd ..j': vi azure_wrapper.js[1@s[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C./create-kubernetes-cluster.js]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# ./create-kubernetes-cluster.js
[33mazure_wrapper/task:[39m [90m{ todo: 
   [ [ 'network',
       'vnet',
       'create',
       '--location=West Europe',
       '--address-space=172.16.0.0',
       'kube-internal-vnet-01b70fea4e35bf' ],
     [ 'storage',
       'account',
       'create',
       '--type=LRS',
       '--location=West Europe',
       '01b70fea4e35bf' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=etcd-00',
       '--ssh=2201',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=etcd-01',
       '--ssh=2202',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=etcd-02',
       '--ssh=2203',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=kube-00',
       '--ssh=2204',
       '--custom-data=./output/kubernetes-cluster-main-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=kube-01',
       '--ssh=2205',
       '--custom-data=./output/kubernetes-cluster-main-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=kube-02',
       '--ssh=2206',
       '--custom-data=./output/kubernetes-cluster-main-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ] ],
  done: [] }[39m
[33mazure_wrapper/exec:[39m [34m[ 'network',
  'vnet',
  'create',
  '--location=West Europe',
  '--address-space=172.16.0.0',
  'kube-internal-vnet-01b70fea4e35bf' ][39m
[31mGenerating a 2048 bit RSA private key
.............................................+++
.....................+++
writing new private key to './output/kube_01b70fea4e35bf_ssh.key'
-----
[39m
[32minfo[39m:    Executing command [1mnetwork vnet create[22m
[32minfo[39m:    Using default address space cidr: 12
[32minfo[39m:    Using default subnet start IP: 172.16.0.0
[32minfo[39m:    Using default subnet cidr: 15
                                                                               [36m-[39m Getting network configuration[36m\[39m+
                                                                               [36m|[39m Getting or creating affinity group+
                                                                               [36m/[39m Getting locations[36m-[39m[36m\[39m[36m|[39m+
                                                                               [36m/[39m Updating Network Configuration[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m+
[32minfo[39m:    [1mnetwork vnet create[22m command [1m[32mOK[39m[22m
[33mazure_wrapper/task:[39m [90m{ todo: 
   [ [ 'storage',
       'account',
       'create',
       '--type=LRS',
       '--location=West Europe',
       '01b70fea4e35bf' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=etcd-00',
       '--ssh=2201',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=etcd-01',
       '--ssh=2202',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=etcd-02',
       '--ssh=2203',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=kube-00',
       '--ssh=2204',
       '--custom-data=./output/kubernetes-cluster-main-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=kube-01',
       '--ssh=2205',
       '--custom-data=./output/kubernetes-cluster-main-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=kube-02',
       '--ssh=2206',
       '--custom-data=./output/kubernetes-cluster-main-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ] ],
  done: 
   [ { code: 0,
       signal: null,
       what: 'network vnet create --location=West Europe --address-space=172.16.0.0 kube-internal-vnet-01b70fea4e35bf',
       remaining: 7 } ] }[39m
[33mazure_wrapper/exec:[39m [34m[ 'storage',
  'account',
  'create',
  '--type=LRS',
  '--location=West Europe',
  '01b70fea4e35bf' ][39m
[32minfo[39m:    Executing command [1mstorage account create[22m
                                                                               [36m-[39m Creating storage account[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m+
[32minfo[39m:    [1mstorage account create[22m command [1m[32mOK[39m[22m
[33mazure_wrapper/task:[39m [90m{ todo: 
   [ [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=etcd-00',
       '--ssh=2201',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=etcd-01',
       '--ssh=2202',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=etcd-02',
       '--ssh=2203',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=kube-00',
       '--ssh=2204',
       '--custom-data=./output/kubernetes-cluster-main-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=kube-01',
       '--ssh=2205',
       '--custom-data=./output/kubernetes-cluster-main-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=kube-02',
       '--ssh=2206',
       '--custom-data=./output/kubernetes-cluster-main-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ] ],
  done: 
   [ { code: 0,
       signal: null,
       what: 'network vnet create --location=West Europe --address-space=172.16.0.0 kube-internal-vnet-01b70fea4e35bf',
       remaining: 7 },
     { code: 0,
       signal: null,
       what: 'storage account create --type=LRS --location=West Europe 01b70fea4e35bf',
       remaining: 6 } ] }[39m
[33mazure_wrapper/exec:[39m [34m[ 'vm',
  'create',
  '--location=West Europe',
  '--vm-size=Small',
  '--connect=kube-01b70fea4e35bf',
  '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
  '--no-ssh-password',
  '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
  '--vm-name=etcd-00',
  '--ssh=2201',
  '--custom-data=./output/kubernetes-cluster-etcd-nodes_01b70fea4e35bf_generated.yml',
  '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
  'core' ][39m
[32minfo[39m:    Executing command [1mvm create[22m
                                                                               [36m-[39m Looking up image 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m+
                                                                               [36m/[39m Looking up virtual network[36m-[39m[36m\[39m[36m|[39m+
                                                                               [36m/[39m Looking up cloud service[36m-[39m[36m\[39m+
[32minfo[39m:    cloud service kube-01b70fea4e35bf not found.
                                                                               [36m|[39m Creating cloud service[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m+
                                                                               [36m-[39m Retrieving storage accounts[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m+
                                                                               [36m|[39m Configuring certificate[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m+
                                                                               [36m|[39m Creating VM[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m+
[32minfo[39m:    [1mvm create[22m command [1m[32mOK[39m[22m
[33mazure_wrapper/task:[39m [90m{ todo: 
   [ [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=etcd-01',
       '--ssh=2202',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=etcd-02',
       '--ssh=2203',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=kube-00',
       '--ssh=2204',
       '--custom-data=./output/kubernetes-cluster-main-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=kube-01',
       '--ssh=2205',
       '--custom-data=./output/kubernetes-cluster-main-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=kube-02',
       '--ssh=2206',
       '--custom-data=./output/kubernetes-cluster-main-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ] ],
  done: 
   [ { code: 0,
       signal: null,
       what: 'network vnet create --location=West Europe --address-space=172.16.0.0 kube-internal-vnet-01b70fea4e35bf',
       remaining: 7 },
     { code: 0,
       signal: null,
       what: 'storage account create --type=LRS --location=West Europe 01b70fea4e35bf',
       remaining: 6 },
     { code: 0,
       signal: null,
       what: 'vm create --location=West Europe --vm-size=Small --connect=kube-01b70fea4e35bf --virtual-network-name=kube-internal-vnet-01b70fea4e35bf --no-ssh-password --ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem --vm-name=etcd-00 --ssh=2201 --custom-data=./output/kubernetes-cluster-etcd-nodes_01b70fea4e35bf_generated.yml 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0 core',
       remaining: 5 } ] }[39m
[33mazure_wrapper/exec:[39m [34m[ 'vm',
  'create',
  '--location=West Europe',
  '--vm-size=Small',
  '--connect=kube-01b70fea4e35bf',
  '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
  '--no-ssh-password',
  '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
  '--vm-name=etcd-01',
  '--ssh=2202',
  '--custom-data=./output/kubernetes-cluster-etcd-nodes_01b70fea4e35bf_generated.yml',
  '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
  'core' ][39m
[32minfo[39m:    Executing command [1mvm create[22m
                                                                               [36m-[39m Looking up image 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m+
                                                                               [36m|[39m Looking up virtual network[36m/[39m[36m-[39m[36m\[39m+
                                                                               [36m|[39m Looking up cloud service[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m+
[33mwarn[39m:    --location option will be ignored
                                                                               [36m-[39m Getting cloud service properties[36m\[39m+
                                                                               [36m|[39m Looking up deployment[36m/[39m+
                                                                               [36m-[39m Retrieving storage accounts[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m+
                                                                               [36m\[39m Configuring certificate[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m+
                                                                               [36m-[39m Creating VM[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m+
[32minfo[39m:    [1mvm create[22m command [1m[32mOK[39m[22m
[33mazure_wrapper/task:[39m [90m{ todo: 
   [ [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=etcd-02',
       '--ssh=2203',
       '--custom-data=./output/kubernetes-cluster-etcd-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=kube-00',
       '--ssh=2204',
       '--custom-data=./output/kubernetes-cluster-main-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=kube-01',
       '--ssh=2205',
       '--custom-data=./output/kubernetes-cluster-main-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=kube-02',
       '--ssh=2206',
       '--custom-data=./output/kubernetes-cluster-main-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ] ],
  done: 
   [ { code: 0,
       signal: null,
       what: 'network vnet create --location=West Europe --address-space=172.16.0.0 kube-internal-vnet-01b70fea4e35bf',
       remaining: 7 },
     { code: 0,
       signal: null,
       what: 'storage account create --type=LRS --location=West Europe 01b70fea4e35bf',
       remaining: 6 },
     { code: 0,
       signal: null,
       what: 'vm create --location=West Europe --vm-size=Small --connect=kube-01b70fea4e35bf --virtual-network-name=kube-internal-vnet-01b70fea4e35bf --no-ssh-password --ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem --vm-name=etcd-00 --ssh=2201 --custom-data=./output/kubernetes-cluster-etcd-nodes_01b70fea4e35bf_generated.yml 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0 core',
       remaining: 5 },
     { code: 0,
       signal: null,
       what: 'vm create --location=West Europe --vm-size=Small --connect=kube-01b70fea4e35bf --virtual-network-name=kube-internal-vnet-01b70fea4e35bf --no-ssh-password --ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem --vm-name=etcd-01 --ssh=2202 --custom-data=./output/kubernetes-cluster-etcd-nodes_01b70fea4e35bf_generated.yml 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0 core',
       remaining: 4 } ] }[39m
[33mazure_wrapper/exec:[39m [34m[ 'vm',
  'create',
  '--location=West Europe',
  '--vm-size=Small',
  '--connect=kube-01b70fea4e35bf',
  '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
  '--no-ssh-password',
  '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
  '--vm-name=etcd-02',
  '--ssh=2203',
  '--custom-data=./output/kubernetes-cluster-etcd-nodes_01b70fea4e35bf_generated.yml',
  '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
  'core' ][39m
[32minfo[39m:    Executing command [1mvm create[22m
                                                                               [36m-[39m Looking up image 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m+
                                                                               [36m|[39m Looking up virtual network[36m/[39m[36m-[39m[36m\[39m+
                                                                               [36m|[39m Looking up cloud service[36m/[39m[36m-[39m+
[33mwarn[39m:    --location option will be ignored
                                                                               [36m\[39m Getting cloud service properties[36m|[39m+
                                                                               [36m/[39m Looking up deployment[36m-[39m+
                                                                               [36m\[39m Retrieving storage accounts[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m+
                                                                               [36m/[39m Configuring certificate[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m+
                                                                               [36m-[39m Creating VM[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m+
[32minfo[39m:    [1mvm create[22m command [1m[32mOK[39m[22m
[33mazure_wrapper/task:[39m [90m{ todo: 
   [ [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=kube-00',
       '--ssh=2204',
       '--custom-data=./output/kubernetes-cluster-main-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=kube-01',
       '--ssh=2205',
       '--custom-data=./output/kubernetes-cluster-main-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=kube-02',
       '--ssh=2206',
       '--custom-data=./output/kubernetes-cluster-main-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ] ],
  done: 
   [ { code: 0,
       signal: null,
       what: 'network vnet create --location=West Europe --address-space=172.16.0.0 kube-internal-vnet-01b70fea4e35bf',
       remaining: 7 },
     { code: 0,
       signal: null,
       what: 'storage account create --type=LRS --location=West Europe 01b70fea4e35bf',
       remaining: 6 },
     { code: 0,
       signal: null,
       what: 'vm create --location=West Europe --vm-size=Small --connect=kube-01b70fea4e35bf --virtual-network-name=kube-internal-vnet-01b70fea4e35bf --no-ssh-password --ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem --vm-name=etcd-00 --ssh=2201 --custom-data=./output/kubernetes-cluster-etcd-nodes_01b70fea4e35bf_generated.yml 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0 core',
       remaining: 5 },
     { code: 0,
       signal: null,
       what: 'vm create --location=West Europe --vm-size=Small --connect=kube-01b70fea4e35bf --virtual-network-name=kube-internal-vnet-01b70fea4e35bf --no-ssh-password --ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem --vm-name=etcd-01 --ssh=2202 --custom-data=./output/kubernetes-cluster-etcd-nodes_01b70fea4e35bf_generated.yml 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0 core',
       remaining: 4 },
     { code: 0,
       signal: null,
       what: 'vm create --location=West Europe --vm-size=Small --connect=kube-01b70fea4e35bf --virtual-network-name=kube-internal-vnet-01b70fea4e35bf --no-ssh-password --ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem --vm-name=etcd-02 --ssh=2203 --custom-data=./output/kubernetes-cluster-etcd-nodes_01b70fea4e35bf_generated.yml 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0 core',
       remaining: 3 } ] }[39m
[33mazure_wrapper/exec:[39m [34m[ 'vm',
  'create',
  '--location=West Europe',
  '--vm-size=Small',
  '--connect=kube-01b70fea4e35bf',
  '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
  '--no-ssh-password',
  '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
  '--vm-name=kube-00',
  '--ssh=2204',
  '--custom-data=./output/kubernetes-cluster-main-nodes_01b70fea4e35bf_generated.yml',
  '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
  'core' ][39m
[32minfo[39m:    Executing command [1mvm create[22m
                                                                               [36m-[39m Looking up image 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m+
                                                                               [36m|[39m Looking up virtual network[36m/[39m[36m-[39m[36m\[39m+
                                                                               [36m|[39m Looking up cloud service[36m/[39m[36m-[39m[36m\[39m+
[33mwarn[39m:    --location option will be ignored
                                                                               [36m|[39m Getting cloud service properties+
                                                                               [36m/[39m Looking up deployment[36m-[39m+
                                                                               [36m\[39m Retrieving storage accounts[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m+
                                                                               [36m|[39m Configuring certificate[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m+
                                                                               [36m-[39m Creating VM[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m+
[32minfo[39m:    [1mvm create[22m command [1m[32mOK[39m[22m
[33mazure_wrapper/task:[39m [90m{ todo: 
   [ [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=kube-01',
       '--ssh=2205',
       '--custom-data=./output/kubernetes-cluster-main-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=kube-02',
       '--ssh=2206',
       '--custom-data=./output/kubernetes-cluster-main-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ] ],
  done: 
   [ { code: 0,
       signal: null,
       what: 'network vnet create --location=West Europe --address-space=172.16.0.0 kube-internal-vnet-01b70fea4e35bf',
       remaining: 7 },
     { code: 0,
       signal: null,
       what: 'storage account create --type=LRS --location=West Europe 01b70fea4e35bf',
       remaining: 6 },
     { code: 0,
       signal: null,
       what: 'vm create --location=West Europe --vm-size=Small --connect=kube-01b70fea4e35bf --virtual-network-name=kube-internal-vnet-01b70fea4e35bf --no-ssh-password --ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem --vm-name=etcd-00 --ssh=2201 --custom-data=./output/kubernetes-cluster-etcd-nodes_01b70fea4e35bf_generated.yml 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0 core',
       remaining: 5 },
     { code: 0,
       signal: null,
       what: 'vm create --location=West Europe --vm-size=Small --connect=kube-01b70fea4e35bf --virtual-network-name=kube-internal-vnet-01b70fea4e35bf --no-ssh-password --ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem --vm-name=etcd-01 --ssh=2202 --custom-data=./output/kubernetes-cluster-etcd-nodes_01b70fea4e35bf_generated.yml 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0 core',
       remaining: 4 },
     { code: 0,
       signal: null,
       what: 'vm create --location=West Europe --vm-size=Small --connect=kube-01b70fea4e35bf --virtual-network-name=kube-internal-vnet-01b70fea4e35bf --no-ssh-password --ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem --vm-name=etcd-02 --ssh=2203 --custom-data=./output/kubernetes-cluster-etcd-nodes_01b70fea4e35bf_generated.yml 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0 core',
       remaining: 3 },
     { code: 0,
       signal: null,
       what: 'vm create --location=West Europe --vm-size=Small --connect=kube-01b70fea4e35bf --virtual-network-name=kube-internal-vnet-01b70fea4e35bf --no-ssh-password --ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem --vm-name=kube-00 --ssh=2204 --custom-data=./output/kubernetes-cluster-main-nodes_01b70fea4e35bf_generated.yml 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0 core',
       remaining: 2 } ] }[39m
[33mazure_wrapper/exec:[39m [34m[ 'vm',
  'create',
  '--location=West Europe',
  '--vm-size=Small',
  '--connect=kube-01b70fea4e35bf',
  '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
  '--no-ssh-password',
  '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
  '--vm-name=kube-01',
  '--ssh=2205',
  '--custom-data=./output/kubernetes-cluster-main-nodes_01b70fea4e35bf_generated.yml',
  '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
  'core' ][39m
[32minfo[39m:    Executing command [1mvm create[22m
                                                                               [36m-[39m Looking up image 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m+
                                                                               [36m|[39m Looking up virtual network[36m/[39m[36m-[39m[36m\[39m+
                                                                               [36m|[39m Looking up cloud service[36m/[39m[36m-[39m[36m\[39m+
[33mwarn[39m:    --location option will be ignored
                                                                               [36m|[39m Getting cloud service properties[36m/[39m[36m-[39m+
                                                                               [36m\[39m Looking up deployment+
                                                                               [36m|[39m Retrieving storage accounts[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m+
                                                                               [36m-[39m Configuring certificate[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m+
                                                                               [36m-[39m Creating VM[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m+
[32minfo[39m:    [1mvm create[22m command [1m[32mOK[39m[22m
[33mazure_wrapper/task:[39m [90m{ todo: 
   [ [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=kube-02',
       '--ssh=2206',
       '--custom-data=./output/kubernetes-cluster-main-nodes_01b70fea4e35bf_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ] ],
  done: 
   [ { code: 0,
       signal: null,
       what: 'network vnet create --location=West Europe --address-space=172.16.0.0 kube-internal-vnet-01b70fea4e35bf',
       remaining: 7 },
     { code: 0,
       signal: null,
       what: 'storage account create --type=LRS --location=West Europe 01b70fea4e35bf',
       remaining: 6 },
     { code: 0,
       signal: null,
       what: 'vm create --location=West Europe --vm-size=Small --connect=kube-01b70fea4e35bf --virtual-network-name=kube-internal-vnet-01b70fea4e35bf --no-ssh-password --ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem --vm-name=etcd-00 --ssh=2201 --custom-data=./output/kubernetes-cluster-etcd-nodes_01b70fea4e35bf_generated.yml 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0 core',
       remaining: 5 },
     { code: 0,
       signal: null,
       what: 'vm create --location=West Europe --vm-size=Small --connect=kube-01b70fea4e35bf --virtual-network-name=kube-internal-vnet-01b70fea4e35bf --no-ssh-password --ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem --vm-name=etcd-01 --ssh=2202 --custom-data=./output/kubernetes-cluster-etcd-nodes_01b70fea4e35bf_generated.yml 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0 core',
       remaining: 4 },
     { code: 0,
       signal: null,
       what: 'vm create --location=West Europe --vm-size=Small --connect=kube-01b70fea4e35bf --virtual-network-name=kube-internal-vnet-01b70fea4e35bf --no-ssh-password --ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem --vm-name=etcd-02 --ssh=2203 --custom-data=./output/kubernetes-cluster-etcd-nodes_01b70fea4e35bf_generated.yml 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0 core',
       remaining: 3 },
     { code: 0,
       signal: null,
       what: 'vm create --location=West Europe --vm-size=Small --connect=kube-01b70fea4e35bf --virtual-network-name=kube-internal-vnet-01b70fea4e35bf --no-ssh-password --ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem --vm-name=kube-00 --ssh=2204 --custom-data=./output/kubernetes-cluster-main-nodes_01b70fea4e35bf_generated.yml 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0 core',
       remaining: 2 },
     { code: 0,
       signal: null,
       what: 'vm create --location=West Europe --vm-size=Small --connect=kube-01b70fea4e35bf --virtual-network-name=kube-internal-vnet-01b70fea4e35bf --no-ssh-password --ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem --vm-name=kube-01 --ssh=2205 --custom-data=./output/kubernetes-cluster-main-nodes_01b70fea4e35bf_generated.yml 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0 core',
       remaining: 1 } ] }[39m
[33mazure_wrapper/exec:[39m [34m[ 'vm',
  'create',
  '--location=West Europe',
  '--vm-size=Small',
  '--connect=kube-01b70fea4e35bf',
  '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
  '--no-ssh-password',
  '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
  '--vm-name=kube-02',
  '--ssh=2206',
  '--custom-data=./output/kubernetes-cluster-main-nodes_01b70fea4e35bf_generated.yml',
  '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
  'core' ][39m
[32minfo[39m:    Executing command [1mvm create[22m
                                                                               [36m-[39m Looking up image 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m+
                                                                               [36m|[39m Looking up virtual network[36m/[39m[36m-[39m[36m\[39m+
                                                                               [36m|[39m Looking up cloud service[36m/[39m[36m-[39m[36m\[39m+
[33mwarn[39m:    --location option will be ignored
                                                                               [36m|[39m Getting cloud service properties[36m/[39m+
                                                                               [36m-[39m Looking up deployment[36m\[39m+
                                                                               [36m|[39m Retrieving storage accounts[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m+
                                                                               [36m|[39m Configuring certificate[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m+
                                                                               [36m\[39m Creating VM[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m+
[32minfo[39m:    [1mvm create[22m command [1m[32mOK[39m[22m
[33mazure_wrapper/task:[39m [90m{ todo: [],
  done: 
   [ { code: 0,
       signal: null,
       what: 'network vnet create --location=West Europe --address-space=172.16.0.0 kube-internal-vnet-01b70fea4e35bf',
       remaining: 7 },
     { code: 0,
       signal: null,
       what: 'storage account create --type=LRS --location=West Europe 01b70fea4e35bf',
       remaining: 6 },
     { code: 0,
       signal: null,
       what: 'vm create --location=West Europe --vm-size=Small --connect=kube-01b70fea4e35bf --virtual-network-name=kube-internal-vnet-01b70fea4e35bf --no-ssh-password --ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem --vm-name=etcd-00 --ssh=2201 --custom-data=./output/kubernetes-cluster-etcd-nodes_01b70fea4e35bf_generated.yml 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0 core',
       remaining: 5 },
     { code: 0,
       signal: null,
       what: 'vm create --location=West Europe --vm-size=Small --connect=kube-01b70fea4e35bf --virtual-network-name=kube-internal-vnet-01b70fea4e35bf --no-ssh-password --ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem --vm-name=etcd-01 --ssh=2202 --custom-data=./output/kubernetes-cluster-etcd-nodes_01b70fea4e35bf_generated.yml 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0 core',
       remaining: 4 },
     { code: 0,
       signal: null,
       what: 'vm create --location=West Europe --vm-size=Small --connect=kube-01b70fea4e35bf --virtual-network-name=kube-internal-vnet-01b70fea4e35bf --no-ssh-password --ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem --vm-name=etcd-02 --ssh=2203 --custom-data=./output/kubernetes-cluster-etcd-nodes_01b70fea4e35bf_generated.yml 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0 core',
       remaining: 3 },
     { code: 0,
       signal: null,
       what: 'vm create --location=West Europe --vm-size=Small --connect=kube-01b70fea4e35bf --virtual-network-name=kube-internal-vnet-01b70fea4e35bf --no-ssh-password --ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem --vm-name=kube-00 --ssh=2204 --custom-data=./output/kubernetes-cluster-main-nodes_01b70fea4e35bf_generated.yml 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0 core',
       remaining: 2 },
     { code: 0,
       signal: null,
       what: 'vm create --location=West Europe --vm-size=Small --connect=kube-01b70fea4e35bf --virtual-network-name=kube-internal-vnet-01b70fea4e35bf --no-ssh-password --ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem --vm-name=kube-01 --ssh=2205 --custom-data=./output/kubernetes-cluster-main-nodes_01b70fea4e35bf_generated.yml 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0 core',
       remaining: 1 },
     { code: 0,
       signal: null,
       what: 'vm create --location=West Europe --vm-size=Small --connect=kube-01b70fea4e35bf --virtual-network-name=kube-internal-vnet-01b70fea4e35bf --no-ssh-password --ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem --vm-name=kube-02 --ssh=2206 --custom-data=./output/kubernetes-cluster-main-nodes_01b70fea4e35bf_generated.yml 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0 core',
       remaining: 0 } ] }[39m
[33mazure_wrapper/info:[39m [32mSaved SSH config, you can use it like so: `ssh -F  ./output/kube_01b70fea4e35bf_ssh_conf <hostname>`[39m
[33mazure_wrapper/info:[39m [32mThe hosts in this deployment are:
[39m [ 'etcd-00', 'etcd-01', 'etcd-02', 'kube-00', 'kube-01', 'kube-02' ]
[33mazure_wrapper/info: Saved state into `./output/kube_01b70fea4e35bf_deployment.yml`[39m
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# ^C
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# ssh -F  ./output/kube_01b70fea4e35bf_ssh_conf kube-00
Core[38;5;206mO[38;5;45mS[39m stable (647.2.0)
Update Strategy: [31mNo Reboots[39m
]0;core@kube-00:~[?1034h[01;32mcore@kube-00[01;34m ~ $[00m kubectl get nodes
NAME      LABELS                           STATUS
kube-01   kubernetes.io/hostname=kube-01   Ready
kube-02   kubernetes.io/hostname=kube-02   Ready
]0;core@kube-00:~[01;32mcore@kube-00[01;34m ~ $[00m cd guestbook-example
]0;core@kube-00:~/guestbook-example[01;32mcore@kube-00[01;34m ~/guestbook-example $[00m kubectl create -f redis-master-controller.json
replicationcontrollers/redis-master
]0;core@kube-00:~/guestbook-example[01;32mcore@kube-00[01;34m ~/guestbook-example $[00m [Kkubectl create -f redis-master-service.json
services/redis-master
]0;core@kube-00:~/guestbook-example[01;32mcore@kube-00[01;34m ~/guestbook-example $[00m [Kkubectl create -f redis-slave-controller.json
replicationcontrollers/redis-slave
]0;core@kube-00:~/guestbook-example[01;32mcore@kube-00[01;34m ~/guestbook-example $[00m [Kkubectl create -f redis-slave-service.json
services/redis-slave
]0;core@kube-00:~/guestbook-example[01;32mcore@kube-00[01;34m ~/guestbook-example $[00m [Kkubectl create -f frontend-controller.json
replicationcontrollers/frontend
]0;core@kube-00:~/guestbook-example[01;32mcore@kube-00[01;34m ~/guestbook-example $[00m [Kkubectl create -f frontend-service.json
services/frontend
]0;core@kube-00:~/guestbook-example[01;32mcore@kube-00[01;34m ~/guestbook-example $[00m [Kkubectl get pods --watch
POD                             IP        CONTAINER(S)            IMAGE(S)                                             HOST       LABELS              STATUS    CREATED      MESSAGE
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>              Pending   1 seconds    
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                         
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>              Pending   1 seconds    
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                         
frontend-a8fr7                                                                                                         kube-02/   name=frontend       Pending   45 seconds   
                                          php-redis               kubernetes/example-guestbook-php-redis:v2                                                                  
frontend-hmcij                                                                                                         kube-02/   name=frontend       Pending   45 seconds   
                                          php-redis               kubernetes/example-guestbook-php-redis:v2                                                                  
frontend-qzrmv                                                                                                         kube-01/   name=frontend       Pending   45 seconds   
                                          php-redis               kubernetes/example-guestbook-php-redis:v2                                                                  
redis-master-2ga9n                                                                                                     kube-01/   name=redis-master   Pending   55 seconds   
                                          master                  redis                                                                                                      
redis-slave-vlfxu                                                                                                      kube-02/   name=redis-slave    Pending   47 seconds   
                                          slave                   kubernetes/redis-slave:v2                                                                                  
redis-slave-zhv74                                                                                                      kube-01/   name=redis-slave    Pending   47 seconds   
                                          slave                   kubernetes/redis-slave:v2                                                                                  
POD                             IP        CONTAINER(S)            IMAGE(S)                                             HOST       LABELS    STATUS    CREATED     MESSAGE
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   3 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   2 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   3 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   2 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   2 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   2 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   2 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   2 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
c^[[Afluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
^C]0;core@kube-00:~/guestbook-example[01;32mcore@kube-00[01;34m ~/guestbook-example $[00m [Kkubectl get pods --watch^C
]0;core@kube-00:~/guestbook-example[01;32mcore@kube-00[01;34m ~/guestbook-example $[00m [Kls -la 
total 68
drwxr-x--- 4 core core  4096 Jul  3 14:52 [0m[01;34m.[0m
drwxr-xr-x 4 core core  4096 Jul  3 14:52 [01;34m..[0m
-rw-r----- 1 core core 25160 May 30 00:12 README.md
-rw-r----- 1 core core   780 May 30 00:12 frontend-controller.json
-rw-r----- 1 core core   343 Jul  3 14:52 frontend-service.json
drwxr-x--- 2 core core  4096 May 30 00:12 [01;34mphp-redis[0m
-rw-r----- 1 core core   759 May 30 00:12 redis-master-controller.json
-rw-r----- 1 core core   359 May 30 00:12 redis-master-service.json
drwxr-x--- 2 core core  4096 May 30 00:12 [01;34mredis-slave[0m
-rw-r----- 1 core core   774 May 30 00:12 redis-slave-controller.json
-rw-r----- 1 core core   356 May 30 00:12 redis-slave-service.json
]0;core@kube-00:~/guestbook-example[01;32mcore@kube-00[01;34m ~/guestbook-example $[00m vi frontend-controller.json 
[?1049h[?1h=[1;43r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[43;1H"frontend-controller.json" 37L, 780C[1;1H{
   "kind":"ReplicationController",
   "apiVersion":"v1beta3",
   "metadata":{[5;7H"name":"frontend",[6;7H"labels":{[7;10H"name":"frontend"[8;7H}
   },
   "spec":{[11;7H"replicas":3,[12;7H"selector":{[13;10H"name":"frontend"[14;7H},[15;7H"template":{[16;10H"metadata":{[17;13H"labels":{[18;16H"name":"frontend"[19;13H}[20;10H},[21;10H"spec":{[22;13H"containers":[[23;16H{[24;19H"name":"php-redis",[25;19H"image":"kubernetes/example-guestbook-php-redis:v2",[26;19H"ports":[[27;22H{[28;25H"containerPort":80,[29;25H"protocol":"TCP"[30;22H}[31;19H][32;16H}[33;13H][34;10H}[35;7H}
   }
}
[1m[34m~                                                                                                                                                 [39;1H~                                                                                                                                                 [40;1H~                                                                                                                                                 [41;1H~                                                                                                                                                 [42;1H~                                                                                                                                                 [1;1H[?12l[?25h[?25l[m[43;1H[K[43;1H:[?12l[?25h![?25l[43;2H[K[43;2H[?12l[?25hq![?25l[43;1H[K[43;1H[?1l>[?12l[?25h[?1049l]0;core@kube-00:~/guestbook-example[01;32mcore@kube-00[01;34m ~/guestbook-example $[00m [Kkubectl get rc
CONTROLLER     CONTAINER(S)   IMAGE(S)                                    SELECTOR            REPLICAS
frontend       php-redis      kubernetes/example-guestbook-php-redis:v2   name=frontend       3
redis-master   master         redis                                       name=redis-master   1
redis-slave    slave          kubernetes/redis-slave:v2                   name=redis-slave    2
]0;core@kube-00:~/guestbook-example[01;32mcore@kube-00[01;34m ~/guestbook-example $[00m kubectl get rcvi frontend-controller.json ls -la [Kkubectl get pods --watch
POD                             IP         CONTAINER(S)            IMAGE(S)                                             HOST                  LABELS              STATUS    CREATED      MESSAGE
fluentd-elasticsearch-kube-01                                                                                           kube-01/              <none>              Pending   1 seconds    
                                           fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                                    
fluentd-elasticsearch-kube-02                                                                                           kube-02/              <none>              Pending   1 seconds    
                                           fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                                    
frontend-a8fr7                  10.2.2.5                                                                                kube-02/172.18.0.14   name=frontend       Running   4 minutes    
                                           php-redis               kubernetes/example-guestbook-php-redis:v2                                                      Running   21 seconds   
frontend-hmcij                  10.2.2.6                                                                                kube-02/172.18.0.14   name=frontend       Running   4 minutes    
                                           php-redis               kubernetes/example-guestbook-php-redis:v2                                                      Running   21 seconds   
frontend-qzrmv                                                                                                          kube-01/              name=frontend       Pending   4 minutes    
                                           php-redis               kubernetes/example-guestbook-php-redis:v2                                                                             
redis-master-2ga9n              10.2.1.4                                                                                kube-01/172.18.0.13   name=redis-master   Running   4 minutes    
                                           master                  redis                                                                                          Running   3 minutes    
redis-slave-vlfxu               10.2.2.4                                                                                kube-02/172.18.0.14   name=redis-slave    Running   4 minutes    
                                           slave                   kubernetes/redis-slave:v2                                                                      Running   2 minutes    
redis-slave-zhv74               10.2.1.5                                                                                kube-01/172.18.0.13   name=redis-slave    Running   4 minutes    
                                           slave                   kubernetes/redis-slave:v2                                                                      Running   2 minutes    
POD                             IP        CONTAINER(S)            IMAGE(S)                                             HOST       LABELS    STATUS    CREATED     MESSAGE
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   Less than a second   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                       
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-01                                                                                          kube-01/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
fluentd-elasticsearch-kube-02                                                                                          kube-02/   <none>    Pending   1 seconds   
                                          fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                              
^C]0;core@kube-00:~/guestbook-example[01;32mcore@kube-00[01;34m ~/guestbook-example $[00m [Kkubectl get pods --watch       
POD                             IP         CONTAINER(S)            IMAGE(S)                                             HOST                  LABELS              STATUS    CREATED      MESSAGE
fluentd-elasticsearch-kube-01                                                                                           kube-01/              <none>              Pending   1 seconds    
                                           fluentd-elasticsearch   gcr.io/google_containers/fluentd-elasticsearch:1.5                                                                    
frontend-a8fr7                  10.2.2.5                                                                                kube-02/172.18.0.14   name=frontend       Running   4 minutes    
                                           php-redis               kubernetes/example-guestbook-php-redis:v2                                                      Running   38 seconds   
frontend-hmcij                  10.2.2.6                                                                                kube-02/172.18.0.14   name=frontend       Running   4 minutes    
                                           php-redis               kubernetes/example-guestbook-php-redis:v2                                                      Running   38 seconds   
frontend-qzrmv                                                                                                          kube-01/              name=frontend       Pending   4 minutes    
                                           php-redis               kubernetes/example-guestbook-php-redis:v2                                                                             
redis-master-2ga9n              10.2.1.4                                                                                kube-01/172.18.0.13   name=redis-master   Running   5 minutes    
                                           master                  redis                                                                                          Running   3 minutes    
redis-slave-vlfxu               10.2.2.4                                                                                kube-02/172.18.0.14   name=redis-slave    Running   4 minutes    
                                           slave                   kubernetes/redis-slave:v2                                                                      Running   2 minutes    
redis-slave-zhv74               10.2.1.5                                                                                kube-01/172.18.0.13   name=redis-slave    Running   4 minutes    
                                           slave                   kubernetes/redis-slave:v2                                                                      Running   2 minutes    
]0;core@kube-00:~/guestbook-example[01;32mcore@kube-00[01;34m ~/guestbook-example $[00m [Kkubectl get rc
CONTROLLER     CONTAINER(S)   IMAGE(S)                                    SELECTOR            REPLICAS
frontend       php-redis      kubernetes/example-guestbook-php-redis:v2   name=frontend       3
redis-master   master         redis                                       name=redis-master   1
redis-slave    slave          kubernetes/redis-slave:v2                   name=redis-slave    2
]0;core@kube-00:~/guestbook-example[01;32mcore@kube-00[01;34m ~/guestbook-example $[00m logout
[H[2JConnection to kube-01b70fea4e35bf.cloudapp.net closed.
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# (reverse-i-search)`': [Ka': ssh -F  ./output/kube_01b70fea4e35bf_ssh_conf kube-00[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cz': cd azure/[K[1@u[C[C[C[C[C[C[1@r[C[C[C[C[C[C[1@e[C[C[C[C[C[C^C
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# (reverse-i-search)`': [Kl': ./create-kubernetes-cluster.js[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[3Po': cd cloud_config_templates/g': vi ./lib/deployment_logic/kubernetes.js[1@i[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cn': ./azure-login.js -u david.lalonde@GISCanada.onmicrosoft.com[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# ./azure-login.js -u david.lalonde@GISCanada.onmicrosoft.com
[32minfo[39m:    Executing command [1mlogin[22m
[33mwarn[39m:    Please note that currently you can login only via Microsoft organizational account or service principal. For instructions on how to set them up, please read http://aka.ms/Dhf67j.
Password: ****    *********
                                                                               [36m-[39m Authenticating...[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[32minfo[39m:    Added subscription CA-Canada TBC-GIS Canada
[32minfo[39m:    Setting subscription CA-Canada TBC-GIS Canada as default
+
[32minfo[39m:    [1mlogin[22m command [1m[32mOK[39m[22m
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# ./scale-kubernetes-cluster.js  ./output/kube_01b70fea4e35bf_deploymen t.yml 2
[33mazure_wrapper/info: Loaded state from `./output/kube_01b70fea4e35bf_deployment.yml`[39m
[33mazure_wrapper/task:[39m [90m{ todo: 
   [ [],
     [],
     [],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=kube-03',
       '--ssh=2207',
       '--custom-data=./output/kubernetes-cluster-main-nodes_8260e3b6edf10f_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=kube-04',
       '--ssh=2208',
       '--custom-data=./output/kubernetes-cluster-main-nodes_8260e3b6edf10f_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ] ],
  done: [] }[39m
[33mazure_wrapper/task:[39m [90m{ todo: 
   [ [],
     [],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=kube-03',
       '--ssh=2207',
       '--custom-data=./output/kubernetes-cluster-main-nodes_8260e3b6edf10f_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=kube-04',
       '--ssh=2208',
       '--custom-data=./output/kubernetes-cluster-main-nodes_8260e3b6edf10f_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ] ],
  done: [] }[39m
[33mazure_wrapper/task:[39m [90m{ todo: 
   [ [],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=kube-03',
       '--ssh=2207',
       '--custom-data=./output/kubernetes-cluster-main-nodes_8260e3b6edf10f_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=kube-04',
       '--ssh=2208',
       '--custom-data=./output/kubernetes-cluster-main-nodes_8260e3b6edf10f_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ] ],
  done: [] }[39m
[33mazure_wrapper/task:[39m [90m{ todo: 
   [ [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=kube-03',
       '--ssh=2207',
       '--custom-data=./output/kubernetes-cluster-main-nodes_8260e3b6edf10f_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ],
     [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=kube-04',
       '--ssh=2208',
       '--custom-data=./output/kubernetes-cluster-main-nodes_8260e3b6edf10f_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ] ],
  done: [] }[39m
[33mazure_wrapper/exec:[39m [34m[ 'vm',
  'create',
  '--location=West Europe',
  '--vm-size=Small',
  '--connect=kube-01b70fea4e35bf',
  '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
  '--no-ssh-password',
  '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
  '--vm-name=kube-03',
  '--ssh=2207',
  '--custom-data=./output/kubernetes-cluster-main-nodes_8260e3b6edf10f_generated.yml',
  '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
  'core' ][39m
[32minfo[39m:    Executing command [1mvm create[22m
                                                                               [36m-[39m Looking up image 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m+
                                                                               [36m|[39m Looking up virtual network[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m+
                                                                               [36m|[39m Looking up cloud service[36m/[39m[36m-[39m+
[33mwarn[39m:    --location option will be ignored
                                                                               [36m\[39m Getting cloud service properties+
                                                                               [36m|[39m Looking up deployment[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m+
                                                                               [36m|[39m Retrieving storage accounts[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m+
                                                                               [36m/[39m Configuring certificate[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m+
                                                                               [36m\[39m Creating VM[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m+
[32minfo[39m:    [1mvm create[22m command [1m[32mOK[39m[22m
[33mazure_wrapper/task:[39m [90m{ todo: 
   [ [ 'vm',
       'create',
       '--location=West Europe',
       '--vm-size=Small',
       '--connect=kube-01b70fea4e35bf',
       '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
       '--no-ssh-password',
       '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
       '--vm-name=kube-04',
       '--ssh=2208',
       '--custom-data=./output/kubernetes-cluster-main-nodes_8260e3b6edf10f_generated.yml',
       '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
       'core' ] ],
  done: 
   [ { code: 0,
       signal: null,
       what: 'vm create --location=West Europe --vm-size=Small --connect=kube-01b70fea4e35bf --virtual-network-name=kube-internal-vnet-01b70fea4e35bf --no-ssh-password --ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem --vm-name=kube-03 --ssh=2207 --custom-data=./output/kubernetes-cluster-main-nodes_8260e3b6edf10f_generated.yml 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0 core',
       remaining: 1 } ] }[39m
[33mazure_wrapper/exec:[39m [34m[ 'vm',
  'create',
  '--location=West Europe',
  '--vm-size=Small',
  '--connect=kube-01b70fea4e35bf',
  '--virtual-network-name=kube-internal-vnet-01b70fea4e35bf',
  '--no-ssh-password',
  '--ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem',
  '--vm-name=kube-04',
  '--ssh=2208',
  '--custom-data=./output/kubernetes-cluster-main-nodes_8260e3b6edf10f_generated.yml',
  '2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0',
  'core' ][39m
[32minfo[39m:    Executing command [1mvm create[22m
                                                                               [36m-[39m Looking up image 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m+
                                                                               [36m|[39m Looking up virtual network[36m/[39m[36m-[39m[36m\[39m+
                                                                               [36m|[39m Looking up cloud service[36m/[39m[36m-[39m[36m\[39m+
[33mwarn[39m:    --location option will be ignored
                                                                               [36m|[39m Getting cloud service properties+
                                                                               [36m/[39m Looking up deployment[36m-[39m+
                                                                               [36m\[39m Retrieving storage accounts[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m+
                                                                               [36m|[39m Configuring certificate[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m+
                                                                               [36m-[39m Creating VM[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m[36m-[39m[36m\[39m[36m|[39m[36m/[39m+
[32minfo[39m:    [1mvm create[22m command [1m[32mOK[39m[22m
[33mazure_wrapper/task:[39m [90m{ todo: [],
  done: 
   [ { code: 0,
       signal: null,
       what: 'vm create --location=West Europe --vm-size=Small --connect=kube-01b70fea4e35bf --virtual-network-name=kube-internal-vnet-01b70fea4e35bf --no-ssh-password --ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem --vm-name=kube-03 --ssh=2207 --custom-data=./output/kubernetes-cluster-main-nodes_8260e3b6edf10f_generated.yml 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0 core',
       remaining: 1 },
     { code: 0,
       signal: null,
       what: 'vm create --location=West Europe --vm-size=Small --connect=kube-01b70fea4e35bf --virtual-network-name=kube-internal-vnet-01b70fea4e35bf --no-ssh-password --ssh-cert=./output/kube_01b70fea4e35bf_ssh.pem --vm-name=kube-04 --ssh=2208 --custom-data=./output/kubernetes-cluster-main-nodes_8260e3b6edf10f_generated.yml 2b171e93f07c4903bcad35bda10acf22__CoreOS-Stable-647.2.0 core',
       remaining: 0 } ] }[39m
[33mazure_wrapper/info:[39m [32mSaved SSH config, you can use it like so: `ssh -F  ./output/kube_8260e3b6edf10f_ssh_conf <hostname>`[39m
[33mazure_wrapper/info:[39m [32mThe hosts in this deployment are:
[39m [ 'etcd-00',
  'etcd-01',
  'etcd-02',
  'kube-00',
  'kube-01',
  'kube-02',
  'kube-03',
  'kube-04' ]
[33mazure_wrapper/info: Saved state into `./output/kube_8260e3b6edf10f_deployment.yml`[39m
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# ./scale-kubernetes-cluster.js  ./output/kube_01b70fea4e35bf_deploymentt.yml 2[A]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# [C[C[10Pazure-login.js -u david.lalonde@GISCanada.onmicrosoft.com
[K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[6Pssh -F  ./output/kube_01b70fea4e35bf_ssh_conf kube-00[23P./create-kubernetes-cluster.jscd ..[Kls -la[1P s-lcd azure/[4P..vi kubernetes-cluster-main-nodes-template.ymlls -la[Kcd cloud_config_templates/ls -al[Kla[1Pcd ..ls -lavi kube_f6890077aed0e2_deployment.yml^C
]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# (reverse-i-search)`': [Ks': ./scale-kubernetes-cluster.js  ./output/kube_01b70fea4e35bf_deployment.yml 2[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[22Ps': ssh -F  ./output/kube_01b70fea4e35bf_ssh_conf kube-00[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1@h[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C]0;root@dlscusvmtest1: /opt/kubernetes/docs/getting-started-guides/coreos/azureroot@dlscusvmtest1:/opt/kubernetes/docs/getting-started-guides/coreos/azure# ssh -F  ./output/kube_01b70fea4e35bf_ssh_conf kube-00
Last login: Fri Jul  3 15:11:50 2015 from 23.101.187.162
Core[38;5;206mO[38;5;45mS[39m stable (647.2.0)
Update Strategy: [31mNo Reboots[39m
]0;core@kube-00:~[?1034h[01;32mcore@kube-00[01;34m ~ $[00m kubectl get rcpwd
error: no resource "rcpwd" has been defined
]0;core@kube-00:~[01;32mcore@kube-00[01;34m ~ $[00m kubectl get rcpwd[Kpwd   
CONTROLLER     CONTAINER(S)   IMAGE(S)                                    SELECTOR            REPLICAS
frontend       php-redis      kubernetes/example-guestbook-php-redis:v2   name=frontend       3
redis-master   master         redis                                       name=redis-master   1
redis-slave    slave          kubernetes/redis-slave:v2                   name=redis-slave    2
]0;core@kube-00:~[01;32mcore@kube-00[01;34m ~ $[00m  kubectl get nodes
NAME      LABELS                           STATUS
kube-01   kubernetes.io/hostname=kube-01   Ready
kube-02   kubernetes.io/hostname=kube-02   Ready
kube-03   kubernetes.io/hostname=kube-03   Ready
kube-04   kubernetes.io/hostname=kube-04   Ready
]0;core@kube-00:~[01;32mcore@kube-00[01;34m ~ $[00m kubectl scale --replicas=4 rc redis-slave
scaled
]0;core@kube-00:~[01;32mcore@kube-00[01;34m ~ $[00m [Kkubectl scale --replicas=4 rc frontend
scaled
]0;core@kube-00:~[01;32mcore@kube-00[01;34m ~ $[00m [Kkubectl get rc
CONTROLLER     CONTAINER(S)   IMAGE(S)                                    SELECTOR            REPLICAS
frontend       php-redis      kubernetes/example-guestbook-php-redis:v2   name=frontend       4
redis-master   master         redis                                       name=redis-master   1
redis-slave    slave          kubernetes/redis-slave:v2                   name=redis-slave    4
]0;core@kube-00:~[01;32mcore@kube-00[01;34m ~ $[00m kubectl get pods -l name=frontend
POD              IP         CONTAINER(S)   IMAGE(S)                                    HOST                  LABELS          STATUS    CREATED          MESSAGE
frontend-1u17c                                                                         kube-03/              name=frontend   Pending   About a minute   
                            php-redis      kubernetes/example-guestbook-php-redis:v2                                                                    
frontend-a8fr7   10.2.2.5                                                              kube-02/172.18.0.14   name=frontend   Running   47 minutes       
                            php-redis      kubernetes/example-guestbook-php-redis:v2                                         Running   43 minutes       
frontend-hmcij   10.2.2.6                                                              kube-02/172.18.0.14   name=frontend   Running   47 minutes       
                            php-redis      kubernetes/example-guestbook-php-redis:v2                                         Running   43 minutes       
frontend-qzrmv   10.2.1.6                                                              kube-01/172.18.0.13   name=frontend   Running   47 minutes       
                            php-redis      kubernetes/example-guestbook-php-redis:v2                                         Running   42 minutes       
]0;core@kube-00:~[01;32mcore@kube-00[01;34m ~ $[00m [Kkubectl get pods -l name=frontend
POD              IP         CONTAINER(S)   IMAGE(S)                                    HOST                  LABELS          STATUS    CREATED      MESSAGE
frontend-1u17c                                                                         kube-03/              name=frontend   Pending   2 minutes    
                            php-redis      kubernetes/example-guestbook-php-redis:v2                                                                
frontend-a8fr7   10.2.2.5                                                              kube-02/172.18.0.14   name=frontend   Running   48 minutes   
                            php-redis      kubernetes/example-guestbook-php-redis:v2                                         Running   44 minutes   
frontend-hmcij   10.2.2.6                                                              kube-02/172.18.0.14   name=frontend   Running   48 minutes   
                            php-redis      kubernetes/example-guestbook-php-redis:v2                                         Running   44 minutes   
frontend-qzrmv   10.2.1.6                                                              kube-01/172.18.0.13   name=frontend   Running   48 minutes   
                            php-redis      kubernetes/example-guestbook-php-redis:v2                                         Running   43 minutes   
]0;core@kube-00:~[01;32mcore@kube-00[01;34m ~ $[00m [Kkubectl get pods -l name=frontend
POD              IP         CONTAINER(S)   IMAGE(S)                                    HOST                  LABELS          STATUS    CREATED      MESSAGE
frontend-1u17c                                                                         kube-03/              name=frontend   Pending   3 minutes    
                            php-redis      kubernetes/example-guestbook-php-redis:v2                                                                
frontend-a8fr7   10.2.2.5                                                              kube-02/172.18.0.14   name=frontend   Running   49 minutes   
                            php-redis      kubernetes/example-guestbook-php-redis:v2                                         Running   45 minutes   
frontend-hmcij   10.2.2.6                                                              kube-02/172.18.0.14   name=frontend   Running   49 minutes   
                            php-redis      kubernetes/example-guestbook-php-redis:v2                                         Running   45 minutes   
frontend-qzrmv   10.2.1.6                                                              kube-01/172.18.0.13   name=frontend   Running   49 minutes   
                            php-redis      kubernetes/example-guestbook-php-redis:v2                                         Running   44 minutes   
]0;core@kube-00:~[01;32mcore@kube-00[01;34m ~ $[00m [Kkubectl get pods -l name=frontend
POD              IP         CONTAINER(S)   IMAGE(S)                                    HOST                  LABELS          STATUS    CREATED      MESSAGE
frontend-1u17c   10.2.3.5                                                              kube-03/172.18.0.20   name=frontend   Running   6 minutes    
                            php-redis      kubernetes/example-guestbook-php-redis:v2                                         Running   2 minutes    
frontend-a8fr7   10.2.2.5                                                              kube-02/172.18.0.14   name=frontend   Running   52 minutes   
                            php-redis      kubernetes/example-guestbook-php-redis:v2                                         Running   48 minutes   
frontend-hmcij   10.2.2.6                                                              kube-02/172.18.0.14   name=frontend   Running   52 minutes   
                            php-redis      kubernetes/example-guestbook-php-redis:v2                                         Running   48 minutes   
frontend-qzrmv   10.2.1.6                                                              kube-01/172.18.0.13   name=frontend   Running   52 minutes   
                            php-redis      kubernetes/example-guestbook-php-redis:v2                                         Running   47 minutes   
]0;core@kube-00:~[01;32mcore@kube-00[01;34m ~ $[00m [Kkubectl get pods -l name=frontend^C
]0;core@kube-00:~[01;32mcore@kube-00[01;34m ~ $[00m [Kke ubectl
kubectl controls the Kubernetes cluster manager.

Find more information at https://github.com/GoogleCloudPlatform/kubernetes.

Usage: 
  kubectl [flags]
  kubectl [command]

Available Commands: 
  get            Display one or many resources
  describe       Show details of a specific resource
  create         Create a resource by filename or stdin
  update         Update a resource by filename or stdin.
  delete         Delete a resource by filename, stdin, resource and ID, or by resources and label selector.
  namespace      SUPERCEDED: Set and view the current Kubernetes namespace
  logs           Print the logs for a container in a pod.
  rolling-update Perform a rolling update of the given ReplicationController.
  scale          Set a new size for a Replication Controller.
  exec           Execute a command in a container.
  port-forward   Forward one or more local ports to a pod.
  proxy          Run a proxy to the Kubernetes API server
  run            Run a particular image on the cluster.
  stop           Gracefully shut down a resource by id or filename.
  expose         Take a replicated application and expose it as Kubernetes Service
  label          Update the labels on a resource
  config         config modifies kubeconfig files
  cluster-info   Display cluster info
  api-versions   Print available API versions.
  version        Print the client and server version information.
  help           Help about any command

Flags:
      --alsologtostderr=false: log to standard error as well as files
      --api-version="": The API version to use when talking to the server
      --certificate-authority="": Path to a cert. file for the certificate authority.
      --client-certificate="": Path to a client key file for TLS.
      --client-key="": Path to a client key file for TLS.
      --cluster="": The name of the kubeconfig cluster to use
      --context="": The name of the kubeconfig context to use
  -h, --help=false: help for kubectl
      --insecure-skip-tls-verify=false: If true, the server's certificate will not be checked for validity. This will make your HTTPS connections insecure.
      --kubeconfig="": Path to the kubeconfig file to use for CLI requests.
      --log-backtrace-at=:0: when logging hits line file:N, emit a stack trace
      --log-dir=: If non-empty, write log files in this directory
      --log-flush-frequency=5s: Maximum number of seconds between log flushes
      --logtostderr=true: log to standard error instead of files
      --match-server-version=false: Require server version to match client version
      --namespace="": If present, the namespace scope for this CLI request.
      --password="": Password for basic authentication to the API server.
  -s, --server="": The address and port of the Kubernetes API server
      --stderrthreshold=2: logs at or above this threshold go to stderr
      --token="": Bearer token for authentication to the API server.
      --user="": The name of the kubeconfig user to use
      --username="": Username for basic authentication to the API server.
      --v=0: log level for V logs
      --validate=false: If true, use a schema to validate the input before sending it
      --vmodule=: comma-separated list of pattern=N settings for file-filtered logging


Use "kubectl help [command]" for more information about a command.

]0;core@kube-00:~[01;32mcore@kube-00[01;34m ~ $[00m kubectl
kubectl controls the Kubernetes cluster manager.

Find more information at https://github.com/GoogleCloudPlatform/kubernetes.

Usage: 
  kubectl [flags]
  kubectl [command]

Available Commands: 
  get            Display one or many resources
  describe       Show details of a specific resource
  create         Create a resource by filename or stdin
  update         Update a resource by filename or stdin.
  delete         Delete a resource by filename, stdin, resource and ID, or by resources and label selector.
  namespace      SUPERCEDED: Set and view the current Kubernetes namespace
  logs           Print the logs for a container in a pod.
  rolling-update Perform a rolling update of the given ReplicationController.
  scale          Set a new size for a Replication Controller.
  exec           Execute a command in a container.
  port-forward   Forward one or more local ports to a pod.
  proxy          Run a proxy to the Kubernetes API server
  run            Run a particular image on the cluster.
  stop           Gracefully shut down a resource by id or filename.
  expose         Take a replicated application and expose it as Kubernetes Service
  label          Update the labels on a resource
  config         config modifies kubeconfig files
  cluster-info   Display cluster info
  api-versions   Print available API versions.
  version        Print the client and server version information.
  help           Help about any command

Flags:
      --alsologtostderr=false: log to standard error as well as files
      --api-version="": The API version to use when talking to the server
      --certificate-authority="": Path to a cert. file for the certificate authority.
      --client-certificate="": Path to a client key file for TLS.
      --client-key="": Path to a client key file for TLS.
      --cluster="": The name of the kubeconfig cluster to use
      --context="": The name of the kubeconfig context to use
  -h, --help=false: help for kubectl
      --insecure-skip-tls-verify=false: If true, the server's certificate will not be checked for validity. This will make your HTTPS connections insecure.
      --kubeconfig="": Path to the kubeconfig file to use for CLI requests.
      --log-backtrace-at=:0: when logging hits line file:N, emit a stack trace
      --log-dir=: If non-empty, write log files in this directory
      --log-flush-frequency=5s: Maximum number of seconds between log flushes
      --logtostderr=true: log to standard error instead of files
      --match-server-version=false: Require server version to match client version
      --namespace="": If present, the namespace scope for this CLI request.
      --password="": Password for basic authentication to the API server.
  -s, --server="": The address and port of the Kubernetes API server
      --stderrthreshold=2: logs at or above this threshold go to stderr
      --token="": Bearer token for authentication to the API server.
      --user="": The name of the kubeconfig user to use
      --username="": Username for basic authentication to the API server.
      --v=0: log level for V logs
      --validate=false: If true, use a schema to validate the input before sending it
      --vmodule=: comma-separated list of pattern=N settings for file-filtered logging


Use "kubectl help [command]" for more information about a command.

]0;core@kube-00:~[01;32mcore@kube-00[01;34m ~ $[00m kubectl get pods -l name=frontend
POD              IP         CONTAINER(S)   IMAGE(S)                                    HOST                  LABELS          STATUS    CREATED      MESSAGE
frontend-1u17c   10.2.3.5                                                              kube-03/172.18.0.20   name=frontend   Running   12 minutes   
                            php-redis      kubernetes/example-guestbook-php-redis:v2                                         Running   8 minutes    
frontend-a8fr7   10.2.2.5                                                              kube-02/172.18.0.14   name=frontend   Running   59 minutes   
                            php-redis      kubernetes/example-guestbook-php-redis:v2                                         Running   54 minutes   
frontend-hmcij   10.2.2.6                                                              kube-02/172.18.0.14   name=frontend   Running   59 minutes   
                            php-redis      kubernetes/example-guestbook-php-redis:v2                                         Running   54 minutes   
frontend-qzrmv   10.2.1.6                                                              kube-01/172.18.0.13   name=frontend   Running   59 minutes   
                            php-redis      kubernetes/example-guestbook-php-redis:v2                                         Running   54 minutes   
]0;core@kube-00:~[01;32mcore@kube-00[01;34m ~ $[00m [Kkubectl get pods -l name=frontend              
Error: flag needs an argument: 'l' in -l
Run 'kubectl help' for usage.
]0;core@kube-00:~[01;32mcore@kube-00[01;34m ~ $[00m [Kkubectl get pods -l  
POD                  IP         CONTAINER(S)   IMAGE(S)                                    HOST                  LABELS              STATUS    CREATED         MESSAGE
frontend-1u17c       10.2.3.5                                                              kube-03/172.18.0.20   name=frontend       Running   14 minutes      
                                php-redis      kubernetes/example-guestbook-php-redis:v2                                             Running   9 minutes       
frontend-a8fr7       10.2.2.5                                                              kube-02/172.18.0.14   name=frontend       Running   About an hour   
                                php-redis      kubernetes/example-guestbook-php-redis:v2                                             Running   56 minutes      
frontend-hmcij       10.2.2.6                                                              kube-02/172.18.0.14   name=frontend       Running   About an hour   
                                php-redis      kubernetes/example-guestbook-php-redis:v2                                             Running   56 minutes      
frontend-qzrmv       10.2.1.6                                                              kube-01/172.18.0.13   name=frontend       Running   About an hour   
                                php-redis      kubernetes/example-guestbook-php-redis:v2                                             Running   55 minutes      
redis-master-2ga9n   10.2.1.4                                                              kube-01/172.18.0.13   name=redis-master   Running   About an hour   
                                master         redis                                                                                 Running   59 minutes      
redis-slave-7v0ww    10.2.3.4                                                              kube-03/172.18.0.20   name=redis-slave    Running   14 minutes      
                                slave          kubernetes/redis-slave:v2                                                             Running   12 minutes      
redis-slave-l45bp    10.2.4.4                                                              kube-04/172.18.0.21   name=redis-slave    Running   14 minutes      
                                slave          kubernetes/redis-slave:v2                                                             Running   12 minutes      
redis-slave-vlfxu    10.2.2.4                                                              kube-02/172.18.0.14   name=redis-slave    Running   About an hour   
                                slave          kubernetes/redis-slave:v2                                                             Running   58 minutes      
redis-slave-zhv74    10.2.1.5                                                              kube-01/172.18.0.13   name=redis-slave    Running   About an hour   
                                slave          kubernetes/redis-slave:v2                                                             Running   58 minutes      
]0;core@kube-00:~[01;32mcore@kube-00[01;34m ~ $[00m kubectl get pods -l name=frontend        backend
POD       IP        CONTAINER(S)   IMAGE(S)   HOST      LABELS    STATUS    CREATED   MESSAGE
]0;core@kube-00:~[01;32mcore@kube-00[01;34m ~ $[00m [Kkubectl get pods -l name=backend       redis-slave
POD                 IP         CONTAINER(S)   IMAGE(S)                    HOST                  LABELS             STATUS    CREATED         MESSAGE
redis-slave-7v0ww   10.2.3.4                                              kube-03/172.18.0.20   name=redis-slave   Running   15 minutes      
                               slave          kubernetes/redis-slave:v2                                            Running   12 minutes      
redis-slave-l45bp   10.2.4.4                                              kube-04/172.18.0.21   name=redis-slave   Running   15 minutes      
                               slave          kubernetes/redis-slave:v2                                            Running   13 minutes      
redis-slave-vlfxu   10.2.2.4                                              kube-02/172.18.0.14   name=redis-slave   Running   About an hour   
                               slave          kubernetes/redis-slave:v2                                            Running   59 minutes      
redis-slave-zhv74   10.2.1.5                                              kube-01/172.18.0.13   name=redis-slave   Running   About an hour   
                               slave          kubernetes/redis-slave:v2                                            Running   58 minutes      
]0;core@kube-00:~[01;32mcore@kube-00[01;34m ~ $[00m [Kkubectl get pods -l name=redis-slave
POD                 IP         CONTAINER(S)   IMAGE(S)                    HOST                  LABELS             STATUS    CREATED         MESSAGE
redis-slave-7v0ww   10.2.3.4                                              kube-03/172.18.0.20   name=redis-slave   Running   19 minutes      
                               slave          kubernetes/redis-slave:v2                                            Running   17 minutes      
redis-slave-l45bp   10.2.4.4                                              kube-04/172.18.0.21   name=redis-slave   Running   19 minutes      
                               slave          kubernetes/redis-slave:v2                                            Running   17 minutes      
redis-slave-vlfxu   10.2.2.4                                              kube-02/172.18.0.14   name=redis-slave   Running   About an hour   
                               slave          kubernetes/redis-slave:v2                                            Running   About an hour   
redis-slave-zhv74   10.2.1.5                                              kube-01/172.18.0.13   name=redis-slave   Running   About an hour   
                               slave          kubernetes/redis-slave:v2                                            Running   About an hour   
]0;core@kube-00:~[01;32mcore@kube-00[01;34m ~ $[00m [Kkubectl get pods -l name=redis-slave             e=frontd end
POD              IP         CONTAINER(S)   IMAGE(S)                                    HOST                  LABELS          STATUS    CREATED         MESSAGE
frontend-1u17c   10.2.3.5                                                              kube-03/172.18.0.20   name=frontend   Running   19 minutes      
                            php-redis      kubernetes/example-guestbook-php-redis:v2                                         Running   15 minutes      
frontend-a8fr7   10.2.2.5                                                              kube-02/172.18.0.14   name=frontend   Running   About an hour   
                            php-redis      kubernetes/example-guestbook-php-redis:v2                                         Running   About an hour   
frontend-hmcij   10.2.2.6                                                              kube-02/172.18.0.14   name=frontend   Running   About an hour   
                            php-redis      kubernetes/example-guestbook-php-redis:v2                                         Running   About an hour   
frontend-qzrmv   10.2.1.6                                                              kube-01/172.18.0.13   name=frontend   Running   About an hour   
                            php-redis      kubernetes/example-guestbook-php-redis:v2                                         Running   About an hour   
]0;core@kube-00:~[01;32mcore@kube-00[01;34m ~ $[00m [K(reverse-i-search)`': c': kubectl get pods -l name=frontend(reverse-i-search)`c': kube[12Pd': cd guestbook-example[7P[01;32mcore@kube-00[01;34m ~ $[00m 
]0;core@kube-00:~/guestbook-example[01;32mcore@kube-00[01;34m ~/guestbook-example $[00m ls la
ls: cannot access la: No such file or directory
]0;core@kube-00:~/guestbook-example[01;32mcore@kube-00[01;34m ~/guestbook-example $[00m  ls -la
total 68
drwxr-x--- 4 core core  4096 Jul  3 15:15 [0m[01;34m.[0m
drwxr-xr-x 4 core core  4096 Jul  3 15:31 [01;34m..[0m
-rw-r----- 1 core core 25160 May 30 00:12 README.md
-rw-r----- 1 core core   780 May 30 00:12 frontend-controller.json
-rw-r----- 1 core core   343 Jul  3 14:52 frontend-service.json
drwxr-x--- 2 core core  4096 May 30 00:12 [01;34mphp-redis[0m
-rw-r----- 1 core core   759 May 30 00:12 redis-master-controller.json
-rw-r----- 1 core core   359 May 30 00:12 redis-master-service.json
drwxr-x--- 2 core core  4096 May 30 00:12 [01;34mredis-slave[0m
-rw-r----- 1 core core   774 May 30 00:12 redis-slave-controller.json
-rw-r----- 1 core core   356 May 30 00:12 redis-slave-service.json
]0;core@kube-00:~/guestbook-example[01;32mcore@kube-00[01;34m ~/guestbook-example $[00m  c  vi frontend-service.json 
[?1049h[?1h=[1;43r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[43;1H"frontend-service.json" 22L, 343C[1;1H{
   "kind":"Service",
   "apiVersion":"v1beta3",
   "metadata":{[5;7H"name":"frontend",[6;7H"labels":{[7;10H"name":"frontend"[8;7H}
   },
   "spec":{[11;7H"ports": [[12;9H{[13;11H"port":80,[14;11H"targetPort":80,[15;11H"protocol":"TCP"[16;9H}[17;7H],[18;7H"selector":{[19;10H"name":"frontend"[20;7H}
   }
}
[1m[34m~                                                                                                                                                 [24;1H~                                                                                                                                                 [25;1H~                                                                                                                                                 [26;1H~                                                                                                                                                 [27;1H~                                                                                                                                                 [28;1H~                                                                                                                                                 [29;1H~                                                                                                                                                 [30;1H~                                                                                                                                                 [31;1H~                                                                                                                                                 [32;1H~                                                                                                                                                 [33;1H~                                                                                                                                                 [34;1H~                                                                                                                                                 [35;1H~                                                                                                                                                 [36;1H~                                                                                                                                                 [37;1H~                                                                                                                                                 [38;1H~                                                                                                                                                 [39;1H~                                                                                                                                                 [40;1H~                                                                                                                                                 [41;1H~                                                                                                                                                 [42;1H~                                                                                                                                                 [1;1H[?12l[?25h[?25l[m[43;1H[K[43;1H:[?12l[?25hq![?25l[43;1H[K[43;1H[?1l>[?12l[?25h[?1049l]0;core@kube-00:~/guestbook-example[01;32mcore@kube-00[01;34m ~/guestbook-example $[00m [K[13P(reverse-i-search)`': r': vi frontend-service.json [10Pc': kubectl get rc[01;32mcore@kube-00[01;34m ~/guestbook-example $[00m kubectl get rc
CONTROLLER     CONTAINER(S)   IMAGE(S)                                    SELECTOR            REPLICAS
frontend       php-redis      kubernetes/example-guestbook-php-redis:v2   name=frontend       4
redis-master   master         redis                                       name=redis-master   1
redis-slave    slave          kubernetes/redis-slave:v2                   name=redis-slave    4
]0;core@kube-00:~/guestbook-example[01;32mcore@kube-00[01;34m ~/guestbook-example $[00m kubectl get rc  pods -l name frontend
error: name cannot be provided when a selector is specified
]0;core@kube-00:~/guestbook-example[01;32mcore@kube-00[01;34m ~/guestbook-example $[00m [Kkubectl get pods -l name frontend[1P[1@=
POD              IP         CONTAINER(S)   IMAGE(S)                                    HOST                  LABELS          STATUS    CREATED         MESSAGE
frontend-1u17c   10.2.3.5                                                              kube-03/172.18.0.20   name=frontend   Running   31 minutes      
                            php-redis      kubernetes/example-guestbook-php-redis:v2                                         Running   27 minutes      
frontend-a8fr7   10.2.2.5                                                              kube-02/172.18.0.14   name=frontend   Running   About an hour   
                            php-redis      kubernetes/example-guestbook-php-redis:v2                                         Running   About an hour   
frontend-hmcij   10.2.2.6                                                              kube-02/172.18.0.14   name=frontend   Running   About an hour   
                            php-redis      kubernetes/example-guestbook-php-redis:v2                                         Running   About an hour   
frontend-qzrmv   10.2.1.6                                                              kube-01/172.18.0.13   name=frontend   Running   About an hour   
                            php-redis      kubernetes/example-guestbook-php-redis:v2                                         Running   About an hour   
]0;core@kube-00:~/guestbook-example[01;32mcore@kube-00[01;34m ~/guestbook-example $[00m [Knetstat | grep 80
tcp        0      0 localhost:4[01;31m[K80[m[K95         localhost:http-alt      TIME_WAIT  
tcp        0      0 localhost:47[01;31m[K80[m[K5         localhost:http-alt      ESTABLISHED
tcp6       0      0 localhost:http-alt      localhost:47[01;31m[K80[m[K5         ESTABLISHED
unix  2      [ ]         DGRAM                    [01;31m[K80[m[K31     /run/systemd/notify
unix  7      [ ]         DGRAM                    [01;31m[K80[m[K45     /run/systemd/journal/socket
unix  3      [ ]         STREAM     CONNECTED     14[01;31m[K80[m[K5    /var/run/dbus/system_bus_socket
unix  3      [ ]         STREAM     CONNECTED     12[01;31m[K80[m[K2    
unix  2      [ ]         DGRAM                    14[01;31m[K80[m[K0    
unix  3      [ ]         STREAM     CONNECTED     12[01;31m[K80[m[K1    
unix  3      [ ]         STREAM     CONNECTED     341[01;31m[K80[m[K    
unix  3      [ ]         STREAM     CONNECTED     12[01;31m[K80[m[K3    /var/run/dbus/system_bus_socket
unix  3      [ ]         STREAM     CONNECTED     14[01;31m[K80[m[K4    
unix  3      [ ]         STREAM     CONNECTED     12[01;31m[K80[m[K0    
]0;core@kube-00:~/guestbook-example[01;32mcore@kube-00[01;34m ~/guestbook-example $[00m kubectl get pods -l name=frontendkubectl get pods -l name=frontend^C
]0;core@kube-00:~/guestbook-example[01;32mcore@kube-00[01;34m ~/guestbook-example $[00m [Kkubectl get pods -l name=frontend
POD              IP         CONTAINER(S)   IMAGE(S)                                    HOST                  LABELS          STATUS    CREATED         MESSAGE
frontend-1u17c   10.2.3.5                                                              kube-03/172.18.0.20   name=frontend   Running   35 minutes      
                            php-redis      kubernetes/example-guestbook-php-redis:v2                                         Running   30 minutes      
frontend-a8fr7   10.2.2.5                                                              kube-02/172.18.0.14   name=frontend   Running   About an hour   
                            php-redis      kubernetes/example-guestbook-php-redis:v2                                         Running   About an hour   
frontend-hmcij   10.2.2.6                                                              kube-02/172.18.0.14   name=frontend   Running   About an hour   
                            php-redis      kubernetes/example-guestbook-php-redis:v2                                         Running   About an hour   
frontend-qzrmv   10.2.1.6                                                              kube-01/172.18.0.13   name=frontend   Running   About an hour   
                            php-redis      kubernetes/example-guestbook-php-redis:v2                                         Running   About an hour   
]0;core@kube-00:~/guestbook-example[01;32mcore@kube-00[01;34m ~/guestbook-example $[00m [Kweave
weave         weave-helper  
[01;32mcore@kube-00[01;34m ~/guestbook-example $[00m weave
Usage:
weave setup
weave launch       [-password <password>] [-nickname <nickname>] [-nodiscovery]
                       [-iprange <cidr> [-ipsubnet <cidr>]] <peer> ...
weave launch-dns   [<addr>]
weave launch-proxy [-D <endpoint>] [-H <endpoint>]
                       [--with-dns | --without-dns] [--no-default-ipam]
weave connect      [--replace] [<peer> ...]
weave forget       <peer> ...
weave run          [--with-dns | --without-dns] [<addr> ...] <docker run args> ...
weave start        [<addr> ...] <container_id>
weave attach       [<addr> ...] <container_id>
weave detach       [<addr> ...] <container_id>
weave dns-add      <ip_address> [<ip_address> ...] <container_id> [-h <fqdn>]
weave dns-remove   <ip_address> [<ip_address> ...] <container_id> [-h <fqdn>]
weave expose       [<addr> ...] [-h <fqdn>]
weave hide         [<addr> ...]
weave ps           [<container_id> ...]
weave status
weave proxy-env
weave proxy-config
weave version
weave stop
weave stop-dns
weave stop-proxy
weave reset
weave rmpeer       <peer_id>

where <peer>     = <ip_address_or_fqdn>[:<port>]
      <cidr>     = <ip_address>/<routing_prefix_length>
      <addr>     = [ip:]<cidr> | net:<cidr> | net:default
      <endpoint> = [tcp://][<ip_address>]:<port>
      <peer_id>  = <nickname> or weave internal peer ID
]0;core@kube-00:~/guestbook-example[01;32mcore@kube-00[01;34m ~/guestbook-example $[00m [K[01;32mcore@kube-00[01;3